"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{610:(e,r,t)=>{t.d(r,{$:()=>i});var s=t(3004);class i extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,s.xI)().currentUser;e&&(r=function(e){var r;if(!e)return null;let t={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null==(r=e.providerData[0])?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:t}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}},1483:(e,r,t)=>{t.d(r,{D:()=>o,ThemeProvider:()=>n});var s=t(5155);t(2115);var i=t(1362);function n(e){let{children:r,...t}=e;return(0,s.jsx)(i.N,{...t,children:r})}let o=i.D},2400:(e,r,t)=>{t.d(r,{ZJ:()=>l,R8:()=>d,z8:()=>v,As:()=>p,D3:()=>c,sh:()=>m,jt:()=>f,$e:()=>h,Jd:()=>S});var s=t(5155),i=t(2115),n=t(5317),o=t(3004),a=t(3310);function u(){let[e,r]=(0,i.useState)(null);if((0,i.useEffect)(()=>{let e=e=>{r(e)};return a.d.on("permission-error",e),()=>{a.d.off("permission-error",e)}},[]),e)throw e;return null}let l=(0,i.createContext)(void 0),d=e=>{let{children:r,firebaseApp:t,firestore:n,auth:a}=e,[d,c]=(0,i.useState)({user:null,isUserLoading:!0,userError:null});(0,i.useEffect)(()=>{if(!a)return void c({user:null,isUserLoading:!1,userError:Error("Auth service not provided.")});c({user:null,isUserLoading:!0,userError:null});let e=(0,o.hg)(a,e=>{c({user:e,isUserLoading:!1,userError:null})},e=>{console.error("FirebaseProvider: onAuthStateChanged error:",e),c({user:null,isUserLoading:!1,userError:e})});return()=>e()},[a]);let p=(0,i.useMemo)(()=>{let e=!!(t&&n&&a);return{areServicesAvailable:e,firebaseApp:e?t:null,firestore:e?n:null,auth:e?a:null,user:d.user,isUserLoading:d.isUserLoading,userError:d.userError}},[t,n,a,d]);return(0,s.jsxs)(l.Provider,{value:p,children:[(0,s.jsx)(u,{}),r]})},c=()=>{let e=(0,i.useContext)(l);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");if(!e.areServicesAvailable||!e.firebaseApp||!e.firestore||!e.auth)throw Error("Firebase core services not available. Check FirebaseProvider props.");return{firebaseApp:e.firebaseApp,firestore:e.firestore,auth:e.auth,user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}},p=()=>{let{user:e,isUserLoading:r,auth:t,firestore:s}=c(),[o,a]=(0,i.useState)(!1),u=async r=>{if(e&&s){let t=(0,n.H9)(s,"users",e.uid);try{await (0,n.BN)(t,{isProUser:r},{merge:!0}),a(r)}catch(e){console.error("Failed to update Pro status in Firestore:",e)}}};return(0,i.useEffect)(()=>{if(e&&s){let r=(0,n.H9)(s,"users",e.uid),t=(0,n.aQ)(r,e=>{e.exists()&&e.data().isProUser?a(!0):a(!1)});return()=>t()}a(!1)},[e,s]),{user:e,isUserLoading:r,isProUser:o,setProUser:u}},f=()=>{let e=(0,i.useContext)(l);return void 0===e?{db:null}:{db:e.firestore}},m=()=>{let{firebaseApp:e}=c();return e};function h(e,r){let t=(0,i.useMemo)(e,r);return"object"!=typeof t||null===t||(t.__memo=!0),t}let S=()=>{let{user:e,isUserLoading:r,userError:t}=c();return{user:e,isUserLoading:r,userError:t}},v=()=>{let{user:e}=p(),{db:r}=f(),[t,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{if(e&&r){let t=(0,n.H9)(r,"admins",e.uid),i=(0,n.aQ)(t,e=>{s(e.exists()),a(!1)},()=>{s(!1),a(!1)});return()=>i()}s(!1),a(!1)},[e,r]),{isAdmin:t,isCheckingAdmin:o,makeAdmin:async()=>{if(e&&r){let t=(0,n.H9)(r,"admins",e.uid);await (0,n.BN)(t,{isAdmin:!0}),s(!0)}},db:r}}},3310:(e,r,t)=>{t.d(r,{d:()=>s});let s=function(){let e={};return{on(r,t){var s;e[r]||(e[r]=[]),null==(s=e[r])||s.push(t)},off(r,t){var s;e[r]&&(e[r]=null==(s=e[r])?void 0:s.filter(e=>e!==t))},emit(r,t){var s;e[r]&&(null==(s=e[r])||s.forEach(e=>e(t)))}}}()},6671:(e,r,t)=>{t.r(r),t.d(r,{FirebaseClientProvider:()=>d,FirebaseContext:()=>s.ZJ,FirebaseProvider:()=>s.R8,FirestorePermissionError:()=>p.$,addDocumentNonBlocking:()=>S,deleteDocumentNonBlocking:()=>b,errorEmitter:()=>c.d,initiateAnonymousSignIn:()=>E,initiateEmailSignIn:()=>g,initiateEmailSignUp:()=>A,setDocumentNonBlocking:()=>h,updateDocumentNonBlocking:()=>v,useAdmin:()=>s.z8,useAuth:()=>s.As,useCollection:()=>f,useDoc:()=>m,useFirebase:()=>s.D3,useFirebaseApp:()=>s.sh,useFirestore:()=>s.jt,useMemoFirebase:()=>s.$e,useUser:()=>s.Jd});var s=t(2400),i=t(5155),n=t(2115),o=t(3915),a=t(3004),u=t(5317);let l={apiKey:"AIzaSyDKQK4mfCGlSCwJS7oOdMhJa0SIJAv3nXM",authDomain:"nabd-d71ab.firebaseapp.com",projectId:"nabd-d71ab",storageBucket:"nabd-d71ab.appspot.com",messagingSenderId:"529236633123",appId:"1:529236633123:web:7d4945daae4d51038e3396",measurementId:"G-X5SY2K798F"};function d(e){let{children:r}=e,{firebaseApp:t,auth:d,firestore:c}=(0,n.useMemo)(()=>(function(){if((0,o.Dk)().length){let e=(0,o.Sx)();return{firebaseApp:e,auth:(0,a.xI)(e),firestore:(0,u.aU)(e)}}let e=(0,o.Wp)(l);return{firebaseApp:e,auth:(0,a.xI)(e),firestore:(0,u.aU)(e)}})(),[]);return(0,i.jsx)(s.R8,{firebaseApp:t,auth:d,firestore:c,children:r})}var c=t(3310),p=t(610);function f(e){let[r,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(!1),[o,a]=(0,n.useState)(null);if((0,n.useEffect)(()=>{if(!e){t(null),i(!1),a(null);return}i(!0),a(null);let r=(0,u.aQ)(e,e=>{let r=[];for(let t of e.docs)r.push({...t.data(),id:t.id});t(r),a(null),i(!1)},r=>{let s="collection"===e.type?e.path:e._query.path.canonicalString(),n=new p.$({operation:"list",path:s});a(n),t(null),i(!1),c.d.emit("permission-error",n)});return()=>r()},[e]),e&&!e.__memo)throw Error(e+" was not properly memoized using useMemoFirebase");return{data:r,isLoading:s,error:o}}function m(e){let[r,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(!1),[o,a]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e){t(null),i(!1),a(null);return}i(!0),a(null);let r=(0,u.aQ)(e,e=>{e.exists()?t({...e.data(),id:e.id}):t(null),a(null),i(!1)},r=>{let s=new p.$({operation:"get",path:e.path});a(s),t(null),i(!1),c.d.emit("permission-error",s)});return()=>r()},[e]),{data:r,isLoading:s,error:o}}function h(e,r,t){(0,u.BN)(e,r,t).catch(t=>{c.d.emit("permission-error",new p.$({path:e.path,operation:"write",requestResourceData:r}))})}function S(e,r){return(0,u.gS)(e,r).catch(t=>{c.d.emit("permission-error",new p.$({path:e.path,operation:"create",requestResourceData:r}))})}function v(e,r){(0,u.mZ)(e,r).catch(t=>{c.d.emit("permission-error",new p.$({path:e.path,operation:"update",requestResourceData:r}))})}function b(e){(0,u.kd)(e).catch(r=>{c.d.emit("permission-error",new p.$({path:e.path,operation:"delete"}))})}function E(e){(0,a.zK)(e)}function A(e,r,t){(0,a.eJ)(e,r,t)}function g(e,r,t){(0,a.x9)(e,r,t)}},7481:(e,r,t)=>{t.d(r,{dj:()=>p});var s=t(2115);let i=0,n=new Map,o=e=>{if(n.has(e))return;let r=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,r)},a=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},u=[],l={toasts:[]};function d(e){l=a(l,e),u.forEach(e=>{e(l)})}function c(e){let{...r}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,r]=s.useState(l);return s.useEffect(()=>(u.push(r),()=>{let e=u.indexOf(r);e>-1&&u.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,r,t)=>{t.d(r,{cn:()=>n});var s=t(2596),i=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,s.$)(r))}}}]);