(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1823:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>su});var s=t(5155),l=t(2115),r=t(6671),i=t(5731),n=t(8186),o=t(5268),c=t(462),d=t(1545),m=t(3561),u=t(9434);function p(e){let{activeScreen:a,onNavigate:t}=e,l=[{key:"Matches",label:"المباريات",icon:i.A},{key:"MyCountry",label:"ملعبي",icon:n.A},{key:"Predictions",label:"التوقعات",icon:o.A},{key:"Competitions",label:"اختياراتي",icon:c.A},{key:"News",label:"أخبار",icon:d.A},{key:"Settings",label:"المزيد",icon:m.A}],r=e=>{l.some(a=>a.key===e)&&t(e)};return(0,s.jsx)("div",{className:"h-16 flex-shrink-0 border-t bg-card/95 backdrop-blur-md",children:(0,s.jsx)("nav",{className:"flex h-full items-center justify-around px-2 max-w-md mx-auto",children:l.map(e=>{let{key:t,label:l,icon:i}=e,n=a===t;return(0,s.jsxs)("button",{onClick:()=>r(t),className:(0,u.cn)("relative flex h-full flex-col items-center justify-center gap-1 px-2 text-center text-xs font-medium outline-none transition-colors w-[60px]",n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(i,{className:"h-6 w-6"}),(0,s.jsx)("span",{children:l}),n&&(0,s.jsx)("div",{className:"absolute bottom-1 h-1 w-6 rounded-full bg-primary"})]},t)})})})}var x=t(1067),h=t(5977);let f=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.bL,{ref:a,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...l})});f.displayName=h.bL.displayName;let g=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h._V,{ref:a,className:(0,u.cn)("aspect-square h-full w-full",t),...l})});g.displayName=h._V.displayName;let j=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.H4,{ref:a,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l})});j.displayName=h.H4.displayName;var N=t(6997),b=t(9616),v=t(5135),y=t(6054),w=t(831),k=t(8816),C=t(5532),A=t(2400),S=t(5317),E=t(172),T=t(965),I=t(3158),P=t(5074),M=t(610),R=t(3310),B=t(285),D=t(5821),F=t(2085),z=t(5318);let G=D.bL,L=D.l9;D.bm;let $=D.ZL,O=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:a})});O.displayName=D.hJ.displayName;let _=(0,F.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-[95%] border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),H=l.forwardRef((e,a)=>{let{side:t="right",className:l,children:r,...i}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(O,{}),(0,s.jsxs)(D.UC,{ref:a,className:(0,u.cn)(_({side:t}),l),...i,children:[r,(0,s.jsxs)(D.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});H.displayName=D.UC.displayName;let Z=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};Z.displayName="SheetHeader";let J=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.hE,{ref:a,className:(0,u.cn)("text-lg font-semibold text-foreground",t),...l})});J.displayName=D.hE.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.VY,{ref:a,className:(0,u.cn)("text-sm text-muted-foreground",t),...l})}).displayName=D.VY.displayName;let U=l.forwardRef((e,a)=>{let{className:t,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});U.displayName="Input";var q=t(5943),W=t(4913);function V(e,a){let[t,s]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let t=setTimeout(()=>{s(e)},a);return()=>{clearTimeout(t)}},[e,a]),t}let K=D.bL;D.l9;let Y=D.ZL,Q=D.bm,X=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.hJ,{ref:a,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});X.displayName=D.hJ.displayName;let ee=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(Y,{children:[(0,s.jsx)(X,{}),(0,s.jsxs)(D.UC,{ref:a,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[l,(0,s.jsxs)(D.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ee.displayName=D.UC.displayName;let ea=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};ea.displayName="DialogHeader";let et=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};et.displayName="DialogFooter";let es=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.hE,{ref:a,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});es.displayName=D.hE.displayName;let el=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(D.VY,{ref:a,className:(0,u.cn)("text-sm text-muted-foreground",t),...l})});el.displayName=D.VY.displayName;var er=t(968);let ei=(0,F.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),en=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(er.b,{ref:a,className:(0,u.cn)(ei(),t),...l})});en.displayName=er.b.displayName;let eo=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...l})});function ec(e){let{isOpen:a,onOpenChange:t,item:r,onSave:i}=e,[n,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),{isAdmin:m}=(0,A.z8)();(0,l.useEffect)(()=>{r&&(o(r.name||""),d(r.note||""))},[r]);let u=m&&(null==r?void 0:r.purpose)==="rename"||(null==r?void 0:r.type)==="status",p=(null==r?void 0:r.purpose)==="note"||(null==r?void 0:r.purpose)==="crown";return(0,s.jsx)(K,{open:a,onOpenChange:t,children:(0,s.jsxs)(ee,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{children:r?"crown"===r.purpose?"تتويج ".concat(r.name):"note"===r.purpose?"إضافة ملاحظة على ".concat(r.name):"status"===r.type?"تغيير حالة المباراة المخصصة":"تعديل اسم ".concat({league:"البطولة",team:"الفريق",player:"اللاعب",continent:"القارة",country:"الدولة",coach:"المدرب",status:"الحالة",crown:"الفريق"}[r.type]):""}),(0,s.jsx)(el,{children:(()=>{if(!r)return"";if("crown"===r.purpose)return'أضف ملاحظة خاصة لهذا الفريق المتوج لعرضها في قسم "ملعبي".';if("note"===r.purpose)return'سيتم حفظ هذا العنصر مع ملاحظتك في قسم "بلدي".';if("status"===r.type)return'اكتب الحالة التي تريد عرضها للمباراة قبل بدئها (مثال: "قناة العرض: الرابعة"). اترك الحقل فارغًا للإزالة.';if(m&&"rename"===r.purpose){let e=(null==r?void 0:r.originalName)||(null==r?void 0:r.name);return"الاسم الأصلي: ".concat(e,". اتركه فارغًا للعودة للاسم الأصلي.")}return""})()})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[u&&(0,s.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,s.jsx)(en,{htmlFor:"name",children:(null==r?void 0:r.type)==="status"?"الحالة المخصصة":"الاسم المخصص (للترجمة)"}),(0,s.jsx)(U,{id:"name",value:n,onChange:e=>o(e.target.value),placeholder:(null==r?void 0:r.type)==="status"?"مثال: منقولة على الرابعة":"الاسم الجديد"})]}),p&&(0,s.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,s.jsx)(en,{htmlFor:"note",children:"ملاحظة (اختياري)"}),(0,s.jsx)(eo,{id:"note",value:c,onChange:e=>d(e.target.value),placeholder:"اكتب ملاحظتك الشخصية هنا..."})]})]}),(0,s.jsxs)(et,{children:[(0,s.jsx)(Q,{asChild:!0,children:(0,s.jsx)(B.$,{type:"button",variant:"secondary",children:"إلغاء"})}),(0,s.jsx)(B.$,{type:"submit",onClick:()=>{r&&i(r.type,r.id,n,c),t(!1)},children:"حفظ"})]})]})})}eo.displayName="Textarea";var ed=t(7481);let em=[{id:33,name:"Manchester United",logo:"https://media.api-sports.io/football/teams/33.png",type:"Club"},{id:40,name:"Liverpool",logo:"https://media.api-sports.io/football/teams/40.png",type:"Club"},{id:42,name:"Arsenal",logo:"https://media.api-sports.io/football/teams/42.png",type:"Club"},{id:47,name:"Tottenham",logo:"https://media.api-sports.io/football/teams/47.png",type:"Club"},{id:49,name:"Chelsea",logo:"https://media.api-sports.io/football/teams/49.png",type:"Club"},{id:50,name:"Manchester City",logo:"https://media.api-sports.io/football/teams/50.png",type:"Club"},{id:529,name:"Barcelona",logo:"https://media.api-sports.io/football/teams/529.png",type:"Club"},{id:541,name:"Real Madrid",logo:"https://media.api-sports.io/football/teams/541.png",type:"Club"},{id:530,name:"Atletico Madrid",logo:"https://media.api-sports.io/football/teams/530.png",type:"Club"},{id:489,name:"AC Milan",logo:"https://media.api-sports.io/football/teams/489.png",type:"Club"},{id:496,name:"Juventus",logo:"https://media.api-sports.io/football/teams/496.png",type:"Club"},{id:497,name:"Inter",logo:"https://media.api-sports.io/football/teams/497.png",type:"Club"},{id:492,name:"Napoli",logo:"https://media.api-sports.io/football/teams/492.png",type:"Club"},{id:505,name:"AS Roma",logo:"https://media.api-sports.io/football/teams/505.png",type:"Club"},{id:157,name:"Bayern Munich",logo:"https://media.api-sports.io/football/teams/157.png",type:"Club"},{id:165,name:"Borussia Dortmund",logo:"https://media.api-sports.io/football/teams/165.png",type:"Club"},{id:168,name:"Bayer Leverkusen",logo:"https://media.api-sports.io/football/teams/168.png",type:"Club"},{id:173,name:"RB Leipzig",logo:"https://media.api-sports.io/football/teams/173.png",type:"Club"},{id:85,name:"Paris Saint Germain",logo:"https://media.api-sports.io/football/teams/85.png",type:"Club"},{id:91,name:"Monaco",logo:"https://media.api-sports.io/football/teams/91.png",type:"Club"},{id:94,name:"Marseille",logo:"https://media.api-sports.io/football/teams/94.png",type:"Club"},{id:211,name:"Benfica",logo:"https://media.api-sports.io/football/teams/211.png",type:"Club"},{id:212,name:"FC Porto",logo:"https://media.api-sports.io/football/teams/212.png",type:"Club"},{id:228,name:"Sporting CP",logo:"https://media.api-sports.io/football/teams/228.png",type:"Club"},{id:194,name:"Ajax",logo:"https://media.api-sports.io/football/teams/194.png",type:"Club"},{id:197,name:"PSV Eindhoven",logo:"https://media.api-sports.io/football/teams/197.png",type:"Club"},{id:408,name:"Feyenoord",logo:"https://media.api-sports.io/football/teams/408.png",type:"Club"},{id:603,name:"Al Hilal",logo:"https://media.api-sports.io/football/teams/603.png",type:"Club"},{id:605,name:"Al Nassr",logo:"https://media.api-sports.io/football/teams/605.png",type:"Club"},{id:611,name:"Al Ittihad",logo:"https://media.api-sports.io/football/teams/611.png",type:"Club"},{id:601,name:"Al Ahli",logo:"https://media.api-sports.io/football/teams/601.png",type:"Club"},{id:2282,name:"Al Sadd",logo:"https://media.api-sports.io/football/teams/2282.png",type:"Club"},{id:2281,name:"Al Duhail",logo:"https://media.api-sports.io/football/teams/2281.png",type:"Club"},{id:2289,name:"Al Ain",logo:"https://media.api-sports.io/football/teams/2289.png",type:"Club"},{id:2291,name:"Shabab Al Ahli",logo:"https://media.api-sports.io/football/teams/2291.png",type:"Club"},{id:1123,name:"Al Zawraa",logo:"https://media.api-sports.io/football/teams/1123.png",type:"Club"},{id:1124,name:"Al Quwa Al Jawiya",logo:"https://media.api-sports.io/football/teams/1124.png",type:"Club"},{id:1125,name:"Al Shorta",logo:"https://media.api-sports.io/football/teams/1125.png",type:"Club"},{id:4238,name:"Al Karkh",logo:"https://media.api-sports.io/football/teams/4238.png",type:"Club"},{id:4239,name:"Naft Maysan",logo:"https://media.api-sports.io/football/teams/4239.png",type:"Club"},{id:4241,name:"Al Talaba",logo:"https://media.api-sports.io/football/teams/4241.png",type:"Club"},{id:1159,name:"Al Ahly SC",logo:"https://media.api-sports.io/football/teams/1159.png",type:"Club"},{id:622,name:"Zamalek SC",logo:"https://media.api-sports.io/football/teams/622.png",type:"Club"},{id:639,name:"Raja Casablanca",logo:"https://media.api-sports.io/football/teams/639.png",type:"Club"},{id:641,name:"Wydad Casablanca",logo:"https://media.api-sports.io/football/teams/641.png",type:"Club"},{id:634,name:"Esperance de Tunis",logo:"https://media.api-sports.io/football/teams/634.png",type:"Club"},{id:633,name:"Etoile du Sahel",logo:"https://media.api-sports.io/football/teams/633.png",type:"Club"},{id:1060,name:"Mamelodi Sundowns",logo:"https://media.api-sports.io/football/teams/1060.png",type:"Club"},{id:1063,name:"Orlando Pirates",logo:"https://media.api-sports.io/football/teams/1063.png",type:"Club"},{id:1062,name:"Kaizer Chiefs",logo:"https://media.api-sports.io/football/teams/1062.png",type:"Club"},{id:910,name:"TP Mazembe",logo:"https://media.api-sports.io/football/teams/910.png",type:"Club"},{id:126,name:"Flamengo",logo:"https://media.api-sports.io/football/teams/126.png",type:"Club"},{id:121,name:"Palmeiras",logo:"https://media.api-sports.io/football/teams/121.png",type:"Club"},{id:451,name:"Boca Juniors",logo:"https://media.api-sports.io/football/teams/451.png",type:"Club"},{id:436,name:"River Plate",logo:"https://media.api-sports.io/football/teams/436.png",type:"Club"},{id:1613,name:"Inter Miami",logo:"https://media.api-sports.io/football/teams/1613.png",type:"Club"},{id:1599,name:"LA Galaxy",logo:"https://media.api-sports.io/football/teams/1599.png",type:"Club"},{id:2223,name:"Club America",logo:"https://media.api-sports.io/football/teams/2223.png",type:"Club"},{id:2286,name:"Guadalajara",logo:"https://media.api-sports.io/football/teams/2286.png",type:"Club"},{id:2,name:"France",logo:"https://media.api-sports.io/football/teams/2.png",type:"National"},{id:6,name:"Brazil",logo:"https://media.api-sports.io/football/teams/6.png",type:"National"},{id:8,name:"Germany",logo:"https://media.api-sports.io/football/teams/8.png",type:"National"},{id:9,name:"England",logo:"https://media.api-sports.io/football/teams/9.png",type:"National"},{id:10,name:"Portugal",logo:"https://media.api-sports.io/football/teams/10.png",type:"National"},{id:12,name:"Spain",logo:"https://media.api-sports.io/football/teams/12.png",type:"National"},{id:13,name:"Italy",logo:"https://media.api-sports.io/football/teams/13.png",type:"National"},{id:28,name:"Argentina",logo:"https://media.api-sports.io/football/teams/28.png",type:"National"},{id:27,name:"Netherlands",logo:"https://media.api-sports.io/football/teams/27.png",type:"National"},{id:21,name:"Belgium",logo:"https://media.api-sports.io/football/teams/21.png",type:"National"},{id:15,name:"Morocco",logo:"https://media.api-sports.io/football/teams/15.png",type:"National"},{id:19,name:"Egypt",logo:"https://media.api-sports.io/football/teams/19.png",type:"National"},{id:20,name:"Algeria",logo:"https://media.api-sports.io/football/teams/20.png",type:"National"},{id:29,name:"Tunisia",logo:"https://media.api-sports.io/football/teams/29.png",type:"National"},{id:769,name:"Iraq",logo:"https://media.api-sports.io/football/teams/769.png",type:"National"},{id:768,name:"Saudi Arabia",logo:"https://media.api-sports.io/football/teams/768.png",type:"National"},{id:775,name:"Qatar",logo:"https://media.api-sports.io/football/teams/775.png",type:"National"},{id:25,name:"Japan",logo:"https://media.api-sports.io/football/teams/25.png",type:"National"},{id:24,name:"South Korea",logo:"https://media.api-sports.io/football/teams/24.png",type:"National"},{id:504,name:"Lazio",logo:"https://media.api-sports.io/football/teams/504.png",type:"Club"},{id:169,name:"Eintracht Frankfurt",logo:"https://media.api-sports.io/football/teams/169.png",type:"Club"},{id:79,name:"Lille",logo:"https://media.api-sports.io/football/teams/79.png",type:"Club"},{id:548,name:"Sevilla",logo:"https://media.api-sports.io/football/teams/548.png",type:"Club"},{id:536,name:"Real Sociedad",logo:"https://media.api-sports.io/football/teams/536.png",type:"Club"},{id:38,name:"Leicester",logo:"https://media.api-sports.io/football/teams/38.png",type:"Club"},{id:34,name:"Newcastle",logo:"https://media.api-sports.io/football/teams/34.png",type:"Club"},{id:66,name:"Aston Villa",logo:"https://media.api-sports.io/football/teams/66.png",type:"Club"},{id:221,name:"Celtic",logo:"https://media.api-sports.io/football/teams/221.png",type:"Club"},{id:247,name:"Rangers",logo:"https://media.api-sports.io/football/teams/247.png",type:"Club"},{id:585,name:"Galatasaray",logo:"https://media.api-sports.io/football/teams/585.png",type:"Club"},{id:645,name:"Fenerbahce",logo:"https://media.api-sports.io/football/teams/645.png",type:"Club"},{id:17,name:"Australia",logo:"https://media.api-sports.io/football/teams/17.png",type:"National"},{id:22,name:"Iran",logo:"https://media.api-sports.io/football/teams/22.png",type:"National"},{id:23,name:"Nigeria",logo:"https://media.api-sports.io/football/teams/23.png",type:"National"},{id:31,name:"Senegal",logo:"https://media.api-sports.io/football/teams/31.png",type:"National"}],eu=[{id:2,name:"UEFA Champions League",logo:"https://media.api-sports.io/football/leagues/2.png"},{id:3,name:"UEFA Europa League",logo:"https://media.api-sports.io/football/leagues/3.png"},{id:848,name:"UEFA Conference League",logo:"https://media.api-sports.io/football/leagues/848.png"},{id:1,name:"World Cup",logo:"https://media.api-sports.io/football/leagues/1.png"},{id:4,name:"Euro Championship",logo:"https://media.api-sports.io/football/leagues/4.png"},{id:9,name:"Copa America",logo:"https://media.api-sports.io/football/leagues/9.png"},{id:6,name:"Africa Cup of Nations",logo:"https://media.api-sports.io/football/leagues/6.png"},{id:884,name:"AFC Asian Cup",logo:"https://media.api-sports.io/football/leagues/884.png"},{id:39,name:"Premier League",logo:"https://media.api-sports.io/football/leagues/39.png"},{id:140,name:"La Liga",logo:"https://media.api-sports.io/football/leagues/140.png"},{id:135,name:"Serie A",logo:"https://media.api-sports.io/football/leagues/135.png"},{id:78,name:"Bundesliga",logo:"https://media.api-sports.io/football/leagues/78.png"},{id:61,name:"Ligue 1",logo:"https://media.api-sports.io/football/leagues/61.png"},{id:307,name:"Saudi Professional League",logo:"https://media.api-sports.io/football/leagues/307.png"},{id:542,name:"Iraq Stars League",logo:"https://media.api-sports.io/football/leagues/542.png"},{id:310,name:"Qatar Stars League",logo:"https://media.api-sports.io/football/leagues/310.png"},{id:304,name:"UAE Pro League",logo:"https://media.api-sports.io/football/leagues/304.png"},{id:203,name:"Egyptian Premier League",logo:"https://media.api-sports.io/football/leagues/203.png"},{id:200,name:"Moroccan Botola Pro",logo:"https://media.api-sports.io/football/leagues/200.png"},{id:202,name:"Tunisian Ligue 1",logo:"https://media.api-sports.io/football/leagues/202.png"},{id:199,name:"Algerian Ligue 1",logo:"https://media.api-sports.io/football/leagues/199.png"},{id:7,name:"CAF Champions League",logo:"https://media.api-sports.io/football/leagues/7.png"},{id:14,name:"AFC Champions League",logo:"https://media.api-sports.io/football/leagues/14.png"},{id:11,name:"Copa Libertadores",logo:"https://media.api-sports.io/football/leagues/11.png"},{id:253,name:"Major League Soccer",logo:"https://media.api-sports.io/football/leagues/253.png"},{id:71,name:"Brasileir\xe3o S\xe9rie A",logo:"https://media.api-sports.io/football/leagues/71.png"},{id:128,name:"Argentine Primera Divisi\xf3n",logo:"https://media.api-sports.io/football/leagues/128.png"},{id:88,name:"Eredivisie",logo:"https://media.api-sports.io/football/leagues/88.png"},{id:94,name:"Primeira Liga",logo:"https://media.api-sports.io/football/leagues/94.png"},{id:197,name:"Turkish S\xfcper Lig",logo:"https://media.api-sports.io/football/leagues/197.png"},{id:40,name:"Championship",logo:"https://media.api-sports.io/football/leagues/40.png"},{id:143,name:"Copa del Rey",logo:"https://media.api-sports.io/football/leagues/143.png"},{id:45,name:"FA Cup",logo:"https://media.api-sports.io/football/leagues/45.png"}],ep={continents:{World:"العالم",Europe:"أوروبا",Asia:"آسيا",Africa:"أفريقيا","South America":"أمريكا الجنوبية","North America":"أمريكا الشمالية",Oceania:"أوقيانوسيا",Other:"أخرى"},countries:{},leagues:{2:"دوري أبطال أوروبا",3:"الدوري الأوروبي",39:"الدوري الإنجليزي الممتاز",140:"الدوري الإسباني",135:"الدوري الإيطالي",78:"الدوري الألماني",61:"الدوري الفرنسي",307:"دوري روشن السعودي",542:"دوري نجوم العراق",253:"الدوري الأمريكي",1:"كأس العالم",4:"بطولة أمم أوروبا",9:"كوبا أمريكا",6:"كأس الأمم الأفريقية",884:"كأس آسيا",7:"دوري أبطال أفريقيا",14:"دوري أبطال آسيا",11:"كأس ليبرتادوريس",310:"دوري نجوم قطر",304:"دوري أدنوك للمحترفين",203:"الدوري المصري الممتاز",200:"البطولة الإحترافية",202:"الرابطة المحترفة الأولى",199:"الرابطة المحترفة الأولى الجزائرية",848:"دوري المؤتمر الأوروبي",40:"دوري البطولة الإنجليزية",143:"كأس ملك إسبانيا",45:"كأس الاتحاد الإنجليزي",71:"الدوري البرازيلي",128:"الدوري الأرجنتيني",88:"الدوري الهولندي",94:"الدوري البرتغالي",197:"الدوري التركي الممتاز"},teams:{},players:{}},ex="goalstack_local_favorites_v2",eh="goalstack_guest_mode_active",ef=()=>{try{let e=window.localStorage.getItem(ex);if(!e)return{teams:{},leagues:{},players:{},crownedTeams:{},notificationsEnabled:{news:!0}};let a=JSON.parse(e);return{teams:a.teams||{},leagues:a.leagues||{},players:a.players||{},crownedTeams:a.crownedTeams||{},notificationsEnabled:a.notificationsEnabled||{news:!0}}}catch(e){return console.error("Error reading local favorites:",e),{teams:{},leagues:{},players:{},crownedTeams:{}}}},eg=e=>{try{let a={teams:e.teams,leagues:e.leagues,players:e.players,crownedTeams:e.crownedTeams,notificationsEnabled:e.notificationsEnabled};window.localStorage.setItem(ex,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("localFavoritesChanged"))}catch(e){console.error("Error saving local favorites:",e),e instanceof DOMException&&"QuotaExceededError"===e.name&&console.error("LocalStorage quota exceeded. Cannot save new favorites.")}},ej=()=>{window.localStorage.removeItem(ex),window.dispatchEvent(new CustomEvent("localFavoritesChanged"))},eN=e=>{try{let a=localStorage.getItem(e);if(!a)return null;return JSON.parse(a).data}catch(e){return null}},eb=e=>e?e.replace(/[\u064B-\u0652]/g,"").replace(/[أإآ]/g,"ا").replace(/ة/g,"ه").replace(/\s+/g," ").trim().toLowerCase():"",ev=e=>{let{item:a,itemType:t,isFavorited:l,isCrowned:r,onFavoriteToggle:i,onCrownToggle:n,onResultClick:o,onRename:d,isAdmin:m}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2 p-1.5 border-b last:border-b-0 hover:bg-accent/50 rounded-md",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2 cursor-pointer",onClick:o,children:[(0,s.jsxs)(f,{className:(0,u.cn)("h-7 w-7","leagues"===t&&"p-0.5"),children:[(0,s.jsx)(g,{src:a.logo,alt:a.name,className:"leagues"===t?"object-contain":"object-cover"}),(0,s.jsx)(j,{children:a.name.charAt(0)})]}),(0,s.jsx)("div",{className:"flex-1 font-semibold truncate text-sm",children:a.name})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[m&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),d()},children:(0,s.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"})}),"teams"===t&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),n(a)},children:(0,s.jsx)(W.A,{className:(0,u.cn)("h-5 w-5 text-muted-foreground/60",r&&"fill-current text-yellow-400")})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),i(a,t)},children:(0,s.jsx)(c.A,{className:(0,u.cn)("h-5 w-5 text-muted-foreground/60",l&&"fill-current text-yellow-400")})})]})]})};function ey(e){let{children:a,navigate:t,initialItemType:i,favorites:n,customNames:o,setFavorites:c,onCustomNameChange:d}=e,[m,u]=(0,l.useState)(""),p=V(m,300),[x,h]=(0,l.useState)([]),[f,g]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),[b,v]=(0,l.useState)(i||"teams"),{isAdmin:y}=(0,r.useAdmin)(),{user:w}=(0,r.useAuth)(),{db:k}=(0,r.useFirestore)(),{toast:C}=(0,ed.dj)(),[A,T]=(0,l.useState)(null),I=(0,l.useCallback)((e,a,t)=>{var s;if(!o)return t;let l="team"===e?o.teams:o.leagues;return(null==l?void 0:l.get(a))||(null==(s=ep["".concat(e,"s")])?void 0:s[a])||t},[o]),D=(0,l.useMemo)(()=>{if(!o)return[];let e=[],a=new Set,t=eN("goalstack_all_competitions_cache"),s=eN("goalstack_national_teams_cache");return t&&t.forEach(t=>{let s=t.league,l="leagues-".concat(s.id);a.has(l)||(e.push({id:s.id,type:"leagues",name:I("league",s.id,s.name),originalName:s.name,logo:s.logo,originalItem:{id:s.id,name:s.name,logo:s.logo}}),a.add(l))}),s&&s.forEach(t=>{let s="teams-".concat(t.id);a.has(s)||(e.push({id:t.id,type:"teams",name:I("team",t.id,t.name),originalName:t.name,logo:t.logo,originalItem:{...t}}),a.add(s))}),e},[o,I]),F=e=>{N(e),!e&&(u(""),h([]),i&&v(i))},z=(0,l.useCallback)(async e=>{if(!e)return void h([]);g(!0);let a=[],t=new Set,s=eb(e);if(D.forEach(e=>{let l=eb(e.name),r=eb(e.originalName);if(l.includes(s)||r.includes(s)){let s="".concat(e.type,"-").concat(e.id);t.has(s)||(a.push(e),t.add(s))}}),k)try{let e=await (0,S.GG)((0,S.rJ)(k,"teamCustomizations")),l=[];if(e.forEach(e=>{let a=e.data().customName;eb(a).includes(s)&&l.push(Number(e.id))}),l.length>0){let e=l.map(e=>fetch("/api/football/teams?id=".concat(e)).then(e=>e.json()));(await Promise.all(e)).forEach(e=>{var s;if(null==(s=e.response)?void 0:s[0]){let s=e.response[0].team,l="teams-".concat(s.id);t.has(l)||(a.push({id:s.id,type:"teams",name:I("team",s.id,s.name),originalName:s.name,logo:s.logo,originalItem:s}),t.add(l))}})}}catch(e){console.error("Error searching Firestore team customizations:",e)}let l=[fetch("/api/football/teams?search=".concat(encodeURIComponent(e))).then(e=>e.ok?e.json():{response:[]}),fetch("/api/football/leagues?search=".concat(encodeURIComponent(e))).then(e=>e.ok?e.json():{response:[]})];try{var r,i;let[e,s]=await Promise.all(l);null==(r=e.response)||r.forEach(e=>{let s="teams-".concat(e.team.id);t.has(s)||(a.push({id:e.team.id,type:"teams",name:I("team",e.team.id,e.team.name),originalName:e.team.name,logo:e.team.logo,originalItem:e.team}),t.add(s))}),null==(i=s.response)||i.forEach(e=>{let s="leagues-".concat(e.league.id);t.has(s)||(a.push({id:e.league.id,type:"leagues",name:I("league",e.league.id,e.league.name),originalName:e.league.name,logo:e.league.logo,originalItem:e.league}),t.add(s))})}catch(e){console.error("API search failed",e)}finally{h(a),g(!1)}},[I,D,k]);(0,l.useEffect)(()=>{p&&j?z(p):h([])},[p,z,j]);let $=(0,l.useCallback)((e,a)=>{let t=e.id;if(!w&&!("teams"===a?em.some(e=>e.id===t):eu.some(e=>e.id===t)))return void C({title:"ميزة للمستخدمين المسجلين",description:"تفضيل هذا العنصر متاح فقط للمستخدمين المسجلين. يمكنك تفضيل الفرق والبطولات الشائعة كزائر."});c(s=>{var l;let r=JSON.parse(JSON.stringify(s||{}));r[a]||(r[a]={});let i=!!(null==(l=r[a])?void 0:l[t]);if(i)delete r[a][t];else{let s="leagues"===a?{name:e.name,leagueId:t,logo:e.logo,notificationsEnabled:!0}:{name:e.name,teamId:t,logo:e.logo,type:e.national?"National":"Club"};r[a][t]=s}if(w){if(k){let e=(0,S.H9)(k,"users",w.uid,"favorites","data"),s={["".concat(a,".").concat(t)]:i?(0,S.CL)():r[a][t]};(0,S.mZ)(e,s).catch(a=>{R.d.emit("permission-error",new M.$({path:e.path,operation:"update",requestResourceData:s}))})}}else eg(r);return r})},[w,k,c,C]),O=e=>{var a,t;if(!w)return void C({title:"مستخدم زائر",description:"يرجى تسجيل الدخول لاستخدام هذه الميزة."});T({id:e.id,name:I("team",e.id,e.name),type:"crown",purpose:"crown",originalData:e,note:(null==n||null==(t=n.crownedTeams)||null==(a=t[e.id])?void 0:a.note)||""})},_=e=>{"teams"===e.type?t("TeamDetails",{teamId:e.id}):t("CompetitionDetails",{leagueId:e.id,title:e.name,logo:e.logo}),F(!1)},q=(e,a,t)=>{let s=I(e,a,t.name);T({id:a,name:s,type:e,originalData:t,purpose:"rename",originalName:t.name})},W=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!A||!k)return;let{purpose:l,originalData:r,originalName:i}=A;if("rename"===l&&y){let s=(0,S.H9)(k,"".concat(e,"Customizations"),String(a));t&&t!==i?(0,S.BN)(s,{customName:t}):(0,S.kd)(s),d&&d()}else if("crown"===l&&w){let e=Number(a);c(a=>{var t;if(!a)return{};let l=JSON.parse(JSON.stringify(a));if(l.crownedTeams||(l.crownedTeams={}),(null==(t=l.crownedTeams)?void 0:t[e])?delete l.crownedTeams[e]:l.crownedTeams[e]={teamId:e,name:r.name,logo:r.logo,note:s},w&&!w.isAnonymous){let a=(0,S.H9)(k,"users",w.uid,"favorites","data"),t={["crownedTeams.".concat(e)]:l.crownedTeams[e]||(0,S.CL)()};(0,S.mZ)(a,t).catch(e=>{R.d.emit("permission-error",new M.$({path:a.path,operation:"update",requestResourceData:t}))})}else eg(l);return l})}T(null)},K=(0,l.useMemo)(()=>{if(!o)return[];let e=new Set;return[...em,...eu].map(a=>{let t="national"in a||"type"in a?"teams":"leagues",s="".concat(t,"-").concat(a.id);return e.has(s)?null:(e.add(s),{id:a.id,type:t,name:I(t.slice(0,-1),a.id,a.name),originalName:a.name,logo:a.logo,originalItem:a})}).filter(Boolean)},[I,o]);return(0,s.jsxs)(G,{open:j,onOpenChange:F,children:[(0,s.jsx)(L,{asChild:!0,onClick:e=>{e.stopPropagation(),N(!0)},children:a}),(0,s.jsxs)(H,{side:"bottom",className:"flex flex-col h-[90vh] top-0 rounded-t-none",children:[(0,s.jsx)(Z,{children:(0,s.jsx)(J,{children:"اكتشف"})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(P.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(U,{placeholder:"ابحث عن فريق أو بطولة...",className:"pl-10 text-md",value:m,onChange:e=>u(e.target.value)})]}),!p&&(0,s.jsxs)("div",{className:"flex items-center justify-center pt-2",children:[(0,s.jsx)(B.$,{variant:"teams"===b?"secondary":"ghost",size:"sm",onClick:()=>v("teams"),children:"الفرق"}),(0,s.jsx)(B.$,{variant:"leagues"===b?"secondary":"ghost",size:"sm",onClick:()=>v("leagues"),children:"البطولات"})]}),(0,s.jsx)("div",{className:"mt-4 flex-1 overflow-y-auto space-y-1 pr-2 relative",children:(()=>{if(!o||!n||f)return(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})});let e=p?x:K.filter(e=>e.type===b);return 0===e.length&&p?(0,s.jsx)("p",{className:"text-muted-foreground text-center pt-8",children:"لا توجد نتائج بحث."}):0!==e.length||p?(0,s.jsxs)("div",{className:"space-y-2",children:[!p&&(0,s.jsx)("h3",{className:"font-bold text-md text-center text-muted-foreground",children:"teams"===b?"الفرق الأكثر شعبية":"البطولات الأكثر شعبية"}),e.map(e=>{var a,t;let l=!!(null==(a=n[e.type])?void 0:a[e.id]),r="teams"===e.type&&!!(null==(t=n.crownedTeams)?void 0:t[e.id]);return(0,s.jsx)(ev,{item:{...e.originalItem,name:e.name},itemType:e.type,isFavorited:l,isCrowned:r,onFavoriteToggle:$,onCrownToggle:e=>O(e),onResultClick:()=>_(e),isAdmin:y,onRename:()=>q(e.type,e.id,e.originalItem)},"".concat(e.type,"-").concat(e.id))})]}):(0,s.jsx)("p",{className:"text-muted-foreground text-center pt-8",children:"لا توجد عناصر شائعة لعرضها."})})()}),A&&(0,s.jsx)(ec,{isOpen:!!A,onOpenChange:e=>!e&&T(null),item:A,onSave:(e,a,t,s)=>W(e,a,t,s||"")})]})]})}let ew=e=>["1H","HT","2H","ET","BT","P","LIVE"].includes(e.short),ek=e=>(0,b.c)(e)?"اليوم":(0,v.P)(e)?"الأمس":(0,y.e)(e)?"غداً":(0,N.GP)(e,"EEEE",{locale:C.ar}),eC=e=>{let{fixture:a,large:t=!1,customStatus:r}=e,{fixture:i,goals:n}=a,{status:o,date:c}=i,[d,m]=(0,l.useState)(null),p=ew(o),x=new Date(c);(0,l.useEffect)(()=>{let e=null;if(p&&null!==o.elapsed&&!isNaN(o.elapsed)){let a=Number(o.elapsed),t=Date.now()-60*a*1e3;e=setInterval(()=>{m(Math.floor((Date.now()-t)/1e3))},1e3)}else m(null);return()=>{e&&clearInterval(e)}},[o.short,o.elapsed,p]);let h=e=>{if(null===e||isNaN(e))return o.elapsed;let a=Math.floor(e/60);return"".concat(a.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},{main:f,sub:g,isLive:j}=(()=>{let e="NS"!==o.short&&"TBD"!==o.short;if(r&&r.trim()&&!e)return{main:r,sub:ek(x),isLive:!1};if(null===n.home||null===n.away)return"PST"===o.short?{main:"مؤجلة",sub:"",isLive:!1}:"TBD"===o.short?{main:"لم تحدد",sub:"",isLive:!1}:{main:(0,N.GP)(x,"HH:mm"),sub:ek(x),isLive:!1};let a="".concat(n.home," - ").concat(n.away);if(p){var t;return{main:a,sub:"HT"===o.short?"استراحة":null!=(t=h(d))?t:"مباشر",isLive:!0}}return["FT","AET","PEN"].includes(o.short)?{main:a,sub:o.long,isLive:!1}:{main:(0,N.GP)(x,"HH:mm"),sub:ek(x),isLive:!1}})();return t?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("div",{className:"font-bold text-3xl tracking-wider",children:f}),g&&(0,s.jsx)("div",{className:(0,u.cn)("text-xs mt-1",j?"text-red-500 font-bold animate-pulse":"text-muted-foreground"),children:g})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:(0,u.cn)("font-bold",j?"text-base":"text-sm"),children:f}),g&&(0,s.jsx)("div",{className:(0,u.cn)("text-[10px] mt-1",j?"text-red-500 font-bold animate-pulse":"text-muted-foreground"),children:g})]})};function eA(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("animate-pulse rounded-md bg-muted",a),...t})}var eS=t(5863);let eE=l.forwardRef((e,a)=>{let{className:t,value:l,indicatorClassName:r,...i}=e;return(0,s.jsx)(eS.bL,{ref:a,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,s.jsx)(eS.C1,{className:(0,u.cn)("h-full w-full flex-1 bg-primary transition-all",r),style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});eE.displayName=eS.bL.displayName;let eT=e=>{let{label:a,logo:t,percentage:l,barColor:r}=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,s.jsxs)(f,{className:"h-4 w-4",children:[(0,s.jsx)(g,{src:t,alt:a}),(0,s.jsx)(j,{children:a.charAt(0)})]}),(0,s.jsx)("span",{className:"font-medium truncate",children:a})]}),(0,s.jsxs)("span",{className:"font-mono font-bold",children:[l.toFixed(0),"%"]})]}),(0,s.jsx)(eE,{value:l,className:"h-1.5",indicatorClassName:r})]})};function eI(e){let{fixtureId:a,homeTeam:t,awayTeam:r,reversed:i=!1}=e,[n,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{let e=!0;return d(!0),fetch("/api/football/odds?fixture=".concat(a,"&bookmaker=8")).then(async a=>{var t,s;if(!e)return;if(!a.ok)throw Error("Failed to fetch odds data");let l=null==(t=(await a.json()).response)?void 0:t[0],r=null==l||null==(s=l.bookmakers)?void 0:s.find(e=>8===e.id),i=null==r?void 0:r.bets.find(e=>1===e.id);if(i){let e={};i.values.forEach(a=>{e[a.value.toLowerCase().replace(" ","")]=parseFloat(a.odd)}),o({home:e.home,draw:e.draw,away:e.away})}else o(null)}).catch(a=>{e&&o(null)}).finally(()=>{e&&d(!1)}),()=>{e=!1}},[a]),c)return(0,s.jsxs)("div",{className:"space-y-2 p-2",children:[(0,s.jsx)(eA,{className:"h-4 w-full"}),(0,s.jsx)(eA,{className:"h-4 w-full"}),(0,s.jsx)(eA,{className:"h-4 w-full"})]});if(!n)return null;let m=1/n.home*100,u=1/n.draw*100,p=1/n.away*100,x=m+u+p,h=(0,s.jsx)(eT,{label:t.name,logo:t.logo,percentage:m/x*100,barColor:"bg-primary"}),f=(0,s.jsx)(eT,{label:r.name,logo:r.logo,percentage:p/x*100,barColor:"bg-accent"}),g=(0,s.jsx)(eT,{label:"تعادل",percentage:u/x*100,barColor:"bg-muted-foreground"});return(0,s.jsx)("div",{className:"space-y-2 rounded-md border bg-background/50 p-2",children:i?(0,s.jsxs)(s.Fragment,{children:[f,g,h]}):(0,s.jsxs)(s.Fragment,{children:[h,g,f]})})}let eP=l.memo(e=>{let{fixture:a,navigate:t,customStatus:l,isPinnedForPrediction:r,onPinToggle:i,isAdmin:n,showOdds:o}=e,c=e=>{var a;let{team:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-0.5 flex-1 justify-end truncate",children:[(0,s.jsxs)(f,{className:"h-7 w-7 flex-shrink-0",children:[(0,s.jsx)(g,{src:t.logo,alt:t.name}),(0,s.jsx)(j,{children:(null==(a=t.name)?void 0:a.charAt(0))||""})]}),(0,s.jsx)("span",{className:"font-semibold text-xs truncate text-center w-full",children:t.name})]})};return(0,s.jsxs)("div",{className:"relative rounded-lg bg-card border text-sm transition-all duration-300 flex flex-col justify-between",children:[n&&i&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute top-0.5 right-0.5 h-7 w-7 z-10",onClick:e=>{e.stopPropagation(),i(a)},children:(0,s.jsx)(W.A,{className:(0,u.cn)("h-4 w-4 text-muted-foreground",r&&"text-yellow-400 fill-current")})}),(0,s.jsx)("div",{className:"flex-1 p-2 cursor-pointer",onClick:()=>t("MatchDetails",{fixtureId:a.fixture.id}),children:(0,s.jsxs)("main",{dir:"rtl",className:"flex items-start justify-between gap-1",children:[(0,s.jsx)(c,{team:a.teams.home}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-w-[70px] pt-1 text-center",children:(0,s.jsx)(eC,{fixture:a,customStatus:l})}),(0,s.jsx)(c,{team:a.teams.away})]})}),o&&(0,s.jsx)("div",{className:"px-2 pb-2",children:(0,s.jsx)(eI,{fixtureId:a.fixture.id,homeTeam:a.teams.home,awayTeam:a.teams.away})})]},a.fixture.id)});eP.displayName="FixtureItem";var eM=t(7655);let eR=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(eM.bL,{ref:a,className:(0,u.cn)("relative overflow-hidden",t),...r,children:[(0,s.jsx)(eM.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,s.jsx)(eB,{}),(0,s.jsx)(eM.OK,{})]})});eR.displayName=eM.bL.displayName;let eB=l.forwardRef((e,a)=>{let{className:t,orientation:l="vertical",...r}=e;return(0,s.jsx)(eM.VM,{ref:a,orientation:l,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:(0,s.jsx)(eM.lr,{className:"relative flex-1 rounded-full bg-border"})})});eB.displayName=eM.VM.displayName;let eD=new Set(eu.slice(0,15).map(e=>e.id)),eF=l.memo(e=>{let{favoriteTeamMatches:a,otherFixtures:t}=(0,l.useMemo)(()=>{let a=[],t=[];return e.hasAnyFavorites?e.fixtures.forEach(s=>{e.favoritedTeamIds.includes(s.teams.home.id)||e.favoritedTeamIds.includes(s.teams.away.id)?a.push(s):e.favoritedLeagueIds.includes(s.league.id)&&t.push(s)}):t=e.fixtures,{favoriteTeamMatches:a,otherFixtures:t}},[e.fixtures,e.favoritedTeamIds,e.favoritedLeagueIds,e.hasAnyFavorites]),r=(0,l.useMemo)(()=>t.reduce((e,a)=>{let t=a.league.name;return e[t]||(e[t]={league:a.league,fixtures:[]}),e[t].fixtures.push(a),e},{}),[t]);if(e.loading)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin text-primary"})});if(!e.hasAnyFavorites)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-muted-foreground h-64 p-4",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"لم تقم بإضافة أي مفضلات"}),(0,s.jsx)("p",{className:"text-sm",children:"أضف فرقًا أو بطولات لترى مبارياتها هنا."}),(0,s.jsx)(B.$,{className:"mt-4",onClick:()=>e.navigate("AllCompetitions"),children:"استكشف البطولات"})]});if(0===e.fixtures.length)return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center text-center text-muted-foreground h-64 p-4",children:(0,s.jsx)("p",{children:"لا توجد مباريات لمفضلاتك هذا اليوم."})});let i=Object.keys(r).sort((e,a)=>e.localeCompare(a));return(0,s.jsxs)("div",{className:"space-y-4",children:[a.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold text-foreground py-1 px-3 rounded-md bg-card border flex items-center gap-2 text-xs h-6",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 text-yellow-400"}),(0,s.jsx)("span",{className:"truncate",children:"مباريات فرقك المفضلة"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 pt-1",children:a.map(a=>(0,s.jsx)(eP,{fixture:a,navigate:e.navigate,isPinnedForPrediction:e.pinnedPredictionMatches.has(a.fixture.id),onPinToggle:e.onPinToggle,isAdmin:e.isAdmin,showOdds:e.showOdds},a.fixture.id))})]}),i.map(a=>{let{league:t,fixtures:l}=r[a];return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold text-foreground py-1 px-3 rounded-md bg-card border flex items-center gap-2 text-xs h-6 cursor-pointer",onClick:()=>e.navigate("CompetitionDetails",{leagueId:t.id,title:t.name,logo:t.logo}),children:[(0,s.jsx)(f,{className:"h-4 w-4",children:(0,s.jsx)(g,{src:t.logo,alt:t.name})}),(0,s.jsx)("span",{className:"truncate",children:t.name})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 pt-1",children:l.map(a=>(0,s.jsx)(eP,{fixture:a,navigate:e.navigate,isPinnedForPrediction:e.pinnedPredictionMatches.has(a.fixture.id),onPinToggle:e.onPinToggle,isAdmin:e.isAdmin,showOdds:e.showOdds},a.fixture.id))})]},"".concat(t.id,"-").concat(t.name))})]})});eF.displayName="FixturesList";let ez=e=>(0,N.GP)(e,"yyyy-MM-dd"),eG=e=>(0,b.c)(e)?"اليوم":(0,v.P)(e)?"الأمس":(0,y.e)(e)?"غداً":(0,N.GP)(e,"EEE",{locale:C.ar}),eL=e=>{let{selectedDateKey:a,onDateSelect:t}=e,r=(0,l.useMemo)(()=>{let e=new Date,a=[];for(let t=-365;t<=365;t++)a.push((0,w.f)(e,t));return a},[]),i=(0,l.useRef)(null),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=i.current,a=n.current;if(e&&a){let t=e.getBoundingClientRect(),s=a.getBoundingClientRect(),l=s.left-t.left-t.width/2+s.width/2;e.scrollTo({left:e.scrollLeft+l,behavior:"smooth"})}},[a]),(0,s.jsxs)("div",{className:"relative bg-card py-2 border-x border-b rounded-b-lg shadow-md flex items-center justify-center",children:[(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8 z-10",onClick:()=>t(ez((0,k.e)(new Date(a),1))),children:(0,s.jsx)(T.A,{className:"h-5 w-5"})}),(0,s.jsxs)(eR,{ref:i,className:"w-full whitespace-nowrap mx-1",children:[(0,s.jsx)("div",{className:"flex flex-row-reverse justify-start",children:r.map(e=>{let l=ez(e),r=l===a;return(0,s.jsxs)("button",{ref:r?n:null,className:(0,u.cn)("relative flex flex-col items-center justify-center h-auto py-1 px-2 min-w-[40px] rounded-lg transition-colors ml-2","text-foreground/80 hover:text-primary",r&&"text-primary"),onClick:()=>t(l),"data-state":r?"active":"inactive",children:[(0,s.jsx)("span",{className:"text-[10px] font-normal",children:eG(e)}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:(0,N.GP)(e,"d")}),r&&(0,s.jsx)("span",{className:"absolute bottom-0 h-0.5 w-3 rounded-full bg-primary transition-transform"})]},l)})}),(0,s.jsx)(eB,{orientation:"horizontal",className:"h-0"})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8 z-10",onClick:()=>t(ez((0,w.f)(new Date(a),1))),children:(0,s.jsx)(I.A,{className:"h-5 w-5"})})]})};var e$=t(8046),eO=t(1721),e_=t(286),eH=t(704);let eZ=eH.bL,eJ=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eH.B8,{ref:a,className:(0,u.cn)("inline-flex h-auto items-center justify-center rounded-none border-b bg-transparent p-0",t),...l})});eJ.displayName=eH.B8.displayName;let eU=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(eH.l9,{ref:a,className:(0,u.cn)("relative group inline-flex items-center justify-center whitespace-nowrap px-3 py-3 text-sm font-medium text-muted-foreground ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-primary data-[state=active]:font-bold",t),...l,children:[l.children,(0,s.jsx)("span",{className:"absolute bottom-0 left-0 h-0.5 w-full scale-x-0 rounded-full bg-primary transition-transform duration-300 ease-out group-data-[state=active]:scale-x-100"})]})});eU.displayName=eH.l9.displayName;let eq=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eH.UC,{ref:a,className:(0,u.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});eq.displayName=eH.UC.displayName;var eW=t(7554);function eV(e){let{isOpen:a,onOpenChange:t}=e,[r,i]=(0,l.useState)(""),[n,o]=(0,l.useState)(!1),{db:c}=(0,A.jt)(),{toast:d}=(0,ed.dj)(),m=async()=>{if(!r.trim()||!c)return void d({variant:"destructive",title:"خطأ",description:"يرجى إدخال معرف البطولة."});o(!0);try{let e=await fetch("/api/football/leagues?id=".concat(r));if(!e.ok)throw Error("Failed to fetch from API");let a=await e.json();if(a.response&&a.response.length>0){let{league:e,country:s}=a.response[0],l={leagueId:e.id,name:e.name,logo:e.logo,countryName:s.name,countryFlag:s.flag},r=(0,S.H9)(c,"managedCompetitions",String(e.id));await (0,S.BN)(r,l),d({title:"نجاح",description:'تمت إضافة بطولة "'.concat(e.name,'" بنجاح.')}),t(!1),i("")}else d({variant:"destructive",title:"خطأ",description:"لم يتم العثور على بطولة بهذا المعرف."})}catch(a){console.error("Error adding competition:",a);let e=new M.$({path:"managedCompetitions/".concat(r),operation:"create",requestResourceData:{leagueId:r}});R.d.emit("permission-error",e),d({variant:"destructive",title:"حدث خطأ",description:"فشل في جلب بيانات البطولة من المصدر أو حفظها."})}finally{o(!1)}};return(0,s.jsx)(K,{open:a,onOpenChange:t,children:(0,s.jsxs)(ee,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{children:"إضافة بطولة جديدة"}),(0,s.jsx)(el,{children:"أدخل معرّف البطولة (League ID) من API-Football لإضافتها إلى القائمة المُدارة."})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,s.jsx)(en,{htmlFor:"leagueId",children:"معرف البطولة"}),(0,s.jsx)(U,{id:"leagueId",type:"number",value:r,onChange:e=>i(e.target.value),placeholder:"e.g., 39"})]})}),(0,s.jsxs)(et,{children:[(0,s.jsx)(Q,{asChild:!0,children:(0,s.jsx)(B.$,{type:"button",variant:"secondary",children:"إلغاء"})}),(0,s.jsx)(B.$,{type:"submit",onClick:m,disabled:n,children:n?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"إضافة"})]})]})})}var eK=t(7250),eY=t(9556);let eQ=eK.bL,eX=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(eK.q7,{ref:a,className:(0,u.cn)("border-b",t),...l})});eX.displayName="AccordionItem";let e0=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsx)(eK.Y9,{className:"flex",children:(0,s.jsxs)(eK.l9,{ref:a,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[l,!r.asChild&&(0,s.jsx)(eY.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});e0.displayName=eK.l9.displayName;let e1=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsx)(eK.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,s.jsx)("div",{className:(0,u.cn)("pb-4 pt-0",t),children:l})})});function e2(e){let{league:a,isFavorited:t,onFavoriteToggle:l,onClick:r,isAdmin:i,onRename:n}=e;return(0,s.jsxs)("li",{className:"flex w-full items-center justify-between p-3 h-12 hover:bg-accent/80 transition-colors rounded-md bg-card border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:r,children:[(0,s.jsx)(f,{className:"h-6 w-6 p-0.5",children:(0,s.jsx)(g,{src:a.logo,alt:a.name,className:"object-contain"})}),(0,s.jsx)("span",{className:"text-sm truncate font-bold",children:a.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[i&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),n()},children:(0,s.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground/80"})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),l()},children:(0,s.jsx)(c.A,{className:(0,u.cn)("h-5 w-5 text-muted-foreground/50",t&&"text-yellow-400 fill-current")})})]})]})}e1.displayName=eK.UC.displayName;let e4={World:"World",England:"Europe",Spain:"Europe",Germany:"Europe",Italy:"Europe",France:"Europe",Netherlands:"Europe",Portugal:"Europe",Belgium:"Europe",Russia:"Europe",Turkey:"Europe",Greece:"Europe",Switzerland:"Europe",Austria:"Europe",Denmark:"Europe",Scotland:"Europe",Sweden:"Europe",Norway:"Europe",Poland:"Europe",Ukraine:"Europe","Czech-Republic":"Europe",Croatia:"Europe",Romania:"Europe",Serbia:"Europe",Hungary:"Europe",Finland:"Europe",Ireland:"Europe","Northern-Ireland":"Europe",Wales:"Europe",Iceland:"Europe",Albania:"Europe",Georgia:"Europe",Latvia:"Europe",Estonia:"Europe",Lithuania:"Europe",Luxembourg:"Europe","Faroe-Islands":"Europe",Malta:"Europe",Andorra:"Europe","San-Marino":"Europe",Gibraltar:"Europe",Kosovo:"Europe","Bosnia-and-Herzegovina":"Europe",Slovakia:"Europe",Slovenia:"Europe",Bulgaria:"Europe",Cyprus:"Europe",Azerbaijan:"Europe",Armenia:"Europe",Belarus:"Europe",Moldova:"Europe","North-Macedonia":"Europe",Montenegro:"Europe","Saudi Arabia":"Asia",Japan:"Asia","South Korea":"Asia",China:"Asia",Qatar:"Asia","United Arab Emirates":"Asia",Iran:"Asia",Iraq:"Asia",Uzbekistan:"Asia",Australia:"Asia",Jordan:"Asia",Syria:"Asia",Lebanon:"Asia",Oman:"Asia",Kuwait:"Asia",Bahrain:"Asia",India:"Asia",Thailand:"Asia",Vietnam:"Asia",Malaysia:"Asia",Indonesia:"Asia",Singapore:"Asia",Philippines:"Asia","Hong Kong":"Asia",Palestine:"Asia",Tajikistan:"Asia",Turkmenistan:"Asia",Kyrgyzstan:"Asia",Bangladesh:"Asia",Maldives:"Asia",Cambodia:"Asia",Myanmar:"Asia",Yemen:"Asia",Egypt:"Africa",Morocco:"Africa",Tunisia:"Africa",Algeria:"Africa",Nigeria:"Africa",Senegal:"Africa",Ghana:"Africa","Ivory Coast":"Africa",Cameroon:"Africa","South Africa":"Africa","DR Congo":"Africa",Mali:"Africa","Burkina Faso":"Africa",Guinea:"Africa",Zambia:"Africa","Cape Verde":"Africa",Uganda:"Africa",Kenya:"Africa",Tanzania:"Africa",Sudan:"Africa",Libya:"Africa",Angola:"Africa",Zimbabwe:"Africa",Ethiopia:"Africa",USA:"North America",Mexico:"North America",Canada:"North America","Costa Rica":"North America",Honduras:"North America",Panama:"North America",Jamaica:"North America","El Salvador":"North America","Trinidad and Tobago":"North America",Guatemala:"North America",Nicaragua:"North America",Cuba:"North America",Brazil:"South America",Argentina:"South America",Colombia:"South America",Chile:"South America",Uruguay:"South America",Peru:"South America",Ecuador:"South America",Paraguay:"South America",Venezuela:"South America",Bolivia:"South America","New Zealand":"Oceania",Fiji:"Oceania"},e5=["World","Europe","Asia","Africa","South America","North America","Oceania","Other"],e3=["world","uefa","champions league","europa","copa libertadores","copa sudamericana","caf champions","afc champions","conmebol","concacaf","arab","club world cup","nations league"],e6=["England","Spain","Germany","Italy","France","Netherlands","Portugal","Saudi Arabia","Iraq","Japan","Australia","Brazil","Argentina","Egypt","Morocco","Tunisia","Algeria","Qatar","United Arab Emirates","Jordan","Syria","Lebanon","Oman","Kuwait","Bahrain","Sudan","Libya","Yemen"],e8=[6,28,5,4,7,2,8,9,10,12,13,27,21,769,768,775,25,24,22,17,15,19,20,29,31,23],e9=e=>{let a=e.toLowerCase();return a.includes("world cup")?1:a.includes("champions league")?2:a.includes("euro")||a.includes("copa america")||a.includes("afc asian cup")||a.includes("africa cup of nations")?3:a.includes("europa league")||a.includes("afc cup")||a.includes("conference league")?4:a.includes("nations league")||a.includes("club world cup")?5:a.includes("friendly")?99:a.includes("premier league")||a.includes("la liga")||a.includes("serie a")||a.includes("bundesliga")||a.includes("ligue 1")||a.includes("stars league")?10:a.includes("cup")||a.includes("copa")||a.includes("kfp")||a.includes("king's cup")?11:a.includes("championship")||a.includes("segunda")||a.includes("serie b")||a.includes("division 2")?12:50};var e7=t(6695),ae=t(6766),aa=t(7223),at=t(8763),as=t(4403),al=t(2278);let ar=al.bL,ai=al.l9,an=al.ZL,ao=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(al.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:a})});ao.displayName=al.hJ.displayName;let ac=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsxs)(an,{children:[(0,s.jsx)(ao,{}),(0,s.jsx)(al.UC,{ref:a,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});ac.displayName=al.UC.displayName;let ad=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};ad.displayName="AlertDialogHeader";let am=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};am.displayName="AlertDialogFooter";let au=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(al.hE,{ref:a,className:(0,u.cn)("text-lg font-semibold",t),...l})});au.displayName=al.hE.displayName;let ap=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(al.VY,{ref:a,className:(0,u.cn)("text-sm text-muted-foreground",t),...l})});ap.displayName=al.VY.displayName;let ax=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(al.rc,{ref:a,className:(0,u.cn)((0,B.r)(),t),...l})});ax.displayName=al.rc.displayName;let ah=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(al.ZD,{ref:a,className:(0,u.cn)((0,B.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});ah.displayName=al.ZD.displayName;var af=t(8271),ag=t(5178),aj=t(5300),aN=t(3349),ab=t(3004);let av=async(e,a)=>{let t=(0,S.H9)(a,"users",e.uid),s=(0,S.H9)(a,"users",e.uid,"favorites","data"),l=ef(),r=Object.keys(l.teams||{}).length>0||Object.keys(l.leagues||{}).length>0;try{if((await (0,S.x7)(t)).exists()){r&&(await (0,S.BN)(s,l,{merge:!0}),ej());return}let i=(0,S.wP)(a),n=e.displayName||"مستخدم_".concat(e.uid.substring(0,5)),o=e.photoURL||"",c={displayName:n,email:e.email||"N/A",photoURL:o,isProUser:!1,onboardingComplete:r};i.set(t,c);let d={userId:e.uid};r&&Object.assign(d,l),i.set(s,d),await i.commit(),r&&ej()}catch(t){let a=new M.$({path:"users/".concat(e.uid),operation:"write",requestResourceData:{profile:{displayName:e.displayName,email:e.email},favorites:l}});R.d.emit("permission-error",a),console.error("Failed to create new user documents:",t)}},ay=()=>{if(localStorage.getItem(eh))return localStorage.removeItem(eh),window.location.reload(),Promise.resolve();let e=(0,ab.xI)();return(0,ab.CI)(e)},aw=async(e,a,t)=>{if(!e)throw Error("User not authenticated.");if(!t)throw console.error("Firestore not available for updateUserDisplayName"),Error("Database service is not available.");await (0,ab.r7)(e,{displayName:a});let s=(0,S.H9)(t,"users",e.uid),l={displayName:a};(0,S.mZ)(s,l).catch(e=>{let a=new M.$({path:s.path,operation:"update",requestResourceData:l});R.d.emit("permission-error",a)})},ak=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,u.cn)("w-full caption-bottom text-sm",t),...l})})});ak.displayName="Table";let aC=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("thead",{ref:a,className:(0,u.cn)("[&_tr]:border-b",t),...l})});aC.displayName="TableHeader";let aA=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,u.cn)("[&_tr:last-child]:border-0",t),...l})});aA.displayName="TableBody",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let aS=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("tr",{ref:a,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});aS.displayName="TableRow";let aE=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("th",{ref:a,className:(0,u.cn)("h-12 px-2 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});aE.displayName="TableHead";let aT=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("td",{ref:a,className:(0,u.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});aT.displayName="TableCell",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("caption",{ref:a,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption";let aI=new Date().getFullYear();new Date().getFullYear();var aP=t(3433),aM=t(7381),aR=t(518);let aB=aP.bL;aP.YJ;let aD=aP.WT,aF=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(aP.l9,{ref:a,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[l,(0,s.jsx)(aP.In,{asChild:!0,children:(0,s.jsx)(eY.A,{className:"h-4 w-4 opacity-50"})})]})});aF.displayName=aP.l9.displayName;let az=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(aP.PP,{ref:a,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(aM.A,{className:"h-4 w-4"})})});az.displayName=aP.PP.displayName;let aG=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(aP.wn,{ref:a,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,s.jsx)(eY.A,{className:"h-4 w-4"})})});aG.displayName=aP.wn.displayName;let aL=l.forwardRef((e,a)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,s.jsx)(aP.ZL,{children:(0,s.jsxs)(aP.UC,{ref:a,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(az,{}),(0,s.jsx)(aP.LM,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(aG,{})]})})});aL.displayName=aP.UC.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(aP.JU,{ref:a,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=aP.JU.displayName;let a$=l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(aP.q7,{ref:a,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(aP.VF,{children:(0,s.jsx)(aR.A,{className:"h-4 w-4"})})}),(0,s.jsx)(aP.p4,{children:l})]})});function aO(e){let{season:a,onSeasonChange:t}=e,l=Array.from({length:10},(e,a)=>new Date().getFullYear()+3-a);return(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 px-4 pt-2 pb-1 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:"عرض بيانات موسم"}),(0,s.jsxs)(aB,{value:String(a),onValueChange:e=>t(Number(e)),children:[(0,s.jsx)(aF,{className:"w-[100px] h-7 text-xs",children:(0,s.jsx)(aD,{placeholder:"اختر موسماً"})}),(0,s.jsx)(aL,{children:l.map(e=>(0,s.jsx)(a$,{value:String(e),children:e},e))})]})]})}a$.displayName=aP.q7.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(aP.wv,{ref:a,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=aP.wv.displayName;let a_=e=>{var a;let{league:t,countryName:l,teamsCount:r}=e;return(0,s.jsxs)(e7.Zp,{className:"mb-4 overflow-hidden",children:[(0,s.jsx)("div",{className:"relative h-24 bg-gradient-to-r from-primary/20 to-accent/20",children:(0,s.jsxs)(f,{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 h-24 w-24 border-4 border-background p-2 bg-background",children:[(0,s.jsx)(g,{src:t.logo,alt:t.name,className:"object-contain"}),(0,s.jsx)(j,{children:null==(a=t.name)?void 0:a.charAt(0)})]})}),(0,s.jsxs)(e7.Wu,{className:"pt-14 text-center",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:t.name}),(0,s.jsx)("p",{className:"text-muted-foreground",children:l})]})]})};var aH=t(6030),aZ=t(2401);let aJ=e=>{let{team:a,venue:t,isAdmin:l,onRename:r}=e;return(0,s.jsxs)(e7.Zp,{className:"mb-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative h-24 bg-gradient-to-r from-primary/20 to-accent/20",style:{backgroundImage:"url(".concat(null==t?void 0:t.image,")"),backgroundSize:"cover",backgroundPosition:"center"},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50"}),(0,s.jsx)("div",{className:"absolute top-2 left-2 flex items-center gap-1 z-10",children:l&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-black/20 hover:bg-black/40",onClick:r,children:(0,s.jsx)(q.A,{className:"h-4 w-4 text-white/80"})})})]}),(0,s.jsxs)(e7.Wu,{className:"pt-2 pb-4 text-center relative flex flex-col items-center",children:[(0,s.jsx)("div",{className:"relative -mt-12 mb-2",children:(0,s.jsxs)(f,{className:"h-20 w-20 border-4 border-background",children:[(0,s.jsx)(g,{src:a.logo,alt:a.name}),(0,s.jsx)(j,{children:a.name.charAt(0)})]})}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:a.name}),(0,s.jsx)("p",{className:"text-muted-foreground",children:null==t?void 0:t.name})]})]})},aU=e=>{let{teamId:a,navigate:t,customNames:i,onCustomNameChange:n}=e,[o,c]=(0,l.useState)([]),[d,m]=(0,l.useState)(!0),{isAdmin:u}=(0,r.useAdmin)(),{toast:p}=(0,ed.dj)(),{db:x}=(0,r.useFirestore)(),[h,N]=(0,l.useState)(null),b=(0,l.useCallback)((e,a)=>{if(!i)return a;let t=null==i?void 0:i.players.get(e);return t||ep.players[e]||a},[i]);(0,l.useEffect)(()=>{(async()=>{m(!0);try{let e=await fetch("/api/football/players?team=".concat(a,"&season=").concat(aI)),t=await e.json();if(t.response){let e=t.response.map(e=>e.player);c(e)}}catch(e){p({variant:"destructive",title:"خطأ",description:"فشل في جلب قائمة اللاعبين."})}finally{m(!1)}})()},[a,p]);let v=(e,a,t)=>{if(!h||!x||!u)return;let s=(0,S.H9)(x,"playerCustomizations",String(a)),l=h.originalName;(t&&t.trim()&&t.trim()!==l?(0,S.BN)(s,{customName:t}):(0,S.kd)(s)).then(()=>{p({title:"نجاح",description:"تم تحديث اسم اللاعب."}),n()}).catch(e=>{let a=new M.$({path:s.path,operation:t&&t.trim()!==l?"create":"delete",requestResourceData:{customName:t}});R.d.emit("permission-error",a)}),N(null)};return d?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):(0,s.jsxs)("div",{className:"space-y-2",children:[h&&(0,s.jsx)(ec,{isOpen:!!h,onOpenChange:e=>!e&&N(null),item:{...h,type:"player",purpose:"rename"},onSave:(e,a,t)=>v(e,Number(a),t)}),o.map(e=>{var a;return(null==e?void 0:e.id)?(0,s.jsx)(e7.Zp,{className:"p-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3 cursor-pointer",onClick:()=>t("PlayerDetails",{playerId:e.id}),children:[(0,s.jsxs)(f,{className:"h-10 w-10",children:[(0,s.jsx)(g,{src:e.photo}),(0,s.jsx)(j,{children:null==(a=e.name)?void 0:a.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:b(e.id,e.name)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.position})]})]}),e.number&&(0,s.jsxs)("div",{className:"relative flex items-center justify-center text-primary-foreground",children:[(0,s.jsx)(aH.A,{className:"h-10 w-10 text-primary bg-primary p-1 rounded-md"}),(0,s.jsx)("span",{className:"absolute text-xs font-bold",children:e.number})]}),u&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:()=>N({id:e.id,name:b(e.id,e.name),originalName:e.name}),children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})]})},e.id):null})]})},aq=e=>{var a,t,r,i,n,o,c,d,m,p,x;let{teamId:h,leagueId:j,navigate:b,onPinToggle:v,pinnedPredictionMatches:y,isAdmin:w,customNames:k}=e,[A,S]=(0,l.useState)([]),[T,I]=(0,l.useState)([]),[P,M]=(0,l.useState)(null),[R,B]=(0,l.useState)(!0),D=(0,l.useRef)(null),F=(0,l.useRef)({}),z=(0,l.useCallback)((e,a,t)=>{if(!k)return t;let s="".concat(e,"s"),l=k[s],r=null==l?void 0:l.get(a);if(r)return r;let i=ep[s][a];return i||t},[k]);(0,l.useEffect)(()=>{let e=!0;return(async()=>{if(h){B(!0);try{var a,t,s,l,r;let[i,n]=await Promise.all([fetch("/api/football/fixtures?team=".concat(h,"&season=").concat(aI)),fetch("/api/football/teams/statistics?team=".concat(h,"&season=").concat(aI).concat(j?"&league=".concat(j):""))]);if(!e)return;if(!i.ok||!n.ok)throw Error("API call failed");let o=await i.json(),c=await n.json();if(!e)return;let d=(o.response||[]).sort((e,a)=>e.fixture.timestamp-a.fixture.timestamp),m=c.response||null;S(d),M(m);let u=j||(null==m||null==(a=m.league)?void 0:a.id);if(u){let a=await fetch("/api/football/standings?league=".concat(u,"&season=").concat(aI));if(!a.ok)throw Error("Standings API call failed");let i=await a.json();e&&I((null==(r=i.response)||null==(l=r[0])||null==(s=l.league)||null==(t=s.standings)?void 0:t[0])||[])}else e&&I([])}catch(e){console.error("Error fetching team details tabs:",e)}finally{e&&B(!1)}}})(),()=>{e=!1}},[h,j]);let G=(0,l.useMemo)(()=>A.map(e=>({...e,league:{...e.league,name:z("league",e.league.id,e.league.name)},teams:{home:{...e.teams.home,name:z("team",e.teams.home.id,e.teams.home.name)},away:{...e.teams.away,name:z("team",e.teams.away.id,e.teams.away.name)}}})).reduce((e,a)=>{let t=(0,N.GP)(new Date(1e3*a.fixture.timestamp),"yyyy-MM-dd");return e[t]||(e[t]=[]),e[t].push(a),e},{}),[A,z]);(0,l.useEffect)(()=>{let e;if(R||0===Object.keys(G).length||!D.current)return;let a=Object.keys(G).sort(),t=(0,aZ.R)();if(!(e=a.find(e=>new Date(e)>=t))&&a.length>0){let s=a[a.length-1];new Date(s)<t&&(e=s)}e&&F.current[e]&&setTimeout(()=>{let a=F.current[e];if(a&&D.current){let e=D.current.offsetTop,t=a.offsetTop;D.current.scrollTop=t-e}},100)},[R,G]);let L=(0,l.useMemo)(()=>T?T.map(e=>({...e,team:{...e.team,name:z("team",e.team.id,e.team.name)}})):[],[T,z]);if(R||null===k)return(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})});let $=Object.keys(G).sort();return(0,s.jsxs)(eZ,{defaultValue:"matches",className:"w-full",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(eU,{value:"matches",children:"المباريات"}),(0,s.jsx)(eU,{value:"standings",children:"الترتيب"}),(0,s.jsx)(eU,{value:"stats",children:"الإحصائيات"})]}),(0,s.jsx)(eq,{value:"matches",className:"mt-4",children:(0,s.jsx)("div",{ref:D,className:"max-h-[60vh] overflow-y-auto space-y-4",children:$.length>0?$.map(e=>(0,s.jsxs)("div",{ref:a=>F.current[e]=a,children:[(0,s.jsx)("h3",{className:"font-bold text-center text-sm text-muted-foreground my-2",children:(0,N.GP)(new Date(e),"EEEE, d MMMM yyyy",{locale:C.ar})}),(0,s.jsx)("div",{className:"space-y-2",children:G[e].map(e=>(0,s.jsx)(eP,{fixture:e,navigate:b,isPinnedForPrediction:y.has(e.fixture.id),onPinToggle:v,isAdmin:w},e.fixture.id))})]},e)):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"لا توجد مباريات متاحة."})})}),(0,s.jsx)(eq,{value:"standings",className:"mt-4",children:L.length>0?(0,s.jsxs)(ak,{children:[(0,s.jsx)(aC,{children:(0,s.jsxs)(aS,{children:[(0,s.jsx)(aE,{className:"text-center font-bold",children:"نقاط"}),(0,s.jsx)(aE,{className:"text-center",children:"خ"}),(0,s.jsx)(aE,{className:"text-center",children:"ت"}),(0,s.jsx)(aE,{className:"text-center",children:"ف"}),(0,s.jsx)(aE,{className:"text-center",children:"لعب"}),(0,s.jsx)(aE,{children:"الفريق"}),(0,s.jsx)(aE,{className:"w-[40px] text-right px-2",children:"#"})]})}),(0,s.jsx)(aA,{children:L.map(e=>{var a;return(null==(a=e.team)?void 0:a.id)?(0,s.jsxs)(aS,{className:(0,u.cn)(e.team.id===h&&"bg-primary/10"),children:[(0,s.jsx)(aT,{className:"text-center font-bold",children:e.points}),(0,s.jsx)(aT,{className:"text-center",children:e.all.lose}),(0,s.jsx)(aT,{className:"text-center",children:e.all.draw}),(0,s.jsx)(aT,{className:"text-center",children:e.all.win}),(0,s.jsx)(aT,{className:"text-center",children:e.all.played}),(0,s.jsx)(aT,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("p",{className:"font-semibold truncate",children:e.team.name}),(0,s.jsx)(f,{className:"h-6 w-6",children:(0,s.jsx)(g,{src:e.team.logo})})]})}),(0,s.jsx)(aT,{className:"font-bold px-2",children:e.rank})]},e.team.id):null})})]}):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"الترتيب غير متاح لهذه البطولة."})}),(0,s.jsx)(eq,{value:"stats",className:"mt-4",children:P&&P.league?(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsxs)(e7.ZB,{children:["إحصائيات موسم ",P.league.season||aI]})}),(0,s.jsx)(e7.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"p-4 bg-card-foreground/5 rounded-lg",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:(null==(t=P.fixtures)||null==(a=t.played)?void 0:a.total)||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"مباريات"})]}),(0,s.jsxs)("div",{className:"p-4 bg-card-foreground/5 rounded-lg",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:(null==(i=P.fixtures)||null==(r=i.wins)?void 0:r.total)||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"فوز"})]}),(0,s.jsxs)("div",{className:"p-4 bg-card-foreground/5 rounded-lg",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:(null==(o=P.fixtures)||null==(n=o.draws)?void 0:n.total)||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"تعادل"})]}),(0,s.jsxs)("div",{className:"p-4 bg-card-foreground/5 rounded-lg",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:(null==(d=P.fixtures)||null==(c=d.loses)?void 0:c.total)||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"خسارة"})]}),(0,s.jsxs)("div",{className:"p-4 bg-card-foreground/5 rounded-lg col-span-2",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:(null==(x=P.goals)||null==(p=x.for)||null==(m=p.total)?void 0:m.total)||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"أهداف"})]})]})})]}):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"الإحصائيات غير متاحة."})})]})};var aW=t(7489);let aV=l.forwardRef((e,a)=>{let{className:t,orientation:l="horizontal",decorative:r=!0,...i}=e;return(0,s.jsx)(aW.b,{ref:a,decorative:r,orientation:l,className:(0,u.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...i})});aV.displayName=aW.b.displayName;let aK=e=>{let{player:a}=e;return(0,s.jsxs)(e7.Zp,{className:"mb-4 overflow-hidden",children:[(0,s.jsx)("div",{className:"relative h-24 bg-gradient-to-r from-primary/20 to-accent/20",children:(0,s.jsxs)(f,{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 h-24 w-24 border-4 border-background",children:[(0,s.jsx)(g,{src:a.photo,alt:a.name}),(0,s.jsx)(j,{children:a.name.charAt(0)})]})}),(0,s.jsxs)(e7.Wu,{className:"pt-16 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:a.name}),(0,s.jsx)("p",{className:"text-muted-foreground",children:a.nationality}),(0,s.jsxs)("div",{className:"mt-4 flex justify-center gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:a.age||"-"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"العمر"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:a.height||"-"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"الطول"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:a.weight||"-"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"الوزن"})]})]})]})]})},aY=e=>{let{statistics:a,navigate:t}=e;if(0===a.length)return(0,s.jsx)(e7.Zp,{children:(0,s.jsx)(e7.Wu,{className:"p-4 text-center text-muted-foreground",children:"لا توجد إحصائيات متاحة لهذا الموسم."})});let l=a[0];return(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsxs)(e7.ZB,{className:"text-lg",children:["الأداء هذا الموسم (",l.league.season,")"]})}),(0,s.jsxs)(e7.Wu,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6 p-3 rounded-lg bg-card-foreground/5 cursor-pointer",onClick:()=>t("CompetitionDetails",{leagueId:l.league.id}),children:[(0,s.jsx)(f,{className:"h-12 w-12",children:(0,s.jsx)(g,{src:l.team.logo})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:l.team.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:l.league.name})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.games.appearences||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"مباريات"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.goals.total||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"أهداف"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.goals.assists||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"صناعة"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.cards.yellow||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"بطاقات صفراء"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.cards.red+l.cards.yellowred||0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"بطاقات حمراء"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:l.games.rating?parseFloat(l.games.rating).toFixed(1):"-"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"تقييم"})]})]})]})]})},aQ=e=>{let{transfers:a,navigate:t}=e,r=l.useMemo(()=>{if(!a||0===a.length)return[];let e=new Map;return a.forEach(a=>{var t,s;(null==(t=a.teams)?void 0:t.in)&&e.set(a.teams.in.id,a.teams.in),(null==(s=a.teams)?void 0:s.out)&&e.set(a.teams.out.id,a.teams.out)}),Array.from(e.values()).reverse()},[a]);return 0===r.length?null:(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{className:"text-lg",children:"مسيرة اللاعب"})}),(0,s.jsx)(e7.Wu,{className:"space-y-2",children:r.map((e,a)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-accent cursor-pointer",onClick:()=>t("TeamDetails",{teamId:e.id}),children:[(0,s.jsx)(f,{children:(0,s.jsx)(g,{src:e.logo,alt:e.name})}),(0,s.jsx)("span",{className:"font-semibold",children:e.name})]}),a<r.length-1&&(0,s.jsx)(aV,{})]},e.id))})]})};var aX=t(5599);function a0(e){var a;let{navigate:t,goBack:r,canGoBack:i,headerActions:n,isNewUserFlow:o=!1,onFlowComplete:c}=e,{user:d}=(0,A.As)(),{db:m}=(0,A.jt)(),{toast:u}=(0,ed.dj)(),[p,h]=(0,l.useState)(null),[N,b]=(0,l.useState)(""),[v,y]=(0,l.useState)(!0),[w,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!d||!m)return void y(!1);y(!0);let e=(0,S.aQ)((0,S.H9)(m,"users",d.uid),e=>{if(e.exists()){let a=e.data();h(a),b(a.displayName||"")}y(!1)});return()=>e()},[d,m]);let C=async()=>{if(!d||!N.trim()||N.trim().length<3)return void u({variant:"destructive",title:"خطأ",description:"يجب أن يتكون اسم العرض من 3 أحرف على الأقل."});if(!m)return void u({variant:"destructive",title:"خطأ",description:"خدمة قاعدة البيانات غير متاحة حاليًا."});k(!0);try{await aw(d,N.trim(),m),u({title:"تم الحفظ بنجاح",description:"تم تحديث اسم العرض الخاص بك."}),o&&c&&c()}catch(e){console.error("Error updating display name:",e),u({variant:"destructive",title:"فشل التحديث",description:"حدث خطأ أثناء تحديث اسمك. يرجى المحاولة مرة أخرى."})}finally{k(!1)}},T=e=>{navigator.clipboard.writeText(e),u({title:"تم النسخ",description:"تم نسخ معرّف المستخدم بنجاح."})},I=null==d?void 0:d.isAnonymous;return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"الملف الشخصي",onBack:r,canGoBack:!o&&i,actions:n}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:v?(0,s.jsxs)(e7.Zp,{children:[(0,s.jsxs)(e7.aR,{className:"items-center text-center",children:[(0,s.jsx)(eA,{className:"h-24 w-24 rounded-full"}),(0,s.jsxs)("div",{className:"w-full space-y-2 pt-2",children:[(0,s.jsx)(eA,{className:"h-6 w-40 mx-auto"}),(0,s.jsx)(eA,{className:"h-4 w-60 mx-auto"})]})]}),(0,s.jsxs)(e7.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eA,{className:"h-5 w-24"}),(0,s.jsx)(eA,{className:"h-10 w-full"})]}),(0,s.jsx)(eA,{className:"h-10 w-full"})]})]}):p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e7.Zp,{children:[(0,s.jsxs)(e7.aR,{className:"items-center text-center",children:[(0,s.jsxs)(f,{className:"h-24 w-24 border-2 border-primary mb-4",children:[(0,s.jsx)(g,{src:p.photoURL,alt:p.displayName}),(0,s.jsx)(j,{children:null==(a=p.displayName)?void 0:a.charAt(0)})]}),(0,s.jsx)(e7.ZB,{children:o?"اختر اسم العرض الخاص بك":p.displayName}),(0,s.jsx)(e7.BT,{children:I?"حساب زائر":p.email})]}),(0,s.jsxs)(e7.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"displayName",children:"اسم العرض"}),(0,s.jsx)(U,{id:"displayName",value:N,onChange:e=>b(e.target.value),placeholder:"اختر اسمًا يظهر للمستخدمين الآخرين",disabled:I}),I&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"لا يمكن للزوار تغيير اسم العرض. قم بإنشاء حساب دائم."})]}),(0,s.jsx)(B.$,{onClick:C,disabled:w||v||N===p.displayName||I,className:"w-full",children:w?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"حفظ التغييرات"})]})]}),!o&&d&&(0,s.jsxs)(e7.Zp,{children:[(0,s.jsxs)(e7.aR,{children:[(0,s.jsx)(e7.ZB,{children:"معلومات فنية"}),(0,s.jsx)(e7.BT,{children:"يمكنك استخدام هذا المعرف للبحث عن بياناتك في قاعدة البيانات."})]}),(0,s.jsxs)(e7.Wu,{children:[(0,s.jsx)(en,{children:"معرّف المستخدم (User ID)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U,{readOnly:!0,value:d.uid,className:"text-xs text-muted-foreground",dir:"ltr"}),(0,s.jsx)(B.$,{variant:"outline",size:"icon",onClick:()=>T(d.uid),children:(0,s.jsx)(aX.A,{className:"h-4 w-4"})})]})]})]})]}):(0,s.jsx)("p",{className:"text-center text-muted-foreground pt-8",children:"لم يتم العثور على ملفك الشخصي."})})]})}let a1=[{id:39,name:"الدوري الإنجليزي",logo:"https://media.api-sports.io/football/leagues/39.png"},{id:140,name:"الدوري الإسباني",logo:"https://media.api-sports.io/football/leagues/140.png"},{id:135,name:"الدوري الإيطالي",logo:"https://media.api-sports.io/football/leagues/135.png"},{id:78,name:"الدوري الألماني",logo:"https://media.api-sports.io/football/leagues/78.png"},{id:2,name:"دوري أبطال أوروبا",logo:"https://media.api-sports.io/football/leagues/2.png"}];var a2=t(7204);let a4=l.memo(e=>{let{team:a,isPredictedChampion:t,onChampionSelect:l,onTeamClick:r,disabled:i}=e;return(0,s.jsxs)("div",{className:"flex items-center p-2 border rounded-lg bg-card",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3 cursor-pointer",onClick:r,children:[(0,s.jsx)(f,{className:"h-8 w-8",children:(0,s.jsx)(g,{src:a.logo})}),(0,s.jsx)("span",{className:"font-semibold",children:a.name})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:l,disabled:i,children:(0,s.jsx)(o.A,{className:(0,u.cn)("h-6 w-6 text-muted-foreground transition-colors",t&&"text-yellow-400 fill-current")})})]})});function a5(e){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("path",{d:"M12 22a10 10 0 0 0 4.93-1.49"}),(0,s.jsx)("path",{d:"M12 2a10 10 0 0 1 4.93 1.49"}),(0,s.jsx)("path",{d:"m5.26 6.26 13.48 11.48"}),(0,s.jsx)("path",{d:"M5.26 17.74 18.74 6.26"}),(0,s.jsx)("path",{d:"m12 2 4.7 4.7"}),(0,s.jsx)("path",{d:"m12 22 4.7-4.7"}),(0,s.jsx)("path",{d:"m2 12 4.7 4.7"}),(0,s.jsx)("path",{d:"m22 12-4.7 4.7"})]})}a4.displayName="TeamListItem";let a3=l.memo(e=>{let{player:a,isPredictedTopScorer:t,onScorerSelect:l,disabled:r}=e;return(0,s.jsxs)("div",{className:"flex items-center p-2 border rounded-lg bg-card",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3",children:[(0,s.jsx)(f,{className:"h-10 w-10",children:(0,s.jsx)(g,{src:a.photo})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:a.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a.position})]})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:()=>l(a.id),disabled:r,children:(0,s.jsx)(a5,{className:(0,u.cn)("h-6 w-6 text-muted-foreground transition-colors",t&&"text-yellow-400")})})]})});a3.displayName="PlayerListItem";var a6=t(6923),a8=t(4884);let a9=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(a8.bL,{className:(0,u.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:a,children:(0,s.jsx)(a8.zi,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});a9.displayName=a8.bL.displayName;var a7=t(8061),te=t(7648),ta=t(203),tt=t(3926);let ts=()=>({t:e=>e.replace(/_/g," ")}),tl=e=>{var a;let{player:t,navigate:l,onRename:r,isAdmin:i,showRating:n}=e,{t:o}=ts(),c=t.photo&&""!==t.photo.trim()?t.photo:"https://media.api-sports.io/football/players/0.png",d=t.rating&&!isNaN(parseFloat(t.rating))?parseFloat(t.rating).toFixed(1):null;return(0,s.jsxs)("div",{className:"relative flex flex-col items-center cursor-pointer",onClick:()=>t.id&&l("PlayerDetails",{playerId:t.id}),children:[(0,s.jsxs)("div",{className:"relative w-12 h-12",children:[(0,s.jsxs)(f,{className:"rounded-full w-12 h-12 object-cover border-2 border-white/50",children:[(0,s.jsx)(g,{src:c,alt:(null==t?void 0:t.name)||"Player"}),(0,s.jsx)(j,{children:(null==t||null==(a=t.name)?void 0:a.charAt(0))||"P"})]}),i&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute -bottom-2 -left-2 h-6 w-6 bg-background/80 hover:bg-background rounded-full",onClick:e=>{e.stopPropagation(),r()},children:(0,s.jsx)(q.A,{className:"h-3 w-3"})}),t.number&&(0,s.jsx)("div",{className:"absolute -top-1 -left-1 bg-gray-800 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center border-2 border-background",children:t.number}),n&&d&&(0,s.jsx)("div",{className:(0,u.cn)("absolute -top-1 -right-1 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center border-2 border-background",(e=>{if(!e)return"bg-gray-500";let a=parseFloat(e);return a>=8?"bg-green-600":a>=7?"bg-yellow-600":"bg-red-600"})(d)),children:d})]}),(0,s.jsx)("span",{className:"mt-1 text-[11px] font-semibold text-center truncate w-16",children:(null==t?void 0:t.name)||o("unknown")})]})},tr=e=>{let{fixture:a,navigate:t,customStatus:l}=e;return(0,s.jsx)(e7.Zp,{className:"mb-4 bg-card/80 backdrop-blur-sm",children:(0,s.jsxs)(e7.Wu,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>t("CompetitionDetails",{leagueId:a.league.id,title:a.league.name,logo:a.league.logo}),children:[(0,s.jsx)(f,{className:"h-5 w-5",children:(0,s.jsx)(g,{src:a.league.logo})}),(0,s.jsx)("span",{className:"text-[10px]",children:a.league.name})]}),(0,s.jsx)("span",{className:"text-[10px]",children:(0,N.GP)(new Date(a.fixture.date),"d MMMM yyyy",{locale:C.ar})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1 justify-end truncate cursor-pointer",onClick:()=>t("TeamDetails",{teamId:a.teams.home.id}),children:[(0,s.jsx)(f,{className:"h-10 w-10 border-2 border-primary/50",children:(0,s.jsx)(g,{src:a.teams.home.logo})}),(0,s.jsx)("span",{className:"font-bold text-sm text-center truncate w-full",children:a.teams.home.name})]}),(0,s.jsx)("div",{className:"relative flex flex-col items-center justify-center min-w-[120px] text-center",children:(0,s.jsx)(eC,{fixture:a,large:!0,customStatus:l})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 flex-1 truncate cursor-pointer",onClick:()=>t("TeamDetails",{teamId:a.teams.away.id}),children:[(0,s.jsx)(f,{className:"h-10 w-10 border-2 border-primary/50",children:(0,s.jsx)(g,{src:a.teams.away.logo})}),(0,s.jsx)("span",{className:"font-bold text-sm text-center truncate w-full",children:a.teams.away.name})]})]})]})})},ti=e=>{let{homeStats:a,awayStats:t}=e,{t:l}=ts(),r=(e,a)=>{var t;let s=null==(t=e.find(e=>e.type===a))?void 0:t.value;return"string"==typeof s?parseInt(s,10)||0:s||0},i=r(a,"Shots insidebox"),n=r(a,"Shots outsidebox"),o=r(t,"Shots insidebox"),c=r(t,"Shots outsidebox");return i+n+o+c===0?null:(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{className:"text-lg text-center",children:l("shot_map")})}),(0,s.jsx)(e7.Wu,{children:(0,s.jsxs)("div",{className:"relative w-full max-w-sm mx-auto aspect-[3/2] bg-green-700 bg-cover bg-center rounded-lg overflow-hidden border-4 border-green-900/50",style:{backgroundImage:"url('/pitch-horizontal.svg')"},children:[(0,s.jsxs)("div",{className:"absolute right-[18%] top-1/2 -translate-y-1/2 text-center text-white",children:[(0,s.jsx)("p",{className:"font-bold text-2xl drop-shadow-lg",children:i}),(0,s.jsx)("p",{className:"text-xs",children:l("inside_box")})]}),(0,s.jsxs)("div",{className:"absolute right-[40%] top-1/2 -translate-y-1/2 text-center text-white",children:[(0,s.jsx)("p",{className:"font-bold text-2xl drop-shadow-lg",children:n}),(0,s.jsx)("p",{className:"text-xs",children:l("outside_box")})]}),(0,s.jsxs)("div",{className:"absolute left-[18%] top-1/2 -translate-y-1/2 text-center text-white",children:[(0,s.jsx)("p",{className:"font-bold text-2xl drop-shadow-lg",children:o}),(0,s.jsx)("p",{className:"text-xs",children:l("inside_box")})]}),(0,s.jsxs)("div",{className:"absolute left-[40%] top-1/2 -translate-y-1/2 text-center text-white",children:[(0,s.jsx)("p",{className:"font-bold text-2xl drop-shadow-lg",children:c}),(0,s.jsx)("p",{className:"text-xs",children:l("outside_box")})]})]})})]})},tn=e=>{var a,t;let{fixture:l,statistics:r,loading:i}=e,{t:n}=ts(),o=(null==r||null==(a=r.find(e=>e.team.id===l.teams.home.id))?void 0:a.statistics)||[],c=(null==r||null==(t=r.find(e=>e.team.id===l.teams.away.id))?void 0:t.statistics)||[],d=(e,a)=>{var t,s;return null!=(s=null==(t=e.find(e=>e.type===a))?void 0:t.value)?s:"0"};return(0,s.jsxs)("div",{className:"space-y-4",children:[r&&r.length>0&&(0,s.jsx)(ti,{homeStats:o,awayStats:c}),(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"p-4 text-sm text-right",children:[(0,s.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,s.jsx)("span",{className:"font-semibold",children:l.fixture.venue.name||"غير محدد"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"الملعب"})]}),(0,s.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,s.jsx)("span",{className:"font-semibold",children:l.league.round}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"الجولة"})]}),(0,s.jsxs)("div",{className:"flex justify-between py-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:l.fixture.status.long}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"الحالة"})]})]})}),(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"p-4 space-y-4",children:[(0,s.jsx)("h3",{className:"font-bold text-center",children:"إحصائيات المباراة"}),i?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):r&&r.length>0?[{labelKey:"possession",type:"Ball Possession",isProgress:!0},{labelKey:"total_shots",type:"Total Shots"},{labelKey:"shots_on_goal",type:"Shots on Goal"},{labelKey:"shots_off_goal",type:"Shots off Goal"},{labelKey:"blocked_shots",type:"Blocked Shots"},{labelKey:"fouls",type:"Fouls"},{labelKey:"yellow_cards",type:"Yellow Cards"},{labelKey:"red_cards",type:"Red Cards"},{labelKey:"corner_kicks",type:"Corner Kicks"},{labelKey:"offsides",type:"Offsides"}].map(e=>{let a=d(o,e.type),t=d(c,e.type);if(e.isProgress){let l=parseInt(String(a).replace("%",""))||0,r=parseInt(String(t).replace("%",""))||0;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold",children:[(0,s.jsx)("span",{children:a}),(0,s.jsx)("span",{className:"text-muted-foreground",children:n(e.labelKey)}),(0,s.jsx)("span",{children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",dir:"ltr",children:[(0,s.jsx)(eE,{value:l,indicatorClassName:"bg-primary rounded-l-full",className:"rounded-l-full"}),(0,s.jsx)(eE,{value:r,indicatorClassName:"bg-accent rounded-r-full",className:"rounded-r-full",style:{transform:"rotate(180deg)"}})]})]},e.type)}return(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-bold",children:[(0,s.jsx)("span",{children:a}),(0,s.jsx)("span",{className:"text-muted-foreground font-normal",children:n(e.labelKey)}),(0,s.jsx)("span",{children:t})]},e.type)}):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-4",children:"الإحصائيات غير متاحة لهذه المباراة."})]})})]})},to=e=>{let{events:a,homeTeam:t,awayTeam:r,highlightsOnly:i}=e,{t:n}=ts();if(null===a)return(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})});let o=l.useMemo(()=>a?i?a.filter(e=>"Goal"===e.type||"Card"===e.type&&e.detail.includes("Red")):a:[],[a,i]);if(0===o.length)return(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:i?"لا توجد أهداف أو بطاقات حمراء.":"لا توجد أحداث رئيسية في المباراة بعد."});let c=[...o].sort((e,a)=>a.time.elapsed-e.time.elapsed),d=e=>"Goal"===e.type?(0,s.jsx)(a5,{className:"w-5 h-5 text-white"}):"Card"===e.type&&e.detail.includes("Yellow")?(0,s.jsx)(a7.A,{className:"w-5 h-5 text-yellow-400 fill-current"}):"Card"===e.type&&e.detail.includes("Red")?(0,s.jsx)(a7.A,{className:"w-5 h-5 text-red-500 fill-current"}):"subst"===e.type?(0,s.jsx)(e_.A,{className:"w-4 h-4 text-blue-500"}):(0,s.jsx)(te.A,{className:"w-5 h-5 text-muted-foreground"});return(0,s.jsxs)("div",{className:"space-y-6 pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f,{className:"h-8 w-8",children:(0,s.jsx)(g,{src:r.logo})}),(0,s.jsx)("span",{className:"font-bold",children:r.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-bold",children:t.name}),(0,s.jsx)(f,{className:"h-8 w-8",children:(0,s.jsx)(g,{src:t.logo})})]})]}),(0,s.jsxs)("div",{className:"relative px-2",children:[(0,s.jsx)("div",{className:"absolute top-0 bottom-0 left-1/2 w-0.5 bg-border -translate-x-1/2"}),c.map((e,a)=>{let l=e.team.id===t.id,r=e.player,i=e.assist;return(0,s.jsxs)("div",{className:(0,u.cn)("relative flex my-4 items-center",l?"flex-row-reverse":"flex-row"),children:[(0,s.jsx)("div",{className:"flex-1 px-4",children:(0,s.jsxs)("div",{className:(0,u.cn)("flex items-center gap-3 w-full",l?"flex-row-reverse text-right":"flex-row text-left"),children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-background flex-shrink-0",children:d(e)}),(0,s.jsx)("div",{className:"flex-1 text-sm min-w-0",children:"subst"===e.type&&e.assist.name?(0,s.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-green-500",children:[(0,s.jsx)(ta.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:i.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 font-semibold text-red-500",children:[(0,s.jsx)(tt.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:r.name})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-semibold truncate",children:e.player.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.detail})]})})]})}),(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 z-10 bg-background border rounded-full h-8 w-8 flex items-center justify-center font-bold text-xs",children:[e.time.elapsed,"'"]}),(0,s.jsx)("div",{className:"flex-1"})]},"".concat(e.time.elapsed,"-").concat(e.player.name,"-").concat(a))})]})]})},tc=e=>{let{events:a,homeTeam:t,awayTeam:l}=e,{t:r}=ts();return(0,s.jsxs)(eZ,{defaultValue:"highlights",className:"w-full",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(eU,{value:"highlights",children:"الأبرز"}),(0,s.jsx)(eU,{value:"all",children:"كل الأحداث"})]}),(0,s.jsx)(eq,{value:"highlights",children:(0,s.jsx)(to,{events:a,homeTeam:t,awayTeam:l,highlightsOnly:!0})}),(0,s.jsx)(eq,{value:"all",children:(0,s.jsx)(to,{events:a,homeTeam:t,awayTeam:l,highlightsOnly:!1})})]})},td=e=>{var a;let{lineups:t,events:r,navigate:i,isAdmin:n,onRename:o,homeTeamId:c,awayTeamId:d,detailedPlayersMap:m,matchStarted:u}=e,{t:p}=ts(),[x,h]=(0,l.useState)("home"),N=(0,l.useCallback)(e=>{if(!e.id)return e;let a=m.get(e.id);if(a){var t,s,l;return{...e,photo:a.player.photo||e.photo,rating:(null==(l=a.statistics)||null==(s=l[0])||null==(t=s.games)?void 0:t.rating)||e.rating}}return e},[m]);if(null===t)return(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})});if(t.length<2)return(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"التشكيلات غير متاحة حاليًا."});let b=t.find(e=>e.team.id===c),v=t.find(e=>e.team.id===d);if(!b||!v)return(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"خطأ في بيانات التشكيلة."});let y="home"===x?b:v,w=(null==r?void 0:r.filter(e=>"subst"===e.type&&e.team.id===y.team.id))||[];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(eZ,{value:x,onValueChange:e=>h(e),className:"w-full",children:(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(eU,{value:"home",children:b.team.name}),(0,s.jsx)(eU,{value:"away",children:v.team.name})]})}),(0,s.jsxs)("div",{className:"font-bold text-center text-muted-foreground text-sm",children:[p("formation"),": ",y.formation]}),(e=>{let a={},t=[];e.startXI.forEach(e=>{if(e.player.grid){let[t]=e.player.grid.split(":").map(Number);a[t]||(a[t]=[]),a[t].push(e)}else t.push(e)}),Object.keys(a).forEach(e=>{a[Number(e)].sort((e,a)=>{var t,s;return Number((null==(t=e.player.grid)?void 0:t.split(":")[1])||0)-Number((null==(s=a.player.grid)?void 0:s.split(":")[1])||0)})});let l=Object.keys(a).map(Number).sort((e,a)=>a-e);return(0,s.jsxs)("div",{className:"relative w-full max-w-sm mx-auto aspect-[3/4] bg-green-700 bg-cover bg-center rounded-lg overflow-hidden border-4 border-green-900/50 flex flex-col justify-around p-2",style:{backgroundImage:"url('/pitch-vertical.svg')"},children:[l.map(e=>{var t;return(0,s.jsx)("div",{className:"flex justify-around items-center w-full",children:null==(t=a[e])?void 0:t.map(e=>{let a=N(e.player);return(0,s.jsx)(tl,{player:a,navigate:i,isAdmin:n,onRename:()=>o("player",e.player.id,e.player.name,e.player.name),showRating:u},e.player.id||e.player.name)})},e)}),t.length>0&&(0,s.jsx)("div",{className:"flex justify-around items-center",children:t.map(e=>{let a=N(e.player);return(0,s.jsx)(tl,{player:a,navigate:i,isAdmin:n,onRename:()=>o("player",e.player.id,e.player.name,e.player.name),showRating:u},e.player.id||e.player.name)})})]})})(y),(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"p-3 text-center",children:[(0,s.jsx)("h3",{className:"font-bold text-sm mb-2",children:p("coach")}),(0,s.jsxs)("div",{className:"relative inline-flex flex-col items-center gap-1",children:[(0,s.jsxs)(f,{className:"h-12 w-12",children:[(0,s.jsx)(g,{src:y.coach.photo}),(0,s.jsx)(j,{children:null==(a=y.coach.name)?void 0:a.charAt(0)})]}),(0,s.jsx)("span",{className:"font-semibold text-xs",children:y.coach.name}),n&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute -top-1 -right-8 h-6 w-6",onClick:e=>{e.stopPropagation(),o("coach",y.coach.id,y.coach.name,y.coach.name)},children:(0,s.jsx)(q.A,{className:"h-3 w-3"})})]})]})}),w.length>0&&(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{className:"text-base text-center",children:p("substitutions")})}),(0,s.jsx)(e7.Wu,{className:"space-y-2",children:w.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs p-1 border-b last:border-b-0",children:[(0,s.jsxs)("div",{className:"font-bold w-10 text-center",children:[e.time.elapsed,"'"]}),(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-end gap-1 font-semibold text-red-500",children:[(0,s.jsx)("span",{children:e.player.name}),(0,s.jsx)(tt.A,{className:"h-3 w-3"})]}),(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-start gap-1 font-semibold text-green-500 ml-4",children:[(0,s.jsx)(ta.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.assist.name})]})]},a))})]}),(0,s.jsxs)("div",{className:"pt-4",children:[(0,s.jsx)("h3",{className:"text-center text-base font-bold mb-2",children:p("substitutes")}),(0,s.jsx)("div",{className:"space-y-2",children:y.substitutes.map(e=>{var a;let t=N(e.player);return(0,s.jsx)(e7.Zp,{className:"p-2 cursor-pointer",onClick:()=>e.player.id&&i("PlayerDetails",{playerId:e.player.id}),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(f,{className:"h-8 w-8",children:[(0,s.jsx)(g,{src:t.photo}),(0,s.jsx)(j,{children:null==(a=t.name)?void 0:a.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:t.position})]}),n&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"mr-auto",onClick:a=>{a.stopPropagation(),o("player",e.player.id,e.player.name,e.player.name)},children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})]})},e.player.id||e.player.name)})})]})]})},tm=e=>{let{standings:a,homeTeamId:t,awayTeamId:l,navigate:r,loading:i}=e,{t:n}=ts();return i?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):a&&0!==a.length?(0,s.jsxs)(ak,{children:[(0,s.jsx)(aC,{children:(0,s.jsxs)(aS,{children:[(0,s.jsx)(aE,{className:"text-center font-bold",children:"نقاط"}),(0,s.jsx)(aE,{className:"text-center",children:"ف/ت/خ"}),(0,s.jsx)(aE,{className:"text-center",children:"لعب"}),(0,s.jsx)(aE,{children:"الفريق"}),(0,s.jsx)(aE,{className:"w-[40px] text-right px-2",children:"#"})]})}),(0,s.jsx)(aA,{children:a.map(e=>{var a;if(!(null==(a=e.team)?void 0:a.id))return null;let i=e.team.id===t||e.team.id===l;return(0,s.jsxs)(aS,{className:(0,u.cn)(i&&"bg-primary/10","cursor-pointer"),onClick:()=>r("TeamDetails",{teamId:e.team.id}),children:[(0,s.jsx)(aT,{className:"text-center font-bold",children:e.points}),(0,s.jsx)(aT,{className:"text-center text-xs",children:"".concat(e.all.win,"/").concat(e.all.draw,"/").concat(e.all.lose)}),(0,s.jsx)(aT,{className:"text-center",children:e.all.played}),(0,s.jsx)(aT,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("p",{className:"font-semibold truncate",children:e.team.name}),(0,s.jsx)(f,{className:"h-6 w-6",children:(0,s.jsx)(g,{src:e.team.logo})})]})}),(0,s.jsx)(aT,{className:"font-bold px-2",children:e.rank})]},e.team.id)})})]}):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:n("standings_not_available")})};var tu=t(1483),tp=t(4059),tx=t(154);let th=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(tp.bL,{className:(0,u.cn)("grid gap-2",t),...l,ref:a})});th.displayName=tp.bL.displayName;let tf=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(tp.q7,{ref:a,className:(0,u.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:(0,s.jsx)(tp.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(tx.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});tf.displayName=tp.q7.displayName;var tg=t(4601),tj=t(8027),tN=t(4555),tb=t(794),tv=t(7679),ty=t(4683),tw=t(8917),tk=t(8120),tC=t(6936);let tA=async e=>(console.log("[MOCK] Initiating purchase for package: ".concat(e)),await new Promise(e=>setTimeout(e,1500)),console.log('[MOCK] Successfully "purchased" package: '.concat(e)),!0),tS=["تجربة خالية من الإعلانات تمامًا","أولوية في الحصول على الميزات الجديدة","دعم فني متميز","شارة مستخدم احترافي (قريبًا)"],tE=[{name:"شهري",identifier:"monthly",price:"4.99",description:"فاتورة كل شهر، ألغِ في أي وقت.",isPopular:!1},{name:"سنوي",identifier:"yearly",price:"49.99",description:"وفر 20% مع الخطة السنوية.",isPopular:!0}];var tT=t(2340),tI=t(3343),tP=t(3482);let tM=(0,l.createContext)(void 0),tR="goalstack_first_use_date",tB="goalstack_splash_ad_shown_session",tD="goalstack_banner_ad_dismissed_session",tF=e=>{let{children:a}=e,{isProUser:t}=(0,A.As)(),{isAdmin:r}=(0,A.z8)(),[i,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)(()=>"true"===sessionStorage.getItem(tD));return(0,l.useEffect)(()=>{if(t||r||"true"===sessionStorage.getItem(tB))return void n(!1);let e=localStorage.getItem(tR);if(e){let a=(0,tI.H)(e),t=(0,w.f)(a,5);(0,tP.Y)(new Date,t)?n(!1):n(!0)}else localStorage.setItem(tR,new Date().toISOString()),n(!1)},[t,r]),(0,s.jsx)(tM.Provider,{value:{showSplashAd:!t&&!r&&i,showBannerAd:!t&&!r&&!o,setSplashAdShown:()=>{sessionStorage.setItem(tB,"true"),n(!1)},dismissBannerAd:()=>{c(!0),sessionStorage.setItem(tD,"true")}},children:a})},tz=()=>{let e=(0,l.useContext)(tM);if(!e)throw Error("useAd must be used within an AdProvider");return e},tG=()=>{let{setSplashAdShown:e}=tz(),[a,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let a=setTimeout(()=>t(!0),1e3),s=setTimeout(()=>e(),3e3);return()=>{clearTimeout(a),clearTimeout(s)}},[e]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background",children:[(0,s.jsx)(tT.I,{className:"h-24 w-24 mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-primary",children:"مرحباً بك مجدداً في نبض الملاعب"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"استمتع بتجربتك الكروية"}),(0,s.jsxs)("div",{className:"absolute bottom-10 flex items-center gap-2",children:[(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"جاري تحميل الإعلانات..."})]}),a&&(0,s.jsx)(B.$,{variant:"ghost",className:"absolute top-4 right-4",onClick:a=>{a.stopPropagation(),e()},children:"تخطي"})]})},tL=()=>{let{dismissBannerAd:e}=tz();return(0,s.jsxs)("div",{className:"relative w-full h-14 bg-card border-t flex items-center justify-center text-muted-foreground text-sm z-20",children:[(0,s.jsx)("p",{children:"منطقة الإعلان (Banner Ad)"}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-7 w-7",onClick:e,children:(0,s.jsx)(z.A,{className:"h-4 w-4"})})]})};var t$=t(6215);let tO=t$.bL,t_=t$.l9;t$.YJ,t$.ZL,t$.Pb,t$.z6,l.forwardRef((e,a)=>{let{className:t,inset:l,children:r,...i}=e;return(0,s.jsxs)(t$.ZP,{ref:a,className:(0,u.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...i,children:[r,(0,s.jsx)(I.A,{className:"ml-auto"})]})}).displayName=t$.ZP.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(t$.G5,{ref:a,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})}).displayName=t$.G5.displayName;let tH=l.forwardRef((e,a)=>{let{className:t,sideOffset:l=4,...r}=e;return(0,s.jsx)(t$.ZL,{children:(0,s.jsx)(t$.UC,{ref:a,sideOffset:l,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});tH.displayName=t$.UC.displayName;let tZ=l.forwardRef((e,a)=>{let{className:t,inset:l,...r}=e;return(0,s.jsx)(t$.q7,{ref:a,className:(0,u.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...r})});tZ.displayName=t$.q7.displayName,l.forwardRef((e,a)=>{let{className:t,children:l,checked:r,...i}=e;return(0,s.jsxs)(t$.H_,{ref:a,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(t$.VF,{children:(0,s.jsx)(aR.A,{className:"h-4 w-4"})})}),l]})}).displayName=t$.H_.displayName,l.forwardRef((e,a)=>{let{className:t,children:l,...r}=e;return(0,s.jsxs)(t$.hN,{ref:a,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(t$.VF,{children:(0,s.jsx)(tx.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=t$.hN.displayName;let tJ=l.forwardRef((e,a)=>{let{className:t,inset:l,...r}=e;return(0,s.jsx)(t$.JU,{ref:a,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...r})});tJ.displayName=t$.JU.displayName;let tU=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(t$.wv,{ref:a,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});tU.displayName=t$.wv.displayName;let tq=e=>{let{crownedTeams:a,onSelectTeam:t,onRemove:l,selectedTeamId:r,navigate:i}=e;return 0===a.length?(0,s.jsxs)("div",{className:"text-center text-muted-foreground py-4 px-4",children:[(0,s.jsx)("p",{className:"mb-4",children:"قم بتتويج فريقك المفضل بالضغط على أيقونة التاج \uD83D\uDC51 في صفحة تفاصيل الفريق لتبقى على اطلاع دائم بآخر أخباره ومبارياته هنا."}),(0,s.jsx)(B.$,{onClick:()=>i("AllCompetitions"),children:"استكشف"})]}):(0,s.jsxs)(eR,{className:"w-full whitespace-nowrap",children:[(0,s.jsx)("div",{className:"flex w-max space-x-4 px-4 flex-row-reverse",children:a.map(e=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center gap-1 w-20 text-center cursor-pointer group",onClick:()=>t(e.teamId),children:[(0,s.jsxs)(f,{className:"h-12 w-12 border-2 ".concat(r===e.teamId?"border-primary":"border-yellow-400"),children:[(0,s.jsx)(g,{src:e.logo}),(0,s.jsx)(j,{children:e.name.charAt(0)})]}),(0,s.jsx)("span",{className:"text-[11px] font-medium truncate w-full",children:e.name}),(0,s.jsx)("p",{className:"text-[10px] text-muted-foreground truncate w-full",children:e.note}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),l(e.teamId)},className:"absolute top-0 left-0 h-5 w-5 bg-background/80 rounded-full flex items-center justify-center border border-destructive",children:(0,s.jsx)(z.A,{className:"h-3 w-3 text-destructive"})})]},e.teamId))}),(0,s.jsx)(eB,{orientation:"horizontal"})]})},tW=e=>{let{teamId:a,navigate:t}=e,[r,i]=(0,l.useState)([]),[n,o]=(0,l.useState)(!0),{toast:c}=(0,ed.dj)(),d=(0,l.useRef)(null),m=(0,l.useRef)(-1);return((0,l.useEffect)(()=>{let e=!0;return(async()=>{if(!a)return o(!1);o(!0);try{let t="/api/football/fixtures?team=".concat(a,"&season=").concat(aI),s=await fetch(t);if(!e)return;if(!s.ok)throw Error("API fetch failed with status: ".concat(s.status));let l=(await s.json()).response||[];l.sort((e,a)=>e.fixture.timestamp-a.fixture.timestamp);let r=new Date,n=l.findIndex(e=>{let a=new Date(1e3*e.fixture.timestamp);return ew(e.fixture.status)||a>=r});e&&(i(l),m.current=n>-1?n:l.length>0?l.length-1:-1)}catch(a){console.error("Error fetching fixtures:",a),e&&c({variant:"destructive",title:"خطأ في الشبكة",description:"فشل في جلب المباريات. يرجى التحقق من اتصالك بالإنترنت."})}finally{e&&o(!1)}})(),()=>{e=!1}},[a,c]),(0,l.useEffect)(()=>{!n&&m.current>-1&&d.current&&setTimeout(()=>{var e,a;let t=null==(e=d.current)?void 0:e.children[m.current];t&&(null==(a=d.current)||a.scrollTo({top:t.offsetTop-10,behavior:"smooth"}))},200)},[n,r]),n)?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin text-primary"})}):0===r.length?(0,s.jsx)(e7.Zp,{className:"mt-4",children:(0,s.jsx)(e7.Wu,{className:"p-6",children:(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"لا توجد مباريات متاحة لهذا الفريق."})})}):(0,s.jsx)("div",{ref:d,className:"h-full overflow-y-auto space-y-2",children:r.map((e,a)=>(0,s.jsx)("div",{children:(0,s.jsx)(eP,{fixture:e,navigate:t})},e.fixture.id))})};var tV=t(5299),tK=t(9131);let tY=e=>{var a,t,r,i;let{predictionMatch:n,userPrediction:o,onSave:c}=e,[d,m]=(0,l.useState)(n.fixtureData),[p,x]=(0,l.useState)(!1),[h,j]=(0,l.useState)(null!=(r=null==o||null==(a=o.awayGoals)?void 0:a.toString())?r:""),[N,b]=(0,l.useState)(null!=(i=null==o||null==(t=o.homeGoals)?void 0:t.toString())?i:""),v=V(h,500),y=V(N,500),w=(0,l.useMemo)(()=>["LIVE","1H","HT","2H","ET","BT","P","FT","AET","PEN"].includes(d.fixture.status.short),[d]),k=(0,l.useMemo)(()=>["FT","AET","PEN"].includes(d.fixture.status.short),[d]),C=(0,l.useMemo)(()=>new Date(1e3*d.fixture.timestamp)<new Date,[d]);(0,l.useEffect)(()=>{let e=null,a=async()=>{x(!0);try{let e=await fetch("/api/football/fixtures?id=".concat(d.fixture.id)),a=await e.json();a.response&&a.response.length>0&&m(a.response[0])}catch(e){console.error("Failed to fetch live fixture data:",e)}finally{setTimeout(()=>x(!1),500)}};return w&&!k?(a(),e=setInterval(a,6e4)):["NS","TBD"].includes(n.fixtureData.fixture.status.short)&&new Date(1e3*n.fixtureData.fixture.timestamp)<new Date&&a(),()=>{e&&clearInterval(e)}},[d.fixture.id,w,k,n.fixtureData.fixture.status.short,n.fixtureData.fixture.timestamp]);let A=(0,l.useCallback)(()=>{if(!k||!o)return"bg-card text-foreground";let e=d.goals.home,a=d.goals.away,t=o.awayGoals,s=o.homeGoals;return null===e||null===a?"bg-card text-foreground":e===t&&a===s?"bg-green-500/80 text-white":(e>a?"home":e<a?"away":"draw")==(t>s?"home":t<s?"away":"draw")?"bg-yellow-500/80 text-white":"bg-destructive/80 text-white"},[k,o,d.goals]),S=(0,l.useCallback)(()=>k&&(null==o?void 0:o.points)!==void 0?3===o.points?"text-green-500":1===o.points?"text-yellow-500":"text-destructive":"text-primary",[k,o]);(0,l.useEffect)(()=>{var e,a;C||""===v||""===y||v===(null==o||null==(e=o.awayGoals)?void 0:e.toString())&&y===(null==o||null==(a=o.homeGoals)?void 0:a.toString())||c(d.fixture.id,v,y)},[v,y,c,o,d.fixture.id,C]),(0,l.useEffect)(()=>{var e,a,t,s;j(null!=(t=null==o||null==(e=o.awayGoals)?void 0:e.toString())?t:""),b(null!=(s=null==o||null==(a=o.homeGoals)?void 0:a.toString())?s:"")},[o]);let T=A(),I="bg-card text-foreground"!==T,P=e=>{let{team:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-0.5 flex-1 justify-start truncate",children:[(0,s.jsx)(f,{className:"h-7 w-7",children:(0,s.jsx)(g,{src:a.logo})}),(0,s.jsx)("span",{className:(0,u.cn)("font-semibold text-xs text-center truncate w-full",I&&"text-white/90"),children:a.name})]})};return(0,s.jsx)(e7.Zp,{className:(0,u.cn)("transition-colors",T),children:(0,s.jsxs)(e7.Wu,{className:"p-2",children:[(0,s.jsxs)("main",{dir:"rtl",className:"flex items-center justify-between gap-1",children:[(0,s.jsx)(P,{team:d.teams.home}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center text-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 min-w-[100px] justify-center",children:[(0,s.jsx)(U,{type:"number",className:(0,u.cn)("w-9 h-8 text-center text-sm font-bold",I&&"bg-black/20 border-white/30 text-white placeholder:text-white/70"),min:"0",value:h,onChange:e=>j(e.target.value),id:"home-".concat(d.fixture.id),disabled:C}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-w-[50px] text-center relative",children:[p&&(0,s.jsx)(E.A,{className:"h-3 w-3 animate-spin absolute -top-1"}),(0,s.jsx)(eC,{fixture:d})]}),(0,s.jsx)(U,{type:"number",className:(0,u.cn)("w-9 h-8 text-center text-sm font-bold",I&&"bg-black/20 border-white/30 text-white placeholder:text-white/70"),min:"0",value:N,onChange:e=>b(e.target.value),id:"away-".concat(d.fixture.id),disabled:C})]})}),(0,s.jsx)(P,{team:d.teams.away})]}),(0,s.jsx)("div",{className:(0,u.cn)("text-center text-[10px] mt-1",w&&I?"text-white/80":"text-muted-foreground"),children:(0,s.jsx)("span",{className:(0,u.cn)(I&&"text-white/90"),children:d.league.name})}),k&&(null==o?void 0:o.points)!==void 0&&o.points>=0&&(0,s.jsxs)("p",{className:(0,u.cn)("text-center font-bold text-xs mt-1",S()),children:["+",o.points," نقاط"]}),!k&&o&&!C&&(0,s.jsx)("p",{className:(0,u.cn)("text-center text-[10px] mt-1",I?"text-green-300":"text-green-500"),children:"تم حفظ توقعك"}),C&&!o&&!k&&(0,s.jsx)("p",{className:(0,u.cn)("text-center text-[10px] mt-1",I?"text-red-300":"text-red-500"),children:"أغلق باب التوقع"})]})})},tQ=(e,a)=>{if(!["FT","AET","PEN"].includes(a.fixture.status.short)||null===a.goals.home||null===a.goals.away)return 0;let t=e.awayGoals,s=e.homeGoals,l=a.goals.home,r=a.goals.away;return l===t&&r===s?3:+((l>r?"home":l<r?"away":"draw")==(t>s?"home":t<s?"away":"draw"))},tX=l.memo(e=>{let{leaderboard:a,loadingLeaderboard:t,userScore:l,userId:r}=e;if(t)return(0,s.jsx)("div",{className:"space-y-2 p-4",children:Array.from({length:5}).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-2",children:[(0,s.jsx)(eA,{className:"h-4 w-4"}),(0,s.jsx)(eA,{className:"h-8 w-8 rounded-full"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(eA,{className:"h-4 w-3/4"})}),(0,s.jsx)(eA,{className:"h-4 w-8"})]},a))});if(0===a.length)return(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"لا يوجد مشاركون في لوحة الصدارة بعد."});let i=a.some(e=>e.userId===r);return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(ak,{children:[(0,s.jsx)(aC,{children:(0,s.jsxs)(aS,{children:[(0,s.jsx)(aE,{children:"الترتيب"}),(0,s.jsx)(aE,{className:"text-right",children:"المستخدم"}),(0,s.jsx)(aE,{className:"text-center",children:"النقاط"})]})}),(0,s.jsx)(aA,{children:a.map(e=>(0,s.jsxs)(aS,{className:(0,u.cn)(e.userId===r&&"bg-primary/10"),children:[(0,s.jsx)(aT,{children:e.rank}),(0,s.jsx)(aT,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[e.userName,(0,s.jsx)(f,{className:"h-6 w-6",children:(0,s.jsx)(g,{src:e.userPhoto})})]})}),(0,s.jsx)(aT,{className:"text-center font-bold",children:e.totalPoints})]},e.userId))})]}),l&&!i&&(0,s.jsx)(e7.Zp,{className:"bg-primary/10 mt-4",children:(0,s.jsx)(e7.Wu,{className:"p-0",children:(0,s.jsx)(ak,{children:(0,s.jsx)(aA,{children:(0,s.jsxs)(aS,{className:"border-t-2 border-primary/50",children:[(0,s.jsx)(aT,{children:l.rank||"-"}),(0,s.jsx)(aT,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[l.userName,(0,s.jsx)(f,{className:"h-6 w-6",children:(0,s.jsx)(g,{src:l.userPhoto})})]})}),(0,s.jsx)(aT,{className:"text-center font-bold",children:l.totalPoints})]})})})})})]})});tX.displayName="LeaderboardDisplay";let t0=e=>(0,N.GP)(e,"yyyy-MM-dd"),t1=e=>{let{selectedDateKey:a,onDateSelect:t}=e,r=(0,l.useMemo)(()=>{let e=new Date;return Array.from({length:30},(a,t)=>(0,w.f)(e,t-15))},[]),i=(0,l.useRef)(null),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=i.current,a=n.current;if(e&&a){let t=e.getBoundingClientRect(),s=a.getBoundingClientRect(),l=s.left-t.left-t.width/2+s.width/2;e.scrollTo({left:e.scrollLeft+l,behavior:"smooth"})}},[a]),(0,s.jsxs)("div",{className:"relative bg-card py-2 border-x border-b rounded-b-lg shadow-md -mt-1 flex items-center justify-center",children:[(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8",onClick:()=>t(t0((0,w.f)(new Date(a),1))),children:(0,s.jsx)(I.A,{className:"h-5 w-5"})}),(0,s.jsx)("div",{ref:i,className:"flex flex-row-reverse overflow-x-auto pb-1 px-10",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.map(e=>{let l=t0(e),r=l===a;return(0,s.jsxs)("button",{ref:r?n:null,className:(0,u.cn)("relative flex flex-col items-center justify-center h-auto py-1 px-2 min-w-[40px] rounded-lg transition-colors ml-2","text-foreground/80 hover:text-primary",r&&"text-primary"),onClick:()=>t(l),children:[(0,s.jsx)("span",{className:"text-[10px] font-normal",children:(0,N.GP)(e,"EEE",{locale:C.ar})}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:(0,N.GP)(e,"d")}),r&&(0,s.jsx)("span",{className:"absolute bottom-0 h-0.5 w-3 rounded-full bg-primary"})]},l)})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 h-8 w-8",onClick:()=>t(t0((0,k.e)(new Date(a),1))),children:(0,s.jsx)(T.A,{className:"h-5 w-5"})})]})};var t2=t(760),t4=t(1978),t5=t(8176);let t3=t5.bL,t6=t5.l9,t8=l.forwardRef((e,a)=>{let{className:t,align:l="center",sideOffset:r=4,...i}=e;return(0,s.jsx)(t5.ZL,{children:(0,s.jsx)(t5.UC,{ref:a,align:l,sideOffset:r,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});function t9(e){let{onDismiss:a,activeTab:t}=e,[r,i]=(0,l.useState)({predictions:!0,crown:!0});(0,l.useEffect)(()=>{let e=setTimeout(()=>{r.predictions&&n("predictions")},8e3),a=setTimeout(()=>{r.crown&&n("crown")},12e3);return()=>{clearTimeout(e),clearTimeout(a)}},[r]);let n=e=>{i(t=>{let s={...t,[e]:!1};return s.predictions||s.crown||a(),s})},c="Predictions"===t&&r.predictions,d="MyCountry"===t&&r.crown;return c||d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{"data-id":"predictions-hint-anchor",className:"fixed bottom-0 z-40",style:{left:"50%",transform:"translateX(calc(-50% + 58px))"},children:(0,s.jsxs)(t3,{open:c,children:[(0,s.jsx)(t6,{asChild:!0,children:(0,s.jsx)("div",{className:"h-16 w-[60px]"})}),(0,s.jsx)(t8,{side:"top",align:"center",className:"w-56 p-2 rounded-xl shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"ميزة جديدة!"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"توقع نتائج المباريات وتصدر لوحة الصدارة."})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n("predictions"),children:(0,s.jsx)(z.A,{className:"h-4 w-4"})})]})})]})}),(0,s.jsx)("div",{"data-id":"mycountry-hint-anchor",className:(0,u.cn)("fixed bottom-0 z-40"),style:{left:"50%",transform:"translateX(calc(-50% - 62px))"},children:(0,s.jsxs)(t3,{open:d,children:[(0,s.jsx)(t6,{asChild:!0,children:(0,s.jsx)("div",{className:"h-16 w-[60px]"})}),(0,s.jsx)(t8,{side:"top",align:"center",className:"w-56 p-2 rounded-xl shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(W.A,{className:"h-5 w-5 text-yellow-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:"توّج فريقك!"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"تابع فريقك المفضل هنا بالضغط على أيقونة التاج."})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n("crown"),children:(0,s.jsx)(z.A,{className:"h-4 w-4"})})]})})]})})]}):null}t8.displayName=t5.UC.displayName;let t7={Matches:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,isVisible:i,favorites:n,customNames:o,setFavorites:c,onCustomNameChange:d}=e,{user:m}=(0,A.As)(),{db:p,isAdmin:h}=(0,A.z8)(),{toast:f}=(0,ed.dj)(),[g,j]=(0,l.useState)(!1),[N,b]=(0,l.useState)(ez(new Date)),[v,y]=(0,l.useState)(new Map),[w,k]=(0,l.useState)(!0),[C,E]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{if(!p||!h)return;let e=(0,S.rJ)(p,"predictionFixtures"),a=(0,S.aQ)(e,e=>{let a=new Set;e.forEach(e=>a.add(Number(e.id))),E(a)},e=>{console.error("Permission error listening to predictions:",e)});return()=>a()},[p,h]);let T=(0,l.useCallback)((e,a,t)=>{if(!o)return t;let s="team"===e?null==o?void 0:o.teams:null==o?void 0:o.leagues,l=null==s?void 0:s.get(a);if(l)return l;let r=("team"===e?ep.teams:ep.leagues)[a];return r||t},[o]),I=(0,l.useCallback)(e=>{if(!p)return;let a=e.fixture.id,t=C.has(a),s=(0,S.H9)(p,"predictionFixtures",String(a));if(t)(0,S.kd)(s).then(()=>{f({title:"تم إلغاء التثبيت",description:"تمت إزالة المباراة من التوقعات."})}).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"delete"}))});else{let a={fixtureData:e};(0,S.BN)(s,a).then(()=>{f({title:"تم التثبيت",description:"أصبحت المباراة متاحة الآن للتوقع."})}).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"create",requestResourceData:a}))})}},[p,C,f]),D=(0,l.useCallback)(async(e,a)=>{k(!0);let t=n||ef();try{let s,l=await fetch("/api/football/fixtures?date=".concat(e),{signal:a});if(!l.ok)throw Error("API fetch failed with status ".concat(l.status));let r=await l.json();if(a.aborted)return;let i=r.response||[],n=Object.keys((null==t?void 0:t.teams)||{}).map(Number),o=Object.keys((null==t?void 0:t.leagues)||{}).map(Number),c=(0===n.length&&0===o.length?i.filter(e=>eD.has(e.league.id)):i.filter(e=>n.includes(e.teams.home.id)||n.includes(e.teams.away.id)||o.includes(e.league.id))).map(e=>({...e,league:{...e.league,name:T("league",e.league.id,e.league.name)},teams:{home:{...e.teams.home,name:T("team",e.teams.home.id,e.teams.home.name)},away:{...e.teams.away,name:T("team",e.teams.away.id,e.teams.away.name)}}}));y(a=>new Map(a).set(e,c))}catch(a){"AbortError"!==a.name&&(console.error("Failed to fetch data for ".concat(e,":"),a),y(a=>new Map(a).set(e,[])))}finally{a.aborted||k(!1)}},[n,T]),F=(0,l.useCallback)(async(e,a)=>{let t=v.get(e);if(!t)return;let s=t.filter(e=>"FT"!==e.fixture.status.short&&"PST"!==e.fixture.status.short&&"CANC"!==e.fixture.status.short).map(e=>e.fixture.id);if(0!==s.length)try{let l=await fetch("/api/football/fixtures?ids=".concat(s.join("-")),{signal:a});if(!l.ok)return;let r=await l.json();if(a.aborted||!r.response)return;let i=new Map(r.response.map(e=>[e.fixture.id,e])),n=t.map(e=>{let a=i.get(e.fixture.id);return a?{...a,league:{...a.league,name:T("league",a.league.id,a.league.name)},teams:{home:{...a.teams.home,name:T("team",a.teams.home.id,a.teams.home.name)},away:{...a.teams.away,name:T("team",a.teams.away.id,a.teams.away.name)}}}:e});y(a=>new Map(a).set(e,n))}catch(e){"AbortError"!==e.name&&console.error("Live update failed:",e)}},[v,T]);(0,l.useEffect)(()=>{if(!i||!o)return;let e=new AbortController;v.has(N)?k(!1):D(N,e.signal);let a=setInterval(()=>{F(N,e.signal)},6e4);return()=>{e.abort(),clearInterval(a)}},[N,i,o,v,D,F]);let z=(0,l.useMemo)(()=>(null==n?void 0:n.teams)?Object.keys(n.teams).map(Number):[],[n]),G=(0,l.useMemo)(()=>(null==n?void 0:n.leagues)?Object.keys(n.leagues).map(Number):[],[n]),L=G.length>0||z.length>0,$=v.get(N)||[];return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"",canGoBack:!1,onBack:()=>{},actions:(0,s.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,s.jsx)("div",{onClick:()=>j(e=>!e),className:(0,u.cn)("flex items-center justify-center h-7 w-7 rounded-md cursor-pointer",g?"bg-accent":"hover:bg-accent/50"),children:(0,s.jsx)("span",{className:"text-xs font-mono select-none",children:"1x2"})}),(0,s.jsx)(ey,{navigate:a,favorites:n,customNames:o,setFavorites:c,onCustomNameChange:d,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col min-h-0",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 px-1 pt-1 bg-background",children:(0,s.jsx)(eL,{selectedDateKey:N,onDateSelect:e=>{b(e)}})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-1 space-y-4 mt-2",children:(0,s.jsx)(eF,{fixtures:$,loading:w,favoritedLeagueIds:G,favoritedTeamIds:z,hasAnyFavorites:L,navigate:a,pinnedPredictionMatches:C,onPinToggle:I,isAdmin:h,showOdds:g})})]})]})}},Competitions:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,favorites:i,customNames:n,setFavorites:d}=e,{user:m}=(0,A.As)(),u=(0,l.useCallback)((e,a,t)=>{if(!n)return t;let s="".concat(e,"s"),l=n[s],r=null==l?void 0:l.get(a);if(r)return r;let i=ep[s][a];return i||t},[n]),p=(0,l.useMemo)(()=>(null==i?void 0:i.teams)&&n?Object.values(i.teams).map(e=>({...e,name:u("team",e.teamId,e.name)})):[],[i.teams,n,u]),h=(0,l.useMemo)(()=>(null==i?void 0:i.leagues)&&n?Object.values(i.leagues).map(e=>({...e,name:u("league",e.leagueId,e.name)})):[],[i.leagues,n,u]);return((0,l.useMemo)(()=>(null==i?void 0:i.players)?Object.values(i.players):[],[i.players]),i&&n)?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"اختياراتي",onBack:t,canGoBack:r,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,favorites:i,customNames:n,setFavorites:d,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)(eR,{className:"w-full whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"flex w-max space-x-4 px-4 flex-row-reverse",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 w-20 h-[84px] text-center",children:[(0,s.jsx)(ey,{navigate:a,initialItemType:"teams",favorites:i,customNames:n,setFavorites:d,children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-14 w-14 bg-card rounded-full cursor-pointer hover:bg-accent/50 transition-colors",children:(0,s.jsx)(e$.A,{className:"h-6 w-6 text-primary"})})}),(0,s.jsx)("span",{className:"text-xs font-medium truncate w-full text-primary",children:"أضف"})]}),p.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center gap-2 w-20 text-center cursor-pointer",onClick:()=>a("TeamDetails",{teamId:e.teamId}),children:[(0,s.jsxs)(f,{className:"h-14 w-14 border-2 border-border",children:[(0,s.jsx)(g,{src:e.logo}),(0,s.jsx)(j,{children:e.name.charAt(0)})]}),(0,s.jsx)("span",{className:"text-xs font-medium truncate w-full",children:e.name}),(0,s.jsx)(c.A,{className:"absolute top-0 right-0 h-4 w-4 text-yellow-400 fill-current"})]},"".concat(e.teamId,"-").concat(t)))]}),(0,s.jsx)(eB,{orientation:"horizontal",className:"h-1.5 mt-2"})]}),(0,s.jsxs)(eZ,{defaultValue:"teams",className:"w-full px-1",children:[(0,s.jsx)("div",{className:"bg-card text-card-foreground rounded-b-lg border-x border-b shadow-md",children:(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-3 bg-transparent h-11 p-0",children:[(0,s.jsxs)(eU,{value:"players",className:"data-[state=active]:shadow-none",children:[(0,s.jsx)(eO.A,{className:"ml-1 h-4 w-4"}),"اللاعبين"]}),(0,s.jsxs)(eU,{value:"competitions",className:"data-[state=active]:shadow-none",children:[(0,s.jsx)(o.A,{className:"ml-1 h-4 w-4"}),"البطولات"]}),(0,s.jsxs)(eU,{value:"teams",className:"data-[state=active]:shadow-none",children:[(0,s.jsx)(e_.A,{className:"ml-1 h-4 w-4"}),"الفرق"]})]})}),(0,s.jsx)(eq,{value:"teams",className:"mt-4 px-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"h-[76px] w-full",children:(0,s.jsx)(ey,{navigate:a,initialItemType:"teams",favorites:i,customNames:n,setFavorites:d,children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center gap-2 text-center p-2 rounded-2xl border-2 border-dashed border-muted-foreground/50 h-full w-full cursor-pointer hover:bg-accent/50 transition-colors",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-10 w-10 bg-primary/10 rounded-full",children:(0,s.jsx)(e$.A,{className:"h-6 w-6 text-primary"})})})})}),p.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center justify-start gap-1 text-center cursor-pointer h-[76px]",onClick:()=>a("TeamDetails",{teamId:e.teamId}),children:[(0,s.jsxs)(f,{className:"h-12 w-12 border-2 border-border",children:[(0,s.jsx)(g,{src:e.logo}),(0,s.jsx)(j,{children:e.name.charAt(0)})]}),(0,s.jsx)("span",{className:"text-[11px] font-medium truncate w-full",children:e.name}),(0,s.jsx)(c.A,{className:"absolute top-1 right-1 h-3 w-3 text-yellow-400 fill-current"})]},"".concat(e.teamId,"-").concat(t)))]})}),(0,s.jsx)(eq,{value:"competitions",className:"mt-4 px-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"h-[76px] w-full",children:(0,s.jsx)(ey,{navigate:a,initialItemType:"leagues",favorites:i,customNames:n,setFavorites:d,children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center gap-2 text-center p-2 rounded-2xl border-2 border-dashed border-muted-foreground/50 h-full w-full cursor-pointer hover:bg-accent/50 transition-colors",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-10 w-10 bg-primary/10 rounded-full",children:(0,s.jsx)(e$.A,{className:"h-6 w-6 text-primary"})})})})}),h.map((e,t)=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center justify-start gap-1 text-center cursor-pointer h-[76px]",onClick:()=>a("CompetitionDetails",{title:e.name,leagueId:e.leagueId,logo:e.logo}),children:[(0,s.jsxs)(f,{className:"h-12 w-12 border-2 border-border p-1",children:[(0,s.jsx)(g,{src:e.logo,className:"object-contain"}),(0,s.jsx)(j,{children:e.name.charAt(0)})]}),(0,s.jsx)("span",{className:"text-[11px] font-medium truncate w-full",children:e.name}),(0,s.jsx)(c.A,{className:"absolute top-1 right-1 h-3 w-3 text-yellow-400 fill-current"})]},"".concat(e.leagueId,"-").concat(t)))]})}),(0,s.jsx)(eq,{value:"players",className:"mt-4 px-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"h-[76px] w-full",children:(0,s.jsx)(ey,{navigate:a,initialItemType:"teams",favorites:i,customNames:n,setFavorites:d,children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center gap-2 text-center p-2 rounded-2xl border-2 border-dashed border-muted-foreground/50 h-full w-full cursor-pointer hover:bg-accent/50 transition-colors",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-10 w-10 bg-primary/10 rounded-full",children:(0,s.jsx)(e$.A,{className:"h-6 w-6 text-primary"})})})})}),(0,s.jsx)("div",{className:"h-[76px] w-full col-span-3 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-muted-foreground text-center text-sm",children:"قائمة اللاعبين المفضلين قيد التطوير."})})]})})]}),m&&m.isAnonymous&&(0,s.jsxs)("div",{className:"px-4 pt-4 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"للحفاظ على مفضلاتك ومزامنتها عبر الأجهزة، قم بإنشاء حساب دائم."}),(0,s.jsx)(B.$,{onClick:()=>{window.appNavigate&&window.appNavigate("Welcome")},className:"w-full max-w-sm mx-auto",children:"تسجيل الدخول أو إنشاء حساب"})]})]})})})]}):null}},AllCompetitions:{component:function(e){let{navigate:a,goBack:t,canGoBack:i,favorites:n,customNames:d,setFavorites:m,onCustomNameChange:p}=e,{isAdmin:h}=(0,r.useAdmin)(),{user:j}=(0,r.useAuth)(),{db:N}=(0,r.useFirestore)(),{toast:b}=(0,ed.dj)(),[v,y]=(0,l.useState)(null),[w,k]=(0,l.useState)(!1),[C,A]=(0,l.useState)(null),[T,I]=(0,l.useState)(null),[D,F]=(0,l.useState)(!1),[z,G]=(0,l.useState)(!1),L=(0,l.useCallback)((e,a,t)=>{var s;if(!d||!a)return t||"";let l=d["league"===e?"leagues":"team"===e?"teams":"country"===e?"countries":"continents"],r=null==l?void 0:l.get(a);if(r)return r;let i=null==(s=ep["".concat(e,"s")])?void 0:s[a];return i||t},[d]),$=(0,l.useCallback)(async()=>{if(!C){F(!0),b({title:"جاري جلب بيانات البطولات...",description:"قد تستغرق هذه العملية دقيقة في المرة الأولى."});try{let e=await fetch("/api/football/leagues");if(!e.ok)throw Error("Failed to fetch leagues");let a=(await e.json()).response||[];A(a)}catch(e){console.error("Error fetching all leagues:",e),b({variant:"destructive",title:"خطأ",description:"فشل في جلب بيانات البطولات."})}finally{F(!1)}}},[b,C]),O=(0,l.useMemo)(()=>{if(!d||!C)return{};let e={};for(let a in C.filter(e=>"cup"===e.league.type.toLowerCase()||"league"===e.league.type.toLowerCase()).forEach(a=>{let t,s=a.league.name.toLowerCase(),l=a.country.name.toLowerCase();e[t=e3.some(e=>s.includes(e))||"world"===l?"World":e4[a.country.name]||"Other"]||(e[t]={});let r=a.country.name||"N/A";e[t][r]||(e[t][r]=[]),e[t][r].push(a)}),e)for(let t in e[a])e[a][t].sort((e,a)=>{let t=e9(e.league.name),s=e9(a.league.name);if(t!==s)return t-s;let l=L("league",e.league.id,e.league.name),r=L("league",a.league.id,a.league.name);return l.localeCompare(r,"ar")});return e},[C,L,d]),_=(0,l.useCallback)(async()=>{if(!T){G(!0),b({title:"جاري جلب بيانات المنتخبات...",description:"قد تستغرق هذه العملية دقيقة في المرة الأولى."});try{let e=await fetch("/api/football/teams?country=");if(!e.ok)throw Error("Failed to fetch teams");let a=((await e.json()).response||[]).filter(e=>e.team.national).map(e=>e.team);I(a)}catch(e){console.error("Error fetching national teams:",e),b({variant:"destructive",title:"خطأ",description:"فشل في جلب بيانات المنتخبات الوطنية."})}finally{G(!1)}}},[b,T]),H=(0,l.useMemo)(()=>{if(!T||!d)return null;let e=T.map(e=>({...e,name:L("team",e.id,e.name)})),a={};return e.forEach(e=>{let t=e4[e.country||e.name]||"Other";a[t]||(a[t]=[]),a[t].push(e)}),Object.keys(a).forEach(e=>{a[e].sort((e,a)=>{let t=e8.includes(e.id),s=e8.includes(a.id);return t&&!s?-1:!t&&s?1:e.name.localeCompare(a.name,"ar")})}),a},[T,L,d]),Z=(0,l.useCallback)((e,a)=>{var t,s;let l=e.id;if(!j){let t=ef();t[a]||(t[a]={}),(null==(s=t[a])?void 0:s[l])?delete t[a][l]:"leagues"===a?t.leagues[l]={name:e.name,leagueId:l,logo:e.logo,notificationsEnabled:!0}:t.teams[l]={name:e.name,teamId:l,logo:e.logo,type:e.national?"National":"Club"},eg(t);return}let r=(0,S.H9)(N,"users",j.uid,"favorites","data"),i=!!(null==n||null==(t=n[a])?void 0:t[l]),o={["".concat(a,".").concat(l)]:i?(0,S.CL)():"leagues"===a?{name:e.name,leagueId:l,logo:e.logo,notificationsEnabled:!0}:{name:e.name,teamId:l,logo:e.logo,type:e.national?"National":"Club"}};(0,S.mZ)(r,o).catch(e=>{R.d.emit("permission-error",new M.$({path:r.path,operation:"update",requestResourceData:o}))})},[j,N,b,n]),J=e=>{var a,t;if(!j)return void b({title:"مستخدم زائر",description:"يرجى تسجيل الدخول لاستخدام هذه الميزة."});y({id:e.id,name:L("team",e.id,e.name),type:"crown",purpose:"crown",originalData:e,note:(null==n||null==(t=n.crownedTeams)||null==(a=t[e.id])?void 0:a.note)||""})},U=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!v||!N)return;let{purpose:l,originalData:r,originalName:i}=v;if("rename"===l&&h){let s=(0,S.H9)(N,"".concat(e,"Customizations"),String(a)),l={customName:t};(t&&t.trim()&&t!==i?(0,S.BN)(s,l):(0,S.kd)(s)).then(()=>p()).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"write",requestResourceData:l}))})}else if("crown"===l&&j){var o;let e,t=Number(a),l=JSON.parse(JSON.stringify(n||{}));if(l.crownedTeams||(l.crownedTeams={}),null==(o=l.crownedTeams)?void 0:o[t])delete l.crownedTeams[t],e={["crownedTeams.".concat(t)]:(0,S.CL)()};else{let a={teamId:t,name:r.name,logo:r.logo,note:s};l.crownedTeams[t]=a,e={["crownedTeams.".concat(t)]:a}}if(j&&N&&!j.isAnonymous){let a=(0,S.H9)(N,"users",j.uid,"favorites","data");(0,S.mZ)(a,e).catch(t=>{R.d.emit("permission-error",new M.$({path:a.path,operation:"update",requestResourceData:e}))})}m(l)}y(null)},V=(e,a,t,s)=>{h&&y({type:e,id:a,name:t,originalName:s||t,purpose:"rename"})},K=async()=>{h&&(sessionStorage.removeItem("goalstack_all_competitions_cache"),sessionStorage.removeItem("goalstack_national_teams_cache"),b({title:"بدء التحديث...",description:"جاري تحديث بيانات البطولات والمنتخبات."}),A(null),I(null),await $(),await _(),b({title:"نجاح",description:"تم تحديث البيانات بنجاح."}))};return n&&d?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"البطولات",onBack:t,canGoBack:i,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,favorites:n,customNames:d,setFavorites:m,onCustomNameChange:p,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.$,{size:"icon",variant:"ghost",onClick:K,children:(0,s.jsx)(eW.A,{className:"h-5 w-5"})}),(0,s.jsx)(B.$,{size:"icon",variant:"ghost",onClick:()=>k(!0),children:(0,s.jsx)(e$.A,{className:"h-5 w-5"})})]}),(0,s.jsx)(sa,{})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,s.jsx)(eQ,{type:"multiple",className:"w-full space-y-2",children:(0,s.jsxs)(eX,{value:"national-teams-section",className:"rounded-lg border bg-card/50",children:[(0,s.jsx)(e0,{className:"px-4 py-3 hover:no-underline",onClick:()=>_(),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(e_.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("h3",{className:"text-lg font-bold",children:"المنتخبات"})]})}),(0,s.jsx)(e1,{className:"p-2",children:(0,s.jsx)(eQ,{type:"multiple",className:"w-full space-y-2",children:z?(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):H?e5.filter(e=>H[e]).map(e=>(0,s.jsxs)(eX,{value:"national-".concat(e),className:"rounded-lg border bg-card/50",children:[(0,s.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,s.jsx)(e0,{className:"flex-1 hover:no-underline p-0",children:(0,s.jsx)("h3",{className:"text-lg font-bold",children:L("continent",e,e)})}),h&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-9 w-9 ml-2",onClick:a=>{a.stopPropagation(),V("continent",e,L("continent",e,e))},children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(e1,{className:"p-1",children:(0,s.jsx)("ul",{className:"flex flex-col",children:H[e].map(e=>{var t,l;let r=!!(null==n||null==(t=n.teams)?void 0:t[e.id]),i=!!(null==n||null==(l=n.crownedTeams)?void 0:l[e.id]),o=e.country||e.name;return(0,s.jsxs)("li",{className:"flex w-full items-center justify-between p-3 h-12 hover:bg-accent/80 transition-colors rounded-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>a("TeamDetails",{teamId:e.id}),children:[(0,s.jsx)(f,{className:"h-6 w-6 bg-white",children:(0,s.jsx)(g,{src:e.logo,alt:e.name})}),(0,s.jsx)("span",{className:"text-sm truncate",children:e.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[h&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),V("country",o,L("country",o,o),o)},children:(0,s.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground/80"})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:a=>{a.stopPropagation(),J(e)},children:(0,s.jsx)(W.A,{className:(0,u.cn)("h-5 w-5 text-muted-foreground/60",i&&"fill-current text-yellow-400")})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:a=>{a.stopPropagation(),Z(e,"teams")},children:(0,s.jsx)(c.A,{className:r?"h-5 w-5 text-yellow-400 fill-current":"h-5 w-5 text-muted-foreground/50"})})]})]},e.id)})})})]},"national-".concat(e))):(0,s.jsx)("p",{className:"p-4 text-center text-muted-foreground",children:"اضغط على زر الفتح لعرض المنتخبات."})})})]})}),(0,s.jsx)(eQ,{type:"multiple",className:"w-full space-y-2",children:(0,s.jsxs)(eX,{value:"club-competitions-section",className:"rounded-lg border bg-card/50",children:[(0,s.jsx)(e0,{className:"px-4 py-3 hover:no-underline",onClick:()=>$(),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("h3",{className:"text-lg font-bold",children:"البطولات"})]})}),(0,s.jsx)(e1,{className:"p-2",children:(0,s.jsx)(eQ,{type:"multiple",className:"w-full space-y-2",children:D?(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):C?e5.filter(e=>O[e]).map(e=>(0,s.jsxs)(eX,{value:"club-".concat(e),className:"rounded-lg border bg-card/50",children:[(0,s.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,s.jsx)(e0,{className:"flex-1 hover:no-underline p-0",children:(0,s.jsx)("h3",{className:"text-lg font-bold",children:L("continent",e,e)})}),h&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-9 w-9 ml-2",onClick:a=>{a.stopPropagation(),V("continent",e,L("continent",e,e))},children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(e1,{className:"p-2 space-y-2",children:(0,s.jsx)(eQ,{type:"multiple",className:"w-full space-y-2",children:Object.keys(O[e]).sort((e,a)=>{let t=e6.includes(e),s=e6.includes(a);return t&&!s?-1:!t&&s?1:L("country",e,e).localeCompare(L("country",a,a),"ar")}).map(t=>(0,s.jsxs)(eX,{value:"country-".concat(t),className:"rounded-lg border bg-background/50",children:[(0,s.jsxs)("div",{className:"flex items-center px-3 py-2.5",children:[(0,s.jsx)(e0,{className:"flex-1 hover:no-underline p-0 text-base",children:(0,s.jsx)("span",{className:"font-semibold",children:L("country",t,t)})}),h&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7 ml-2",onClick:e=>{e.stopPropagation(),V("country",t,L("country",t,t))},children:(0,s.jsx)(q.A,{className:"h-3 w-3"})})]}),(0,s.jsx)(e1,{className:"p-1",children:O[e][t].map(e=>{var l;let{league:r}=e;return(0,s.jsx)(e2,{league:{leagueId:r.id,name:L("league",r.id,r.name),logo:r.logo,countryName:t},isFavorited:!!(null==n||null==(l=n.leagues)?void 0:l[r.id]),onFavoriteToggle:()=>Z(r,"leagues"),onRename:()=>V("league",r.id,L("league",r.id,r.name),r.name),onClick:()=>a("CompetitionDetails",{title:L("league",r.id,r.name),leagueId:r.id,logo:r.logo}),isAdmin:h},r.id)})})]},t))})})]},"club-".concat(e))):(0,s.jsx)("p",{className:"p-4 text-center text-muted-foreground",children:"اضغط على زر الفتح لعرض البطولات."})})})]})})]}),v&&(0,s.jsx)(ec,{isOpen:!!v,onOpenChange:e=>!e&&y(null),item:v,onSave:(e,a,t,s)=>U(e,a,t,s||"")}),(0,s.jsx)(eV,{isOpen:w,onOpenChange:e=>{k(e),e||(A(null),$())}})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"البطولات",onBack:t,canGoBack:i}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]})}},News:{component:function(e){let{navigate:a,goBack:t,canGoBack:i}=e,{isAdmin:n}=(0,r.useAdmin)(),{db:o}=(0,r.useFirestore)(),[c,d]=(0,l.useState)([]),[m,u]=(0,l.useState)(!0),[p,h]=(0,l.useState)(null),{toast:f}=(0,ed.dj)();(0,l.useEffect)(()=>{if(!o)return void u(!1);u(!0);let e=(0,S.rJ)(o,"news"),a=(0,S.P)(e,(0,S.My)("timestamp","desc"));(0,S.GG)(a).then(e=>{d(e.docs.map(e=>({id:e.id,...e.data()}))),u(!1)}).catch(e=>{console.error("Error fetching news:",e);let a=new M.$({path:"news",operation:"list"});R.d.emit("permission-error",a),u(!1)})},[o]);let g=e=>{if(!o)return;h(e);let a=(0,S.H9)(o,"news",e);(0,S.kd)(a).then(()=>{f({title:"نجاح",description:"تم حذف الخبر بنجاح."}),d(a=>a.filter(a=>a.id!==e))}).catch(e=>{let t=new M.$({path:a.path,operation:"delete"});R.d.emit("permission-error",t)}).finally(()=>h(null))};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"أخبار",onBack:t,canGoBack:i,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:m?Array.from({length:3}).map((e,a)=>(0,s.jsxs)(e7.Zp,{children:[(0,s.jsxs)(e7.aR,{children:[(0,s.jsx)(eA,{className:"aspect-video w-full mb-4 rounded-md"}),(0,s.jsx)(eA,{className:"h-6 w-4/5"})]}),(0,s.jsx)(e7.Wu,{children:(0,s.jsx)(eA,{className:"h-4 w-full"})}),(0,s.jsx)(e7.wL,{children:(0,s.jsx)(eA,{className:"h-4 w-24"})})]},a)):c.length>0?c.map(e=>(0,s.jsxs)(e7.Zp,{children:[e.imageUrl&&(0,s.jsx)(e7.aR,{children:(0,s.jsx)("div",{className:"relative aspect-video w-full mb-4",children:(0,s.jsx)(ae.default,{src:e.imageUrl,alt:e.title,fill:!0,className:"rounded-md object-cover","data-ai-hint":e.imageHint||"football match"})})}),(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{children:e.title})}),(0,s.jsx)(e7.Wu,{children:(0,s.jsx)("p",{className:"text-muted-foreground whitespace-pre-line",children:e.content})}),(0,s.jsxs)(e7.wL,{className:"flex justify-between items-center",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.timestamp?(0,as.m)(e.timestamp.toDate(),{addSuffix:!0,locale:C.ar}):""}),n&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(ar,{children:[(0,s.jsx)(ai,{asChild:!0,children:(0,s.jsx)(B.$,{variant:"destructive",size:"icon",disabled:p===e.id,children:p===e.id?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(aa.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(ac,{children:[(0,s.jsxs)(ad,{children:[(0,s.jsx)(au,{children:"هل أنت متأكد؟"}),(0,s.jsx)(ap,{children:"لا يمكن التراجع عن هذا الإجراء. سيتم حذف هذا الخبر بشكل نهائي."})]}),(0,s.jsxs)(am,{children:[(0,s.jsx)(ah,{children:"إلغاء"}),(0,s.jsx)(ax,{onClick:()=>g(e.id),children:"حذف"})]})]})]}),(0,s.jsx)(B.$,{variant:"outline",size:"icon",onClick:()=>a("AddEditNews",{article:e,isEditing:!0}),children:(0,s.jsx)(at.A,{className:"h-4 w-4"})})]})]})]},e.id)):(0,s.jsxs)("div",{className:"text-center text-muted-foreground pt-10",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:"لا توجد أخبار حاليًا."}),n&&(0,s.jsx)("p",{children:"انقر على زر الإضافة لبدء نشر الأخبار."})]})}),n&&(0,s.jsx)(B.$,{className:"absolute bottom-24 right-4 h-14 w-14 rounded-full shadow-lg",size:"icon",onClick:()=>a("AddEditNews",{isEditing:!1}),children:(0,s.jsx)(e$.A,{className:"h-6 w-6"})})]})}},Settings:{component:function(e){let{navigate:a,goBack:t,canGoBack:l}=e,{toast:r}=(0,ed.dj)(),i=[{label:"الملف الشخصي",icon:eO.A,action:e=>e("Profile")},{label:"كل البطولات",icon:o.A,action:e=>e("AllCompetitions")},{label:"الإعدادات العامة",icon:af.A,action:e=>e("GeneralSettings")}],n=[{label:"سياسة الخصوصية",icon:ag.A,action:e=>e("PrivacyPolicy")},{label:"شروط الخدمة",icon:aj.A,action:e=>e("TermsOfService")}],c=async()=>{try{await ay(),r({title:"تم تسجيل الخروج",description:"نأمل رؤيتك مرة أخرى قريبا."})}catch(e){r({variant:"destructive",title:"فشل تسجيل الخروج",description:"حدث خطأ أثناء تسجيل الخروج. يرجى المحاولة مرة أخرى."})}};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"المزيد",onBack:t,canGoBack:l,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[(0,s.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,s.jsxs)("button",{onClick:()=>e.action(a),className:"flex w-full items-center justify-between rounded-lg bg-card p-4 text-right transition-colors hover:bg-accent/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(e.icon,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,s.jsx)(T.A,{className:"h-5 w-5"})})]},e.label))}),(0,s.jsxs)("div",{className:"pt-4",children:[(0,s.jsx)("p",{className:"px-4 pb-2 text-sm font-semibold text-muted-foreground",children:"قانوني"}),(0,s.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,s.jsxs)("button",{onClick:()=>e.action(a),className:"flex w-full items-center justify-between rounded-lg bg-card p-4 text-right transition-colors hover:bg-accent/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(e.icon,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:(0,s.jsx)(T.A,{className:"h-5 w-5"})})]},e.label))})]}),(0,s.jsx)("div",{className:"pt-8",children:(0,s.jsxs)(ar,{children:[(0,s.jsx)(ai,{asChild:!0,children:(0,s.jsxs)(B.$,{variant:"destructive",className:"w-full gap-2",children:[(0,s.jsx)(aN.A,{className:"h-5 w-5"}),"تسجيل الخروج"]})}),(0,s.jsxs)(ac,{children:[(0,s.jsxs)(ad,{children:[(0,s.jsx)(au,{children:"هل أنت متأكد؟"}),(0,s.jsx)(ap,{children:"سيؤدي هذا الإجراء إلى تسجيل خروجك من حسابك."})]}),(0,s.jsxs)(am,{children:[(0,s.jsx)(ah,{children:"إلغاء"}),(0,s.jsx)(ax,{onClick:c,children:"متابعة"})]})]})]})})]})]})}},CompetitionDetails:{component:function(e){var a;let{navigate:t,goBack:r,canGoBack:i,title:n,leagueId:o,logo:d,favorites:m,customNames:p,setFavorites:h,onCustomNameChange:b}=e,{isAdmin:v}=(0,A.z8)(),{user:y}=(0,A.As)(),{db:w}=(0,A.jt)(),{toast:k}=(0,ed.dj)(),[T,I]=(0,l.useState)(!0),[P,D]=(0,l.useState)(n),[F,z]=(0,l.useState)(null),[G,L]=(0,l.useState)(!1),[$,O]=(0,l.useState)(!1),[_,H]=(0,l.useState)([]),[Z,J]=(0,l.useState)([]),[U,V]=(0,l.useState)([]),[K,Y]=(0,l.useState)([]),[Q,X]=(0,l.useState)(aI),ee=(0,l.useRef)(null),ea=(0,l.useRef)({});(0,l.useEffect)(()=>{let e=!0;return(async()=>{if(!o)return I(!1);I(!0);try{var a,t;let[s,l,r,i]=await Promise.all([fetch("/api/football/standings?league=".concat(o,"&season=").concat(Q)),fetch("/api/football/players/topscorers?league=".concat(o,"&season=").concat(Q)),fetch("/api/football/fixtures?league=".concat(o,"&season=").concat(Q)),fetch("/api/football/teams?league=".concat(o,"&season=").concat(Q))]);if(!e)return;let n=await s.json(),c=await l.json(),d=await r.json(),m=await i.json(),u=(null==(t=n.response[0])||null==(a=t.league)?void 0:a.standings[0])||[],p=c.response||[],x=m.response||[],h=[...d.response||[]].sort((e,a)=>e.fixture.timestamp-a.fixture.timestamp);J(u),V(p),Y(x),H(h)}catch(a){console.error("Failed to fetch competition details:",a),e&&k({variant:"destructive",title:"خطأ",description:"فشل في تحميل بيانات البطولة."})}finally{e&&I(!1)}})(),()=>{e=!1}},[o,Q,k]);let et=(0,l.useCallback)((e,a,t)=>{var s;if(!p||!a)return t;let l="".concat(e,"s"),r=p[l],i=null==r?void 0:r.get(a);if(i)return i;let n=null==(s=ep[l])?void 0:s[a];return n||t},[p]);(0,l.useEffect)(()=>{o&&n&&D(et("league",o,n))},[p,o,n,et]);let es=(0,l.useMemo)(()=>_.reduce((e,a)=>{let t=(0,N.GP)(new Date(1e3*a.fixture.timestamp),"yyyy-MM-dd");return e[t]||(e[t]=[]),e[t].push(a),e},{}),[_]);(0,l.useEffect)(()=>{if(T||0===Object.keys(es).length)return;let e=Object.keys(es).sort(),a=(0,N.GP)(new Date,"yyyy-MM-dd"),t=e.find(e=>e>=a);if(!t&&e.length>0&&(t=e[e.length-1]),t&&ee.current&&ea.current[t]){let e=ee.current,a=ea.current[t];a&&setTimeout(()=>{let t=e.offsetTop;e.scrollTop=a.offsetTop-t},100)}},[T,es]);let el=(0,l.useCallback)(e=>{var a;let t=e.id;if(!y){let a=JSON.parse(JSON.stringify(ef()));a.teams||(a.teams={}),a.teams[t]?delete a.teams[t]:a.teams[t]={teamId:t,name:e.name,logo:e.logo,type:e.national?"National":"Club"},eg(a);return}let s=(0,S.H9)(w,"users",y.uid,"favorites","data"),l=!!(null==m||null==(a=m.teams)?void 0:a[t]),r={["teams.".concat(t)]:l?(0,S.CL)():{teamId:t,name:e.name,logo:e.logo,type:e.national?"National":"Club"}};(0,S.mZ)(s,r).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"update",requestResourceData:r}))})},[y,w,k,m]),er=(0,l.useCallback)(()=>{var e,a;if(!o||!P||!d)return;if(!y){let e=JSON.parse(JSON.stringify(ef()));e.leagues||(e.leagues={}),(null==(a=e.leagues)?void 0:a[o])?delete e.leagues[o]:e.leagues[o]={name:n||P,leagueId:o,logo:d,notificationsEnabled:!0},eg(e);return}let t=(0,S.H9)(w,"users",y.uid,"favorites","data"),s=!!(null==m||null==(e=m.leagues)?void 0:e[o]),l={["leagues.".concat(o)]:s?(0,S.CL)():{name:n||P,leagueId:o,logo:d,notificationsEnabled:!0}};(0,S.mZ)(t,l).catch(e=>{R.d.emit("permission-error",new M.$({path:t.path,operation:"update",requestResourceData:l}))})},[o,P,d,n,y,w,k,m]),ei=e=>{var a,t;if(!y)return void k({title:"مستخدم زائر",description:"يرجى تسجيل الدخول لاستخدام هذه الميزة."});z({id:e.id,name:et("team",e.id,e.name),type:"crown",purpose:"crown",originalData:e,note:(null==m||null==(t=m.crownedTeams)||null==(a=t[e.id])?void 0:a.note)||""})},en=(e,a,t)=>{if(v)if("team"===e){let s=et("team",a,t.name);z({id:a,name:s,type:e,purpose:"rename",originalData:t,originalName:t.name})}else if("player"===e){let s=et("player",a,t.name);z({id:a,name:s,type:e,purpose:"rename",originalData:t,originalName:t.name})}else"league"===e&&o&&z({type:"league",id:o,name:P||"",purpose:"rename",originalData:{name:n},originalName:n})},eo=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!F||!w)return;let{purpose:l,originalData:r,originalName:i}=F;if("rename"===l&&v){let s=(0,S.H9)(w,"".concat(e,"Customizations"),String(a)),l={customName:t};(t&&t.trim()&&t!==i?(0,S.BN)(s,l):(0,S.kd)(s)).then(()=>b()).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"write",requestResourceData:l}))})}else if("crown"===l&&y){var n;let e=Number(a),t=JSON.parse(JSON.stringify(m||{}));t.crownedTeams||(t.crownedTeams={});let l=!!(null==(n=t.crownedTeams)?void 0:n[e]);if(l?delete t.crownedTeams[e]:t.crownedTeams[e]={teamId:e,name:r.name,logo:r.logo,note:s},h(t),y){if(w){let a=(0,S.H9)(w,"users",y.uid,"favorites","data"),s={["crownedTeams.".concat(e)]:l?(0,S.CL)():t.crownedTeams[e]};(0,S.mZ)(a,s).catch(e=>{R.d.emit("permission-error",new M.$({path:a.path,operation:"update",requestResourceData:s}))})}}else eg(t)}z(null)},em=(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[o&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:er,children:(0,s.jsx)(c.A,{className:(0,u.cn)("h-5 w-5 text-muted-foreground",(null==m||null==(a=m.leagues)?void 0:a[o])&&"fill-current text-yellow-400")})}),v&&o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ar,{open:G,onOpenChange:L,children:[(0,s.jsx)(ai,{asChild:!0,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),L(!0)},children:(0,s.jsx)(aa.A,{className:"h-5 w-5 text-destructive"})})}),(0,s.jsxs)(ac,{children:[(0,s.jsxs)(ad,{children:[(0,s.jsx)(au,{children:"هل أنت متأكد؟"}),(0,s.jsx)(ap,{children:"سيتم حذف هذه البطولة من قائمة البطولات المدارة."})]}),(0,s.jsxs)(am,{children:[(0,s.jsx)(ah,{children:"إلغاء"}),(0,s.jsx)(ax,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>{if(!v||!w||!o)return;O(!0);let e=(0,S.H9)(w,"managedCompetitions",String(o));(0,S.kd)(e).then(()=>{k({title:"نجاح",description:"تم حذف البطولة بنجاح."}),r()}).catch(a=>{let t=new M.$({path:e.path,operation:"delete"});R.d.emit("permission-error",t)}).finally(()=>{O(!1),L(!1)})},disabled:$,children:$?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"حذف"})]})]})]}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:()=>en("league",o,{name:n}),children:(0,s.jsx)(q.A,{className:"h-5 w-5"})})]})]}),eu=Object.keys(es).sort();return m&&p?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"",onBack:r,canGoBack:i,actions:em}),F&&(0,s.jsx)(ec,{isOpen:!!F,onOpenChange:e=>!e&&z(null),item:F,onSave:(e,a,t,s)=>eo(e,Number(a),t,s||"")}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-1",children:[(0,s.jsx)(a_,{league:{name:P,logo:d},teamsCount:K.length}),(0,s.jsxs)(eZ,{defaultValue:"matches",className:"w-full",children:[(0,s.jsx)("div",{className:"sticky top-0 bg-background z-10 px-1 pt-1",children:(0,s.jsxs)("div",{className:"bg-card rounded-b-lg border-x border-b shadow-md",children:[(0,s.jsx)(aO,{season:Q,onSeasonChange:X}),(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-4 rounded-none h-12 p-0 bg-transparent",children:[(0,s.jsx)(eU,{value:"matches",children:"المباريات"}),(0,s.jsx)(eU,{value:"standings",children:"الترتيب"}),(0,s.jsx)(eU,{value:"scorers",children:"الهدافين"}),(0,s.jsx)(eU,{value:"teams",children:"الفرق"})]})]})}),(0,s.jsx)(eq,{value:"matches",className:"p-0 mt-0",children:(0,s.jsx)("div",{ref:ee,className:"max-h-[60vh] overflow-y-auto space-y-4 pt-2",children:T?(0,s.jsx)("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((e,a)=>(0,s.jsx)(eA,{className:"h-20 w-full"},a))}):eu.length>0?eu.map(e=>(0,s.jsxs)("div",{ref:a=>ea.current[e]=a,children:[(0,s.jsx)("h3",{className:"font-bold text-center text-sm text-muted-foreground my-2",children:(0,N.GP)(new Date(e),"EEEE, d MMMM yyyy",{locale:C.ar})}),(0,s.jsx)("div",{className:"space-y-2 px-1",children:es[e].map(e=>(0,s.jsx)(eP,{fixture:e,navigate:t},e.fixture.id))})]},e)):(0,s.jsx)("p",{className:"pt-4 text-center text-muted-foreground",children:"لا توجد مباريات لهذا الموسم."})})}),(0,s.jsx)(eq,{value:"standings",className:"p-0 mt-0",children:T?(0,s.jsx)("div",{className:"space-y-px p-4",children:Array.from({length:18}).map((e,a)=>(0,s.jsx)(eA,{className:"h-10 w-full"},a))}):Z.length>0?(0,s.jsxs)(ak,{children:[(0,s.jsx)(aC,{children:(0,s.jsxs)(aS,{children:[(0,s.jsx)(aE,{className:"text-center",children:"نقاط"}),(0,s.jsx)(aE,{className:"text-center",children:"خ"}),(0,s.jsx)(aE,{className:"text-center",children:"ت"}),(0,s.jsx)(aE,{className:"text-center",children:"ف"}),(0,s.jsx)(aE,{className:"text-center",children:"لعب"}),(0,s.jsx)(aE,{children:"الفريق"}),(0,s.jsx)(aE,{className:"w-[40px] text-right px-2",children:"#"})]})}),(0,s.jsx)(aA,{children:Z.map(e=>{var a;if(!(null==(a=e.team)?void 0:a.id))return null;let l=et("team",e.team.id,e.team.name);return(0,s.jsxs)(aS,{className:"cursor-pointer",onClick:()=>t("TeamDetails",{teamId:e.team.id,leagueId:o}),children:[(0,s.jsx)(aT,{className:"text-center font-bold",children:e.points}),(0,s.jsx)(aT,{className:"text-center",children:e.all.lose}),(0,s.jsx)(aT,{className:"text-center",children:e.all.draw}),(0,s.jsx)(aT,{className:"text-center",children:e.all.win}),(0,s.jsx)(aT,{className:"text-center",children:e.all.played}),(0,s.jsx)(aT,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)("p",{className:"truncate",children:l}),(0,s.jsxs)(f,{className:"h-6 w-6",children:[(0,s.jsx)(g,{src:e.team.logo,alt:e.team.name}),(0,s.jsx)(j,{children:e.team.name.substring(0,1)})]})]})}),(0,s.jsx)(aT,{className:"font-bold px-2",children:e.rank})]},e.team.id)})})]}):(0,s.jsx)("p",{className:"pt-4 text-center text-muted-foreground",children:"الترتيب غير متاح حالياً."})}),(0,s.jsx)(eq,{value:"scorers",className:"p-0 mt-0",children:T?(0,s.jsx)("div",{className:"space-y-px p-4",children:Array.from({length:10}).map((e,a)=>(0,s.jsx)(eA,{className:"h-12 w-full"},a))}):U.length>0?(0,s.jsxs)(ak,{children:[(0,s.jsx)(aC,{children:(0,s.jsxs)(aS,{children:[(0,s.jsx)(aE,{className:"text-center w-12",children:"الأهداف"}),(0,s.jsx)(aE,{children:"اللاعب"}),(0,s.jsx)(aE,{className:"w-8 text-right px-2",children:"#"})]})}),(0,s.jsx)(aA,{children:U.map((e,a)=>{var l,r,i,n;if(!(null==e||null==(l=e.player)?void 0:l.id))return null;let o=et("player",e.player.id,e.player.name),c=et("team",null==(r=e.statistics[0])?void 0:r.team.id,null==(i=e.statistics[0])?void 0:i.team.name);return(0,s.jsxs)(aS,{className:"cursor-pointer",onClick:()=>t("PlayerDetails",{playerId:e.player.id}),children:[(0,s.jsx)(aT,{className:"font-bold text-lg text-center",children:null==(n=e.statistics[0])?void 0:n.goals.total}),(0,s.jsx)(aT,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3 justify-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold truncate text-right",children:o}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate text-right",children:c})]}),(0,s.jsxs)(f,{className:"h-10 w-10",children:[(0,s.jsx)(g,{src:e.player.photo,alt:e.player.name}),(0,s.jsx)(j,{children:e.player.name.substring(0,2)})]})]})}),(0,s.jsx)(aT,{className:"font-bold text-right px-2",children:a+1})]},e.player.id)})})]}):(0,s.jsx)("p",{className:"pt-4 text-center text-muted-foreground",children:"قائمة الهدافين غير متاحة."})}),(0,s.jsx)(eq,{value:"teams",className:"mt-0",children:T?(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:Array.from({length:12}).map((e,a)=>(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 rounded-lg border bg-card p-4",children:[(0,s.jsx)(eA,{className:"h-16 w-16 rounded-full"}),(0,s.jsx)(eA,{className:"h-4 w-24"})]},a))}):K.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 p-4",children:K.map(e=>{var a,l;let{team:r}=e;if(!r)return null;let i=et("team",r.id,r.name),n=!!(null==m||null==(a=m.teams)?void 0:a[r.id]),d=!!(null==m||null==(l=m.crownedTeams)?void 0:l[r.id]);return(0,s.jsxs)("div",{className:"relative flex flex-col items-center gap-2 rounded-lg border bg-card p-4 text-center cursor-pointer",onClick:()=>t("TeamDetails",{teamId:r.id,leagueId:o}),children:[(0,s.jsxs)(f,{className:"h-16 w-16",children:[(0,s.jsx)(g,{src:r.logo,alt:r.name}),(0,s.jsx)(j,{children:r.name.substring(0,2)})]}),v&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-8 w-8",onClick:e=>{e.stopPropagation(),en("team",r.id,r)},children:(0,s.jsx)(q.A,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"font-semibold text-sm",children:i}),(0,s.jsxs)("div",{className:"absolute top-1 left-1 flex flex-col gap-0.5",children:[(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),el(r)},children:(0,s.jsx)(c.A,{className:(0,u.cn)("h-5 w-5",n?"text-yellow-400 fill-current":"text-muted-foreground/50")})}),(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),ei(r)},children:(0,s.jsx)(W.A,{className:(0,u.cn)("h-5 w-5",d?"text-yellow-400 fill-current":"text-muted-foreground/50")})})]})]},r.id)})}):(0,s.jsx)("p",{className:"pt-4 text-center text-muted-foreground",children:"الفرق غير متاحة."})})]})]})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"",onBack:r,canGoBack:i}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]})}},TeamDetails:{component:function(e){let{navigate:a,goBack:t,canGoBack:i,teamId:n,leagueId:o,favorites:c,customNames:d,setFavorites:m,onCustomNameChange:u}=e,{user:p}=(0,r.useAuth)(),{db:h}=(0,r.useFirestore)(),{isAdmin:f}=(0,r.useAdmin)(),{toast:g}=(0,ed.dj)(),[j,N]=(0,l.useState)(null),[b,v]=(0,l.useState)(!0),[y,w]=(0,l.useState)(null),[k,C]=(0,l.useState)(new Set),[A,E]=(0,l.useState)("details");(0,l.useEffect)(()=>{if(!n)return;let e=!0,a=null;if((async()=>{v(!0);try{let t=await fetch("/api/football/teams?id=".concat(n));if(!t.ok)throw Error("Team API fetch failed");let s=await t.json();if(e){var a;if(null==(a=s.response)?void 0:a[0]){let e=s.response[0];N(e)}else throw Error("Team not found in API response")}}catch(a){console.error("Error fetching team info:",a),e&&g({variant:"destructive",title:"خطأ",description:"فشل في تحميل بيانات الفريق."})}finally{e&&v(!1)}})(),h){let t=(0,S.rJ)(h,"predictionFixtures");a=(0,S.aQ)(t,a=>{let t=new Set;a.forEach(e=>t.add(Number(e.id))),e&&C(t)})}return()=>{e=!1,a&&a()}},[n,h,g]);let T=(0,l.useCallback)(e=>{if(!h)return;let a=e.fixture.id,t=k.has(a),s=(0,S.H9)(h,"predictionFixtures",String(a));if(t)(0,S.kd)(s).then(()=>{g({title:"تم إلغاء التثبيت",description:"تمت إزالة المباراة من التوقعات."})}).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"delete"}))});else{let a={fixtureData:e};(0,S.BN)(s,a).then(()=>{g({title:"تم التثبيت",description:"أصبحت المباراة متاحة الآن للتوقع."})}).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:"create",requestResourceData:a}))})}},[h,k,g]),I=(0,l.useCallback)((e,a,t)=>{if(!d)return t;let s="".concat(e,"s"),l=d[s],r=null==l?void 0:l.get(a);if(r)return r;let i=ep[s][a];return i||t},[d]);if(b||!j||!c||!d)return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"جاري التحميل...",onBack:t,canGoBack:i}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-1",children:[(0,s.jsx)(eA,{className:"h-48 w-full mb-4"}),(0,s.jsx)(eA,{className:"h-10 w-full"}),(0,s.jsx)("div",{className:"mt-4 p-4",children:(0,s.jsx)(eA,{className:"h-64 w-full"})})]})]});let P=I("team",n,j.team.name);return(0,s.jsxs)("div",{className:"flex flex-col bg-background h-full",children:[(0,s.jsx)(x.a,{title:"",onBack:t,canGoBack:i}),y&&(0,s.jsx)(ec,{isOpen:!!y,onOpenChange:e=>!e&&w(null),item:y,onSave:()=>{}}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-1 min-h-0",children:[(0,s.jsx)(aJ,{team:{...j.team,name:P},venue:j.venue,isAdmin:f,onRename:()=>{if(!j)return;let{team:e}=j;w({id:e.id,name:I("team",e.id,e.name),type:"team",purpose:"rename",originalData:e,originalName:e.name})}}),(0,s.jsxs)(eZ,{defaultValue:"details",onValueChange:E,className:"w-full",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(eU,{value:"details",children:"التفاصيل"}),(0,s.jsx)(eU,{value:"players",children:"اللاعبون"})]}),(0,s.jsx)(eq,{value:"details",className:"mt-4",children:(0,s.jsx)(aq,{teamId:n,leagueId:o,navigate:a,onPinToggle:T,pinnedPredictionMatches:k,isAdmin:f,customNames:d})}),(0,s.jsx)(eq,{value:"players",className:"mt-4",children:(0,s.jsx)(aU,{teamId:n,navigate:a,customNames:d,onCustomNameChange:u})})]})]})]})}},PlayerDetails:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,playerId:i}=e,{db:n}=(0,A.jt)(),[o,c]=(0,l.useState)("ملف اللاعب"),[d,m]=(0,l.useState)(null),[u,p]=(0,l.useState)([]),[h,f]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{i&&(async()=>{f(!0);try{let a=await fetch("/api/football/players?id=".concat(i,"&season=").concat(aI));if(a.ok){var e;let t=await a.json();if(null==(e=t.response)?void 0:e[0]){let e=t.response[0];m(e);let a=e.player.name;if(n){let e=(0,S.H9)(n,"playerCustomizations",String(i));try{let t=await (0,S.x7)(e);t.exists()?c(t.data().customName):c(a)}catch(s){let t=new M.$({path:e.path,operation:"get"});R.d.emit("permission-error",t),c(a)}}else c(a)}}let t=await fetch("/api/football/transfers?player=".concat(i));if(t.ok){let e=await t.json();p(e.response||[])}}catch(e){console.error("Error fetching player info:",e)}finally{f(!1)}})()},[n,i]),h)?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"جاري التحميل...",onBack:t,canGoBack:r}),(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsx)(eA,{className:"h-48 w-full"}),(0,s.jsx)(eA,{className:"h-40 w-full"}),(0,s.jsx)(eA,{className:"h-24 w-full"})]})]}):d?(0,s.jsxs)("div",{className:"flex flex-col bg-background h-full",children:[(0,s.jsx)(x.a,{title:o,onBack:t,canGoBack:r}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,s.jsx)(aK,{player:{...d.player,name:o}}),(0,s.jsx)(aY,{statistics:d.statistics,navigate:a}),(0,s.jsx)(aQ,{transfers:u,navigate:a})]})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"خطأ",onBack:t,canGoBack:r}),(0,s.jsx)("p",{className:"text-center p-8",children:"لم يتم العثور على بيانات اللاعب."})]})}},AdminFavoriteTeamDetails:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,teamId:i,teamName:n}=e,[o,c]=(0,l.useState)([]),[d,m]=(0,l.useState)(!0),{toast:u}=(0,ed.dj)(),p=(0,l.useRef)(null),h=(0,l.useRef)(null);return(0,l.useEffect)(()=>{(async()=>{if(!i)return m(!1);m(!0);try{let e="/api/football/fixtures?team=".concat(i,"&season=").concat(aI),a=await fetch(e);if(!a.ok)throw Error("API fetch failed with status: ".concat(a.status));let t=(await a.json()).response||[];t.sort((e,a)=>e.fixture.timestamp-a.fixture.timestamp),c(t)}catch(e){console.error("Error fetching fixtures:",e),u({variant:"destructive",title:"خطأ في الشبكة",description:"فشل في جلب المباريات. يرجى التحقق من اتصالك بالإنترنت."})}finally{m(!1)}})()},[i,u]),(0,l.useEffect)(()=>{!d&&o.length>0&&p.current&&h.current&&setTimeout(()=>{if(h.current&&p.current){let e=p.current.offsetTop,a=h.current.offsetTop;p.current.scrollTop=a-e-10}},100)},[d,o]),(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:n,onBack:t,canGoBack:r}),(0,s.jsx)("div",{ref:p,className:"flex-1 overflow-y-auto p-2",children:d?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin text-primary"})}):o.length>0?(0,s.jsx)("div",{className:"space-y-2",children:o.map((e,t)=>{let l=(ew(e.fixture.status)||new Date(1e3*e.fixture.timestamp)>new Date)&&!o.slice(0,t).some(e=>ew(e.fixture.status)||new Date(1e3*e.fixture.timestamp)>new Date);return(0,s.jsx)("div",{ref:l?h:null,children:(0,s.jsx)(eP,{fixture:e,navigate:a})},e.fixture.id)})}):(0,s.jsx)(e7.Zp,{className:"mt-4",children:(0,s.jsx)(e7.Wu,{className:"p-6",children:(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"لا توجد مباريات متاحة لهذا الفريق."})})})})]})}},Profile:{component:a0},SeasonPredictions:{component:function(e){let{navigate:a,goBack:t,canGoBack:l,headerActions:r}=e,i=(e,t)=>{a("SeasonTeamSelection",{leagueId:e,leagueName:t})};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"توقعات الموسم",onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:a1.map(e=>(0,s.jsx)(e7.Zp,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>i(e.id,e.name),children:(0,s.jsxs)(e7.aR,{className:"items-center text-center",children:[(0,s.jsx)("img",{src:e.logo,alt:e.name,className:"w-20 h-20 object-contain mb-4"}),(0,s.jsx)(e7.ZB,{className:"text-base",children:e.name})]})},e.id))})})]})}},SeasonTeamSelection:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,headerActions:i,leagueId:n,leagueName:o}=e,{user:c}=(0,A.As)(),{db:d}=(0,A.jt)(),{toast:m}=(0,ed.dj)(),[u,p]=(0,l.useState)([]),[h,f]=(0,l.useState)(!0),[g,j]=(0,l.useState)(!1),[N,b]=(0,l.useState)(),[v,y]=(0,l.useState)(),w=!!N,k=(0,l.useMemo)(()=>c&&d?(0,S.H9)(d,"seasonPredictions","".concat(c.uid,"_").concat(n,"_").concat(aI)):null,[c,d,n]);(0,l.useEffect)(()=>{f(!0),(async()=>{try{let e=await fetch("/api/football/teams?league=".concat(n,"&season=").concat(aI)),a=((await e.json()).response||[]).map(e=>({...e,team:{...e.team,name:ep.teams[e.team.id]||e.team.name}}));p(a)}catch(e){console.error("Failed to fetch teams:",e),m({variant:"destructive",title:"خطأ",description:"فشل في تحميل الفرق."})}finally{f(!1)}})()},[n,m]),(0,l.useEffect)(()=>{k&&(0,S.x7)(k).then(e=>{if(e.exists()){let a=e.data();a.predictedChampionId&&(b(a.predictedChampionId),y(a.predictedChampionId))}}).catch(e=>{let a=new M.$({path:k.path,operation:"get"});R.d.emit("permission-error",a)})},[k]);let C=e=>{if(w)return void m({variant:"destructive",title:"التوقع مقفل",description:"لقد قمت بتثبيت توقعك لهذا الموسم ولا يمكن تغييره."});y(a=>a===e?void 0:e)},T=(0,l.useCallback)(async()=>{if(w||!v||!k||!c||!d)return;j(!0);let e={userId:c.uid,leagueId:n,leagueName:o,season:aI,predictedChampionId:v,timestamp:new Date};await (0,S.BN)(k,{},{merge:!0}),(0,S.BN)(k,e,{merge:!0}).then(()=>{m({title:"تم حفظ التوقع",description:"تم تسجيل توقعك لبطل الموسم بنجاح."}),b(v)}).catch(a=>{let t=new M.$({path:k.path,operation:"update",requestResourceData:e});R.d.emit("permission-error",t)}).finally(()=>{j(!1)})},[v,k,c,d,n,o,w,m]),I=(e,t)=>{a("SeasonPlayerSelection",{leagueId:n,leagueName:o,teamId:e,teamName:t})},P=!w&&void 0!==v;return h?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"اختيار بطل ".concat(o),onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"توقع بطل ".concat(o),onBack:t,canGoBack:!0}),(0,s.jsxs)("div",{className:"p-4 text-center text-sm text-muted-foreground border-b",children:[(0,s.jsx)("p",{children:w?"لقد قمت بتثبيت توقعك لهذا الدوري. يمكنك الآن اختيار الهداف.":"اختر الفريق البطل بالضغط على أيقونة الكأس."}),(0,s.jsx)("p",{className:"mt-2",children:"ثم اضغط على أي فريق لاختيار الهداف من لاعبيه."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:u.length>0?(0,s.jsx)(a2.Y1,{height:window.innerHeight-(P?220:150),itemCount:u.length,itemSize:68,width:"100%",children:e=>{let{index:a,style:t}=e,{team:l}=u[a];return l?(0,s.jsx)("div",{style:t,className:"px-4 py-1",children:(0,s.jsx)(a4,{team:l,isPredictedChampion:v===l.id,onChampionSelect:()=>C(l.id),onTeamClick:()=>I(l.id,l.name),disabled:w&&v!==l.id})}):null}}):(0,s.jsx)("p",{className:"text-center pt-8 text-muted-foreground",children:"لا توجد فرق متاحة لهذا الدوري."})}),P&&(0,s.jsx)("div",{className:"p-4 border-t bg-background/90 backdrop-blur-sm sticky bottom-0",children:(0,s.jsx)(B.$,{className:"w-full",size:"lg",onClick:T,disabled:g,children:g?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(aR.A,{className:"mr-2 h-4 w-4"})," حفظ التوقع"]})})})]})}},SeasonPlayerSelection:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,headerActions:i,leagueId:n,leagueName:o,teamId:c,teamName:d}=e,{user:m}=(0,A.As)(),{db:u}=(0,A.jt)(),{toast:p}=(0,ed.dj)(),[h,f]=(0,l.useState)([]),[g,j]=(0,l.useState)(!0),[N,b]=(0,l.useState)(!1),[v,y]=(0,l.useState)(),[w,k]=(0,l.useState)(),C=!!v,T=(0,l.useMemo)(()=>m&&u?(0,S.H9)(u,"seasonPredictions","".concat(m.uid,"_").concat(n,"_").concat(aI)):null,[m,u,n]);(0,l.useEffect)(()=>{(async()=>{j(!0);let e=new Map,a=1,t=1;try{for(;a<=t;){let s=await fetch("/api/football/players?team=".concat(c,"&season=").concat(aI,"&page=").concat(a)),l=await s.json();if(l.response&&l.response.forEach(a=>{if(!e.has(a.player.id)){let t={...a,player:{...a.player,name:ep.players[a.player.id]||a.player.name}};e.set(a.player.id,t)}}),l.paging&&l.paging.total>a)t=l.paging.total,a++;else break}f(Array.from(e.values()))}catch(e){console.error("Failed to fetch players:",e),p({variant:"destructive",title:"خطأ",description:"فشل في تحميل اللاعبين."})}finally{j(!1)}})()},[c,p]),(0,l.useEffect)(()=>{T&&(0,S.x7)(T).then(e=>{if(e.exists()){let a=e.data();a.predictedTopScorerId&&(y(a.predictedTopScorerId),k(a.predictedTopScorerId))}}).catch(e=>{let a=new M.$({path:T.path,operation:"get"});R.d.emit("permission-error",a)})},[T]);let I=e=>{if(C)return void p({variant:"destructive",title:"التوقع مقفل",description:"لقد قمت بتثبيت توقعك لهذا الموسم ولا يمكن تغييره."});k(a=>a===e?void 0:e)},P=(0,l.useCallback)(async()=>{if(C||!w||!T||!m||!u)return;b(!0);let e={userId:m.uid,leagueId:n,leagueName:o,season:aI,predictedTopScorerId:w,timestamp:new Date};await (0,S.BN)(T,{},{merge:!0}),(0,S.BN)(T,e,{merge:!0}).then(()=>{p({title:"تم حفظ التوقع",description:"تم تسجيل توقعك لهداف الموسم بنجاح."}),y(w)}).catch(a=>{let t=new M.$({path:T.path,operation:"update",requestResourceData:e});R.d.emit("permission-error",t)}).finally(()=>{b(!1)})},[w,T,m,u,n,o,C,p]),D=!C&&void 0!==w;return g?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"اختيار هداف من ".concat(d),onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"اختيار هداف من ".concat(d),onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground border-b",children:(0,s.jsx)("p",{children:C?"لقد قمت بتثبيت توقعك لهداف هذا الدوري.":"اختر الهداف المتوقع للدوري بالضغط على أيقونة الكرة."})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:h.length>0?(0,s.jsx)(a2.Y1,{height:window.innerHeight-(D?220:150),itemCount:h.length,itemSize:76,width:"100%",children:e=>{let{index:a,style:t}=e,l=h[a];if(!l)return null;let{player:r}=l;return(0,s.jsx)("div",{style:t,className:"px-4 py-1",children:(0,s.jsx)(a3,{player:r,isPredictedTopScorer:w===r.id,onScorerSelect:I,disabled:C&&w!==r.id})})}}):(0,s.jsx)("p",{className:"text-center pt-8 text-muted-foreground",children:"لا يوجد لاعبون متاحون لهذا الفريق."})}),D&&(0,s.jsx)("div",{className:"p-4 border-t bg-background/90 backdrop-blur-sm sticky bottom-0",children:(0,s.jsx)(B.$,{className:"w-full",size:"lg",onClick:P,disabled:N,children:N?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(aR.A,{className:"mr-2 h-4 w-4"})," حفظ توقع الهداف"]})})})]})}},AddEditNews:{component:function(e){let{goBack:a,canGoBack:t,article:r,isEditing:i}=e,[n,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[f,g]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),[b,v]=(0,l.useState)(!1),{db:y}=(0,A.jt)(),{toast:w}=(0,ed.dj)(),k=(0,l.useRef)(null);(0,l.useEffect)(()=>{i&&r&&(o(r.title),d(r.content),u(r.imageUrl||""),h(r.imageHint||""),N(r.imageUrl||null))},[i,r]);let C=async()=>{if(!n.trim()||!c.trim())return void w({variant:"destructive",title:"خطأ",description:"الرجاء ملء حقلي العنوان والمحتوى."});if(!y)return;v(!0);let e=m.trim()||void 0;f&&(e=j||void 0);let t={title:n.trim(),content:c.trim(),timestamp:new Date,...e&&{imageUrl:e},...p.trim()&&{imageHint:p.trim()}},s=(0,S.rJ)(y,"news");(i&&(null==r?void 0:r.id)?(0,S.BN)((0,S.H9)(s,r.id),t,{merge:!0}):(0,S.gS)(s,t)).then(()=>{w({title:"نجاح",description:i?"تم تحديث الخبر بنجاح.":"تم نشر الخبر بنجاح."}),a()}).catch(e=>{let a=new M.$({path:i&&(null==r?void 0:r.id)?"news/".concat(r.id):"news",operation:i?"update":"create",requestResourceData:t});R.d.emit("permission-error",a)}).finally(()=>{v(!1)})};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:i?"تعديل الخبر":"إضافة خبر جديد",onBack:a,canGoBack:!0}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"space-y-6 pt-6",children:[j&&(0,s.jsx)("div",{className:"relative aspect-video w-full",children:(0,s.jsx)(ae.default,{src:j,alt:"معاينة الصورة",fill:!0,className:"rounded-md object-cover"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"title",children:"العنوان"}),(0,s.jsx)(U,{id:"title",value:n,onChange:e=>o(e.target.value),placeholder:"عنوان الخبر الرئيسي"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"content",children:"المحتوى"}),(0,s.jsx)(eo,{id:"content",value:c,onChange:e=>d(e.target.value),placeholder:"اكتب تفاصيل الخبر هنا...",rows:10})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"imageUrl",children:"رابط الصورة (اختياري)"}),(0,s.jsx)(U,{id:"imageUrl",value:m,onChange:e=>u(e.target.value),placeholder:"https://example.com/image.jpg",dir:"ltr",disabled:!!f})]}),(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-muted"}),(0,s.jsx)("span",{className:"flex-shrink mx-4 text-xs text-muted-foreground",children:"أو"}),(0,s.jsx)("div",{className:"flex-grow border-t border-muted"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"fileUpload",children:"رفع صورة من الجهاز (اختياري)"}),(0,s.jsxs)(B.$,{variant:"outline",className:"w-full",onClick:()=>{var e;return null==(e=k.current)?void 0:e.click()},children:[(0,s.jsx)(a6.A,{className:"ml-2 h-4 w-4"}),f?"تم اختيار: ".concat(f.name):"اختيار ملف"]}),(0,s.jsx)(U,{id:"fileUpload",type:"file",ref:k,onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(t){g(t);let e=new FileReader;e.onloadend=()=>{N(e.result)},e.readAsDataURL(t)}},className:"hidden",accept:"image/*"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"imageHint",children:"تلميح للصورة (اختياري)"}),(0,s.jsx)(U,{id:"imageHint",value:p,onChange:e=>h(e.target.value),placeholder:"مثال: football match"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"كلمتان كحد أقصى لوصف الصورة لمساعدة الذكاء الاصطناعي."})]}),(0,s.jsx)(B.$,{onClick:C,disabled:b,className:"w-full",children:b?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):i?"حفظ التعديلات":"نشر الخبر"})]})})})]})}},ManagePinnedMatch:{component:function(e){let{goBack:a,canGoBack:t,headerActions:r,matchId:i}=e,[n,o]=(0,l.useState)({isEnabled:!0}),[c,d]=(0,l.useState)(!0),[m,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),{db:j}=(0,A.jt)(),{toast:N}=(0,ed.dj)(),b=(0,l.useRef)(null),v=(0,l.useRef)(null),y=!!i;(0,l.useEffect)(()=>{if(!j)return void d(!0);if(y&&i){d(!0);let e=(0,S.H9)(j,"pinnedIraqiMatches",i);(0,S.x7)(e).then(e=>{e.exists()&&o({id:e.id,...e.data()})}).catch(a=>{let t=new M.$({path:e.path,operation:"get"});R.d.emit("permission-error",t)}).finally(()=>{d(!1)})}else o({isEnabled:!0}),d(!1)},[j,i,y]);let w=(e,a)=>{o(t=>({...t,[e]:a}))},k=(e,a)=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){let e=new FileReader;e.onloadend=()=>{w("home"===a?"homeTeamLogo":"awayTeamLogo",e.result)},e.readAsDataURL(s)}},C=async()=>{var e;if(!j)return;u(!0);let t={isEnabled:null==(e=n.isEnabled)||e,homeTeamName:n.homeTeamName||"",homeTeamLogo:n.homeTeamLogo||"",awayTeamName:n.awayTeamName||"",awayTeamLogo:n.awayTeamLogo||"",competitionName:n.competitionName||"",matchDate:n.matchDate||"",matchTime:n.matchTime||""};(y&&i?(0,S.BN)((0,S.H9)(j,"pinnedIraqiMatches",i),t):(0,S.gS)((0,S.rJ)(j,"pinnedIraqiMatches"),t)).then(()=>{N({title:"نجاح",description:y?"تم تحديث المباراة المثبتة.":"تمت إضافة المباراة المثبتة."}),a()}).catch(e=>{let a=new M.$({path:"pinnedIraqiMatches/".concat(y?i:""),operation:y?"update":"create",requestResourceData:t});R.d.emit("permission-error",a)}).finally(()=>u(!1))},T=async()=>{if(!j||!y||!i)return;h(!0);let e=(0,S.H9)(j,"pinnedIraqiMatches",i);(0,S.kd)(e).then(()=>{N({title:"نجاح",description:"تم حذف المباراة المثبتة."}),a()}).catch(a=>{let t=new M.$({path:e.path,operation:"delete"});R.d.emit("permission-error",t)}).finally(()=>{h(!1),g(!1)})};return c?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:y?"تعديل المباراة المثبتة":"إضافة مباراة للتثبيت",onBack:a,canGoBack:!0}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:y?"تعديل المباراة المثبتة":"إضافة مباراة للتثبيت",onBack:a,canGoBack:!0,actions:y&&(0,s.jsxs)(ar,{open:f,onOpenChange:g,children:[(0,s.jsx)(ai,{asChild:!0,children:(0,s.jsx)(B.$,{variant:"destructive",size:"icon",children:(0,s.jsx)(aa.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(ac,{children:[(0,s.jsxs)(ad,{children:[(0,s.jsx)(au,{children:"هل أنت متأكد من الحذف؟"}),(0,s.jsx)(ap,{children:"سيؤدي هذا إلى حذف البطاقة بالكامل. لا يمكن التراجع عن هذا الإجراء."})]}),(0,s.jsxs)(am,{children:[(0,s.jsx)(ah,{children:"إلغاء"}),(0,s.jsx)(ax,{onClick:T,disabled:p,children:p?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"حذف"})]})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"space-y-6 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,s.jsxs)(en,{htmlFor:"isEnabled",className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{children:"تفعيل البطاقة"}),(0,s.jsx)("span",{className:"font-normal leading-snug text-muted-foreground",children:"قم بإلغاء التفعيل لإخفاء البطاقة مؤقتًا من شاشة العراق."})]}),(0,s.jsx)(a9,{id:"isEnabled",checked:n.isEnabled,onCheckedChange:e=>w("isEnabled",e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{children:"الفريق المضيف"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U,{value:n.homeTeamName||"",onChange:e=>w("homeTeamName",e.target.value),placeholder:"اسم الفريق المضيف"}),(0,s.jsx)(B.$,{variant:"outline",size:"icon",className:"flex-shrink-0",onClick:()=>{var e;return null==(e=b.current)?void 0:e.click()},children:n.homeTeamLogo?(0,s.jsx)(ae.default,{src:n.homeTeamLogo,alt:"",width:24,height:24}):(0,s.jsx)(a6.A,{className:"h-4 w-4"})}),(0,s.jsx)(U,{type:"file",ref:b,onChange:e=>k(e,"home"),className:"hidden",accept:"image/*"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{children:"الفريق الضيف"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U,{value:n.awayTeamName||"",onChange:e=>w("awayTeamName",e.target.value),placeholder:"اسم الفريق الضيف"}),(0,s.jsx)(B.$,{variant:"outline",size:"icon",className:"flex-shrink-0",onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},children:n.awayTeamLogo?(0,s.jsx)(ae.default,{src:n.awayTeamLogo,alt:"",width:24,height:24}):(0,s.jsx)(a6.A,{className:"h-4 w-4"})}),(0,s.jsx)(U,{type:"file",ref:v,onChange:e=>k(e,"away"),className:"hidden",accept:"image/*"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"competitionName",children:"اسم البطولة"}),(0,s.jsx)(U,{id:"competitionName",value:n.competitionName||"",onChange:e=>w("competitionName",e.target.value),placeholder:"مثال: دوري نجوم العراق"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"matchDate",children:"التاريخ"}),(0,s.jsx)(U,{id:"matchDate",value:n.matchDate||"",onChange:e=>w("matchDate",e.target.value),placeholder:"مثال: السبت، 25 مايو"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(en,{htmlFor:"matchTime",children:"الوقت"}),(0,s.jsx)(U,{id:"matchTime",value:n.matchTime||"",onChange:e=>w("matchTime",e.target.value),placeholder:"مثال: 09:00 مساءً"})]})]}),(0,s.jsx)(B.$,{onClick:C,disabled:m,className:"w-full",children:m?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"حفظ التغييرات"})]})})})]})}},MatchDetails:{component:function(e){let{goBack:a,canGoBack:t,fixtureId:r,navigate:i,onCustomNameChange:n}=e,[o,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),[u,p]=(0,l.useState)(null),[h,f]=(0,l.useState)(null),[g,j]=(0,l.useState)(null),[N,b]=(0,l.useState)(new Map),[v,y]=(0,l.useState)(null),[w,k]=(0,l.useState)(null),[C,E]=(0,l.useState)(!0),[T,I]=(0,l.useState)(!0),[P,D]=(0,l.useState)(!0),{isAdmin:F,db:z}=(0,A.z8)(),{toast:G}=(0,ed.dj)(),[L,$]=(0,l.useState)(null),O=(0,l.useCallback)(async()=>{if(!z)return void k({});try{let[e,a,t,s]=await Promise.all([(0,S.GG)((0,S.rJ)(z,"leagueCustomizations")),(0,S.GG)((0,S.rJ)(z,"teamCustomizations")),(0,S.GG)((0,S.rJ)(z,"playerCustomizations")),(0,S.GG)((0,S.rJ)(z,"coachCustomizations"))]),l={leagues:new Map,teams:new Map,players:new Map,coaches:new Map};e.forEach(e=>l.leagues.set(Number(e.id),e.data().customName)),a.forEach(e=>l.teams.set(Number(e.id),e.data().customName)),t.forEach(e=>l.players.set(Number(e.id),e.data().customName)),s.forEach(e=>l.coaches.set(Number(e.id),e.data().customName)),k(l)}catch(e){k({})}},[z]),_=(0,l.useCallback)((e,a,t)=>{var s,l;if(!w||!a)return t;let r=null==(s=w["".concat(e,"s")])?void 0:s.get(a);if(r)return r;let i=null==ep||null==(l=ep["".concat(e,"s")])?void 0:l[a];return i||t},[w]),H=(e,a,t)=>{if(!F||!z||!L)return;let s=(0,S.H9)(z,"".concat(e,"Customizations"),String(a)),l=L.originalName;(t&&t!==l?(0,S.BN)(s,{customName:t}):(0,S.kd)(s)).then(()=>{G({title:"تم تعديل الاسم",description:"قد تحتاج لإعادة التحميل لرؤية التغييرات فوراً."}),n(),O()}).catch(e=>{R.d.emit("permission-error",new M.$({path:s.path,operation:t&&t!==l?"create":"delete",requestResourceData:{customName:t}}))}),$(null)};(0,l.useEffect)(()=>{let e=new AbortController,a=e.signal;return(async()=>{if(r){E(!0);try{let e=await fetch("/api/football/fixtures?id=".concat(r),{signal:a});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();if(a.aborted)return;c(t.response[0]||null)}catch(e){a.aborted||console.error("Could not fetch fixture:",e)}finally{a.aborted||E(!1)}}})(),()=>e.abort()},[r]),(0,l.useEffect)(()=>{let e;if(!o||!z)return;let a=new AbortController,t=a.signal,s=async()=>{I(!0);try{await O();let e=async(e,a)=>{let s=[],l=1,r=1;for(;l<=r;)try{let n=await fetch("/api/football/players?team=".concat(e,"&season=").concat(a,"&page=").concat(l),{signal:t});if(t.aborted)return[];if(n.ok){var i;let e=await n.json();e.response&&s.push(...e.response),r=(null==(i=e.paging)?void 0:i.total)||1,l++}else break}catch(e){break}return s},[a,s,l,r,i]=await Promise.all([fetch("/api/football/fixtures/lineups?fixture=".concat(o.fixture.id),{signal:t}),fetch("/api/football/fixtures/events?fixture=".concat(o.fixture.id),{signal:t}),fetch("/api/football/fixtures/statistics?fixture=".concat(o.fixture.id),{signal:t}),e(o.teams.home.id,o.league.season),e(o.teams.away.id,o.league.season)]);if(t.aborted)return;let n=await a.json(),c=await s.json(),d=await l.json();if(t.aborted)return;let m=new Map;[...r,...i].forEach(e=>{e.player.id&&m.set(e.player.id,e)}),b(m),p(n.response),f(c.response),j(d.response)}catch(e){t.aborted||console.error("Could not fetch match details:",e)}finally{t.aborted||I(!1)}},l=async()=>{D(!0);try{var e,a,s;let l=await fetch("/api/football/standings?league=".concat(o.league.id,"&season=").concat(o.league.season),{signal:t});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let r=await l.json();if(t.aborted)return;m((null==(s=r.response[0])||null==(a=s.league)||null==(e=a.standings)?void 0:e[0])||null)}catch(e){t.aborted||console.error("Could not fetch standings:",e)}finally{t.aborted||D(!1)}};return r&&"string"==typeof r&&(e=(0,S.aQ)((0,S.H9)(z,"matchCustomizations",r),e=>{e.exists()?y(e.data().customStatus):y(null)})),s(),l(),()=>{a.abort(),e&&e()}},[o,z,O,r]);let Z=(0,l.useMemo)(()=>o&&w?{...o,league:{...o.league,name:_("league",o.league.id,o.league.name)},teams:{home:{...o.teams.home,name:_("team",o.teams.home.id,o.teams.home.name)},away:{...o.teams.away,name:_("team",o.teams.away.id,o.teams.away.name)}}}:null,[o,_,w]),J=(0,l.useMemo)(()=>d&&w?d.map(e=>({...e,team:{...e.team,name:_("team",e.team.id,e.team.name)}})):null,[d,_,w]),U=(0,l.useMemo)(()=>u&&w?u.map(e=>({...e,team:{...e.team,name:_("team",e.team.id,e.team.name)},coach:e.coach?{...e.coach,name:_("coach",e.coach.id,e.coach.name)}:e.coach,startXI:e.startXI.map(e=>({...e,player:{...e.player,name:_("player",e.player.id,e.player.name)}})),substitutes:e.substitutes.map(e=>({...e,player:{...e.player,name:_("player",e.player.id,e.player.name)}}))})):null,[u,_,w]),W=(e,a,t)=>{let s=_(e,a,t);$({type:e,id:a,name:s,originalName:t})};if(C)return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,s.jsx)(x.a,{title:"تفاصيل المباراة",onBack:a,canGoBack:t}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsx)(eA,{className:"h-48 w-full"})})]});if(!Z)return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,s.jsx)(x.a,{title:"تفاصيل المباراة",onBack:a,canGoBack:t}),(0,s.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"لم يتم العثور على المباراة."})]});let V=Z.teams.home.id,K=Z.teams.away.id,Y="NS"!==Z.fixture.status.short;return(0,s.jsx)("div",{className:"flex h-full flex-col bg-background",children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,s.jsx)(x.a,{title:"تفاصيل المباراة",onBack:a,canGoBack:t,actions:F&&(0,s.jsx)(B.$,{variant:"ghost",size:"icon",onClick:()=>W("status",Z.fixture.id,v||""),children:(0,s.jsx)(q.A,{className:"h-4 w-4"})})}),L&&(0,s.jsx)(ec,{isOpen:!!L,onOpenChange:()=>$(null),item:{...L,purpose:"rename"},onSave:(e,a,t)=>H(e,Number(a),t)}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,s.jsx)(tr,{fixture:Z,navigate:i,customStatus:v}),(0,s.jsxs)(eZ,{defaultValue:"lineups",className:"w-full",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(eU,{value:"details",children:"التفاصيل"}),(0,s.jsx)(eU,{value:"lineups",children:"التشكيلات"}),(0,s.jsx)(eU,{value:"timeline",children:"الأحداث"}),(0,s.jsx)(eU,{value:"standings",children:"الترتيب"})]}),(0,s.jsx)(eq,{value:"details",className:"pt-4",children:(0,s.jsx)(tn,{fixture:Z,statistics:g,loading:T})}),(0,s.jsx)(eq,{value:"lineups",className:"pt-4",children:(0,s.jsx)(td,{lineups:U,events:h,navigate:i,isAdmin:F,onRename:W,homeTeamId:V,awayTeamId:K,detailedPlayersMap:N,matchStarted:Y})}),(0,s.jsx)(eq,{value:"timeline",className:"pt-4",children:(0,s.jsx)(tc,{events:h,homeTeam:Z.teams.home,awayTeam:Z.teams.away})}),(0,s.jsx)(eq,{value:"standings",className:"pt-4",children:(0,s.jsx)(tm,{standings:J,homeTeamId:V,awayTeamId:K,navigate:i,loading:P})})]})]})]})})}},NotificationSettings:{component:function(e){var a,t;let{navigate:i,goBack:n,canGoBack:o,headerActions:c,favorites:m,customNames:u}=e,{user:p}=(0,r.useAuth)(),{db:h}=(0,r.useFirestore)(),N=(0,l.useCallback)((e,a,t)=>{var s;if(!u)return t;let l="".concat(e,"s"),r=u[l],i=null==r?void 0:r.get(a);if(i)return i;let n=null==(s=ep[l])?void 0:s[a];return n||t},[u]),b=(e,a)=>{var t,s,l,r,i;let n,o;if(!p||!h||!m)return;"leagues"===e?(n="leagues.".concat(a,".notificationsEnabled"),o=null==(l=null==(s=m.leagues)||null==(t=s[a])?void 0:t.notificationsEnabled)||l):(n="notificationsEnabled.".concat(a),o=null==(i=null==(r=m.notificationsEnabled)?void 0:r[a])||i);let c=!o,d=(0,S.H9)(h,"users",p.uid,"favorites","data"),u={[n]:c};(0,S.BN)(d,u,{merge:!0}).catch(e=>{let a=new M.$({path:d.path,operation:"update",requestResourceData:u});R.d.emit("permission-error",a)})},v=(0,l.useMemo)(()=>(null==m?void 0:m.leagues)&&u?Object.values(m.leagues).map(e=>({...e,name:N("league",e.leagueId,e.name)})):[],[m,u,N]),y=e=>{var a,t,l;let{item:r,type:i}=e,n=r.leagueId,o=null==(l=null==m||null==(t=m[i])||null==(a=t[n])?void 0:a.notificationsEnabled)||l;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(f,{className:"h-8 w-8",children:[(0,s.jsx)(g,{src:r.logo,alt:r.name,className:"object-contain p-1"}),(0,s.jsx)(j,{children:r.name.charAt(0)})]}),(0,s.jsx)(en,{htmlFor:"notif-".concat(n),className:"font-semibold cursor-pointer",children:r.name})]}),(0,s.jsx)(a9,{id:"notif-".concat(n),checked:o,onCheckedChange:()=>b(i,n)})]},n)};return m&&u?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"إعدادات الإشعارات",onBack:n,canGoBack:!0,actions:c}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto pt-4 space-y-6",children:[(0,s.jsxs)(e7.Zp,{className:"mx-4",children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{children:"الإشعارات العامة"})}),(0,s.jsx)(e7.Wu,{className:"divide-y p-0",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(en,{htmlFor:"notif-news",className:"font-semibold cursor-pointer",children:"إشعارات الأخبار"})]}),(0,s.jsx)(a9,{id:"notif-news",checked:null==(t=null==m||null==(a=m.notificationsEnabled)?void 0:a.news)||t,onCheckedChange:()=>b("general","news")})]})})]}),0===v.length?(0,s.jsx)("p",{className:"text-center text-muted-foreground pt-10 px-4",children:"أضف بطولات إلى مفضلتك للتحكم في إشعاراتها بشكل منفصل."}):(0,s.jsxs)(e7.Zp,{className:"mx-4",children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{children:"إشعارات البطولات المفضلة"})}),(0,s.jsx)(e7.Wu,{className:"p-0",children:(0,s.jsx)("div",{className:"rounded-lg border",children:v.map(e=>(0,s.jsx)(y,{item:e,type:"leagues"},e.leagueId))})})]})]})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"إعدادات الإشعارات",onBack:n,canGoBack:!0,actions:c}),(0,s.jsx)("div",{className:"p-4 space-y-4",children:Array.from({length:8}).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3",children:[(0,s.jsx)(eA,{className:"h-8 w-8 rounded-full"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(eA,{className:"h-4 w-3/4"})}),(0,s.jsx)(eA,{className:"h-6 w-12"})]},a))})]})}},GeneralSettings:{component:function(e){let{navigate:a,goBack:t,canGoBack:l,headerActions:i}=e,{theme:n,setTheme:o}=(0,tu.D)(),{isProUser:c}=(0,r.useAuth)(),{isAdmin:d,makeAdmin:m}=(0,r.useAdmin)(),{toast:u}=(0,ed.dj)();return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"الإعدادات العامة",onBack:t,canGoBack:!0,actions:i}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(tg.A,{className:"h-6 w-6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(e7.ZB,{children:"مظهر التطبيق"}),(0,s.jsx)(e7.BT,{children:"اختر المظهر المفضل لديك."})]})]})}),(0,s.jsx)(e7.Wu,{children:(0,s.jsxs)(th,{value:n,onValueChange:o,className:"grid grid-cols-3 gap-2 sm:gap-4",children:[(0,s.jsxs)(en,{htmlFor:"dark",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,s.jsx)(tf,{value:"dark",id:"dark",className:"sr-only"}),(0,s.jsx)(tj.A,{className:"mb-2 h-5 w-5"}),"داكن"]}),(0,s.jsxs)(en,{htmlFor:"light",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,s.jsx)(tf,{value:"light",id:"light",className:"sr-only"}),(0,s.jsx)(tN.A,{className:"mb-2 h-5 w-5"}),"فاتح"]}),(0,s.jsxs)(en,{htmlFor:"system",className:"flex flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,s.jsx)(tf,{value:"system",id:"system",className:"sr-only"}),(0,s.jsx)(tb.A,{className:"mb-2 h-5 w-5"}),"النظام"]})]})})]}),(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(tv.A,{className:"h-6 w-6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(e7.ZB,{children:"لغة التطبيق"}),(0,s.jsx)(e7.BT,{children:"اختر لغة العرض."})]})]})}),(0,s.jsxs)(e7.Wu,{children:[(0,s.jsxs)(th,{defaultValue:"ar",className:"grid grid-cols-2 gap-2 sm:gap-4",children:[(0,s.jsxs)(en,{htmlFor:"ar",className:"flex items-center justify-center gap-2 rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,s.jsx)(tf,{value:"ar",id:"ar"}),"العربية"]}),(0,s.jsxs)(en,{htmlFor:"en",className:"flex items-center justify-center gap-2 rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,s.jsx)(tf,{value:"en",id:"en"}),"English"]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-4 text-center",children:"ملاحظة: تغيير اللغة قيد التطوير حاليًا."})]})]}),(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ty.A,{className:"h-6 w-6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(e7.ZB,{children:"إعدادات الحساب"}),(0,s.jsx)(e7.BT,{children:"قم بترقية حسابك أو تعديل صلاحياتك."})]})]})}),(0,s.jsxs)(e7.Wu,{className:"space-y-4",children:[!c&&(0,s.jsxs)(B.$,{onClick:()=>a("GoPro"),className:"w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover:opacity-90",children:[(0,s.jsx)(tw.A,{className:"ml-2 h-4 w-4"}),"الترقية إلى النسخة الإحترافية"]}),d&&(0,s.jsx)("p",{className:"text-sm text-center text-muted-foreground",children:"أنت مدير بالفعل."})]})]})]})]})}},PrivacyPolicy:{component:tk.default},TermsOfService:{component:tC.default},GoPro:{component:function(e){let{navigate:a,goBack:t,canGoBack:i}=e,{toast:n}=(0,ed.dj)(),{setProUser:o}=(0,r.useAuth)(),[c,d]=(0,l.useState)(null),m=async(e,a)=>{d(e);try{await tA(e)?(await o(!0),n({title:"\uD83C\uDF89 تمت الترقية بنجاح!",description:"أصبحت الآن من مستخدمي نبض الملاعب برو."}),t()):n({variant:"destructive",title:"فشلت عملية الشراء",description:"حدث خطأ ما أثناء محاولة إتمام عملية الشراء."})}catch(e){n({variant:"destructive",title:"خطأ",description:e.message||"فشلت عملية الشراء. يرجى المحاولة مرة أخرى."})}finally{d(null)}};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"النسخة الاحترافية",onBack:t,canGoBack:i}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)(tw.A,{className:"mx-auto h-12 w-12 text-yellow-400"}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"نبض الملاعب برو"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"احصل على تجربة احترافية ومميزة."})]}),(0,s.jsxs)(e7.Zp,{children:[(0,s.jsx)(e7.aR,{children:(0,s.jsx)(e7.ZB,{children:"ميزات النسخة الاحترافية"})}),(0,s.jsx)(e7.Wu,{className:"space-y-3",children:tS.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(aR.A,{className:"h-5 w-5 text-green-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e})]},a))})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:tE.map(e=>(0,s.jsxs)(e7.Zp,{className:(0,u.cn)("flex flex-col",e.isPopular&&"border-primary border-2"),children:[e.isPopular&&(0,s.jsx)("div",{className:"bg-primary text-primary-foreground text-xs font-bold text-center py-1 rounded-t-lg",children:"الأكثر شيوعًا"}),(0,s.jsxs)(e7.aR,{className:"text-center",children:[(0,s.jsx)(e7.ZB,{className:"text-2xl",children:e.name}),(0,s.jsx)(e7.BT,{children:e.description})]}),(0,s.jsxs)(e7.Wu,{className:"flex-1 text-center",children:[(0,s.jsxs)("p",{className:"text-4xl font-bold",children:["$",e.price]}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:["/ ","شهري"===e.name?"شهر":"سنة"]})]}),(0,s.jsx)(e7.wL,{children:(0,s.jsx)(B.$,{className:"w-full",onClick:()=>m(e.identifier,e.name),disabled:!!c,children:c===e.identifier?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"اشترك الآن"})})]},e.name))})]})]})}},ManageTopScorers:{component:function(e){let{navigate:a,goBack:t,canGoBack:r,headerActions:i}=e,[n,o]=(0,l.useState)([]),[c,d]=(0,l.useState)(!0),[m,u]=(0,l.useState)(!1),{db:p}=(0,A.jt)(),{toast:h}=(0,ed.dj)(),N=(0,l.useRef)([]);(0,l.useEffect)(()=>{if(!p)return;d(!0);let e=(0,S.rJ)(p,"iraqiLeagueTopScorers"),a=(0,S.P)(e,(0,S.My)("rank","asc")),t=(0,S.aQ)(a,e=>{let a=new Map;e.docs.forEach(e=>{let t=e.data();if(t.rank&&t.rank>0&&t.rank<=20){let{rank:e,...s}=t;a.set(e,s)}}),o(Array.from({length:20},(e,t)=>a.get(t+1)||{playerName:"",teamName:"",goals:0,playerPhoto:""})),d(!1)},e=>{let a=new M.$({path:"iraqiLeagueTopScorers",operation:"list"});R.d.emit("permission-error",a),d(!1)});return()=>t()},[p]);let b=(e,a,t)=>{o(s=>{let l=[...s],r={...l[e],[a]:t};return l[e]=r,l})},v=(e,a)=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s){let e=new FileReader;e.onloadend=()=>{b(a,"playerPhoto",e.result)},e.readAsDataURL(s)}},y=async()=>{if(p){u(!0);try{let e=(0,S.wP)(p);(await (0,S.GG)((0,S.rJ)(p,"iraqiLeagueTopScorers"))).forEach(a=>{e.delete(a.ref)}),n.forEach((a,t)=>{if(a.playerName&&a.playerName.trim()){var s,l;let r=t+1,i=(0,S.H9)(p,"iraqiLeagueTopScorers",String(r)),n={rank:r,playerName:a.playerName.trim(),teamName:null!=(l=null==(s=a.teamName)?void 0:s.trim())?l:"",goals:Number(a.goals)||0};a.playerPhoto&&(n.playerPhoto=a.playerPhoto),e.set(i,n)}}),await e.commit(),h({title:"نجاح",description:"تم حفظ قائمة الهدافين."}),t()}catch(a){let e=new M.$({path:"iraqiLeagueTopScorers",operation:"write"});R.d.emit("permission-error",e),h({variant:"destructive",title:"فشل الحفظ",description:"حدث خطأ أثناء حفظ القائمة. تأكد من صلاحياتك."})}finally{u(!1)}}};return c?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"إدارة الهدافين",onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex justify-center items-center flex-1",children:(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin"})})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"إدارة الهدافين",onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:n.map((e,a)=>(0,s.jsx)(e7.Zp,{children:(0,s.jsxs)(e7.Wu,{className:"flex items-center gap-2 p-3",children:[(0,s.jsx)("span",{className:"font-bold text-lg w-8 text-center",children:a+1}),(0,s.jsx)("button",{onClick:()=>{var e;return null==(e=N.current[a])?void 0:e.click()},className:"flex-shrink-0",children:(0,s.jsxs)(f,{className:"h-12 w-12 cursor-pointer",children:[(0,s.jsx)(g,{src:e.playerPhoto}),(0,s.jsx)(j,{children:(0,s.jsx)(a6.A,{className:"h-5 w-5"})})]})}),(0,s.jsx)("input",{type:"file",ref:e=>N.current[a]=e,onChange:e=>v(e,a),className:"hidden",accept:"image/*"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(U,{placeholder:"اسم اللاعب",value:e.playerName||"",onChange:e=>b(a,"playerName",e.target.value)}),(0,s.jsx)(U,{placeholder:"اسم الفريق",value:e.teamName||"",onChange:e=>b(a,"teamName",e.target.value)})]}),(0,s.jsx)(U,{type:"number",placeholder:"الأهداف",value:e.goals||"",onChange:e=>b(a,"goals",Number(e.target.value)),className:"w-24 text-center"})]})},a))}),(0,s.jsx)("div",{className:"p-4 border-t bg-background",children:(0,s.jsx)(B.$,{className:"w-full",onClick:y,disabled:m,children:m?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):"حفظ القائمة"})})]})}},MyCountry:{component:function(e){let{navigate:a,goBack:t,canGoBack:i,favorites:n,setFavorites:o,customNames:c}=e,{user:d}=(0,r.useAuth)(),{db:m}=(0,r.useFirestore)(),[u,p]=(0,l.useState)(null),h=(0,l.useCallback)((e,a,t)=>{if(!c)return t;let s="".concat(e,"s"),l=c[s],r=null==l?void 0:l.get(a);if(r)return r;let i=ep[s][a];return i||t},[c]),f=(0,l.useMemo)(()=>(null==n?void 0:n.crownedTeams)?Object.values(n.crownedTeams).map(e=>({...e,name:h("team",e.teamId,e.name)})):[],[null==n?void 0:n.crownedTeams,h]);(0,l.useEffect)(()=>{f.length>0&&!u&&p(f[0].teamId),0===f.length&&p(null)},[f,u]);let g=(0,l.useCallback)(e=>{o(a=>{var t;if(!a)return{};let s=JSON.parse(JSON.stringify(a));if((null==(t=s.crownedTeams)?void 0:t[e])&&delete s.crownedTeams[e],d&&m&&!d.isAnonymous){let a=(0,S.H9)(m,"users",d.uid,"favorites","data");(0,S.mZ)(a,{["crownedTeams.".concat(e)]:(0,S.CL)()}).catch(t=>{R.d.emit("permission-error",new M.$({path:a.path,operation:"update",requestResourceData:{["crownedTeams.".concat(e)]:"DELETED"}}))})}else eg(s);return s})},[d,m,o]);return d?(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"ملعبي",onBack:t,canGoBack:i,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,favorites:n,customNames:c,setFavorites:o,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,s.jsx)("div",{className:"py-4 border-b",children:(0,s.jsx)(tq,{crownedTeams:f,onSelectTeam:e=>{p(e)},onRemove:g,selectedTeamId:u,navigate:a})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:u?(0,s.jsx)(tW,{teamId:u,navigate:a}):f.length>0&&(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground text-center p-4",children:(0,s.jsx)("p",{children:"اختر فريقًا من الأعلى لعرض مبارياته."})})})]})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"ملعبي",onBack:t,canGoBack:i}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[(0,s.jsx)(W.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"ميزة حصرية للمستخدمين المسجلين"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"قم بتسجيل الدخول لتتويج فرقك وبطولاتك المفضلة."}),(0,s.jsx)(B.$,{onClick:()=>a("Welcome"),children:"تسجيل الدخول"})]})]})}},Predictions:{component:function(e){let{navigate:a,goBack:t,canGoBack:i}=e,{user:n}=(0,r.useAuth)(),{isAdmin:o,db:c,isCheckingAdmin:d}=(0,r.useAdmin)(),{toast:m}=(0,ed.dj)(),[u,p]=(0,l.useState)("voting"),[h,f]=(0,l.useState)([]),[g,j]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),[y,w]=(0,l.useState)([]),[k,C]=(0,l.useState)(!0),[A,T]=(0,l.useState)({}),[I,D]=(0,l.useState)(!0),[F,z]=(0,l.useState)(t0(new Date)),[G,L]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(d)return;if(!c){C(!1),w([]);return}C(!0);let e=(0,S.P)((0,S.rJ)(c,"predictionFixtures")),a=(0,S.aQ)(e,e=>{w(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e&&e.fixtureData&&e.fixtureData.fixture)),C(!1)},e=>{R.d.emit("permission-error",new M.$({path:"predictionFixtures",operation:"list"})),C(!1)});return()=>a()},[c,o,d]),(0,l.useEffect)(()=>{if(!c||!n)return void D(!1);if(D(!0),0===y.length){T({}),D(!1);return}let e=y.map(e=>{let a=(0,S.H9)(c,"predictionFixtures",e.id,"userPredictions",n.uid);return(0,S.aQ)(a,a=>{a.exists()?T(t=>({...t,[e.id]:a.data()})):T(a=>{let t={...a};return delete t[e.id],t})},a=>console.warn("Could not listen to prediction for match ".concat(e.id),a))});return D(!1),()=>e.forEach(e=>e())},[c,n,y]);let $=(0,l.useCallback)(async()=>{if(c){j(!0);try{let e=(0,S.P)((0,S.rJ)(c,"leaderboard"),(0,S.My)("rank","asc"),(0,S.AB)(100)),a=(await (0,S.GG)(e)).docs.map(e=>({userId:e.id,...e.data()}));if(f(a),n){let e=(0,S.H9)(c,"leaderboard",n.uid),a=await (0,S.x7)(e);a.exists()?v({userId:n.uid,...a.data()}):v(null)}}catch(e){console.error("Error fetching leaderboard:",e),e instanceof Error&&e.message.includes("permission-denied")&&R.d.emit("permission-error",new M.$({path:"leaderboard",operation:"list"}))}finally{j(!1)}}},[c,n]);(0,l.useEffect)(()=>{"leaderboard"===u&&$()},[u,$]);let O=(0,l.useCallback)(async(e,a,t)=>{var s;if(!n||""===a||""===t||!c)return;let l=parseInt(a,10),r=parseInt(t,10);if(isNaN(l)||isNaN(r))return;let i=(0,S.H9)(c,"predictionFixtures",String(e),"userPredictions",n.uid),o={userId:n.uid,fixtureId:e,homeGoals:r,awayGoals:l,points:(null==(s=A[String(e)])?void 0:s.points)||0,timestamp:new Date().toISOString()};try{await (0,S.BN)(i,o,{merge:!0})}catch(a){let e=new M.$({path:i.path,operation:"write",requestResourceData:o});R.d.emit("permission-error",e)}},[n,c,A]),_=(0,l.useCallback)(async()=>{if(c&&o){L(!0),m({title:"بدء تحديث النقاط...",description:"قد تستغرق هذه العملية بضع لحظات."});try{let e=await (0,S.GG)((0,S.rJ)(c,"predictionFixtures"));if(e.empty){m({title:"لا توجد مباريات",description:"لا توجد مباريات مثبتة لاحتساب نقاطها."}),L(!1);return}let a=e.docs.map(e=>e.id).map(e=>fetch("/api/football/fixtures?id=".concat(e)).then(e=>e.json())),t=await Promise.all(a),s=new Map;t.forEach(e=>{var a;let t=null==(a=e.response)?void 0:a[0];t&&s.set(t.fixture.id,t)});let l=Array.from(s.values()).filter(e=>["FT","AET","PEN"].includes(e.fixture.status.short));if(0===l.length){m({title:"لا توجد مباريات منتهية",description:"لم تنته أي من المباريات المثبتة بعد."}),L(!1);return}let r=(0,S.wP)(c),i={};for(let e of l)(await (0,S.GG)((0,S.rJ)(c,"predictionFixtures",String(e.fixture.id),"userPredictions"))).forEach(a=>{let t=a.data(),s=tQ(t,e);t.points!==s&&(r.update(a.ref,{points:s}),t.userId===(null==n?void 0:n.uid)&&(i[String(e.fixture.id)]={...t,points:s}))});await r.commit(),n&&Object.keys(i).length>0&&T(e=>({...e,...i})),m({title:"تم تحديث نقاط التوقعات",description:"جاري الآن تحديث لوحة الصدارة."});let o=new Map;for(let a of e.docs)(await (0,S.GG)((0,S.rJ)(c,"predictionFixtures",a.id,"userPredictions"))).forEach(e=>{let a=e.data();a.userId&&"number"==typeof a.points&&o.set(a.userId,(o.get(a.userId)||0)+a.points)});let d=new Map;if(o.size>0){let e=Array.from(o.keys());for(let a=0;a<e.length;a+=30){let t=e.slice(a,a+30);if(t.length>0){let e=(0,S.P)((0,S.rJ)(c,"users"),(0,S._M)("__name__","in",t));(await (0,S.GG)(e)).forEach(e=>d.set(e.id,e.data()))}}}let u=(0,S.wP)(c);(await (0,S.GG)((0,S.rJ)(c,"leaderboard"))).forEach(e=>{o.has(e.id)||u.delete(e.ref)});let p=Array.from(o.entries()).filter(e=>{let[a]=e;return d.has(a)}).sort((e,a)=>a[1]-e[1]),x=1;for(let[e,a]of p){let t=d.get(e);u.set((0,S.H9)(c,"leaderboard",e),{totalPoints:a,userName:t.displayName||"مستخدم_".concat(e.substring(0,4)),userPhoto:t.photoURL||"",rank:x},{merge:!0}),x++}await u.commit(),m({title:"اكتمل التحديث!",description:"تم تحديث لوحة الصدارة بنجاح."}),await $()}catch(e){console.error("Error calculating all points:",e),e instanceof Error&&m({variant:"destructive",title:"خطأ فادح",description:e.message||"حدث خطأ أثناء تحديث لوحة الصدارة."})}finally{L(!1)}}},[c,o,m,$,null==n?void 0:n.uid]),H=(0,l.useMemo)(()=>y.filter(e=>!!e.fixtureData&&!!e.fixtureData.fixture&&(0,N.GP)(new Date(1e3*e.fixtureData.fixture.timestamp),"yyyy-MM-dd")===F).sort((e,a)=>e.fixtureData.fixture.timestamp-a.fixtureData.fixture.timestamp),[y,F]);return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)(x.a,{title:"التوقعات",onBack:t,canGoBack:i,actions:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(ey,{navigate:a,children:(0,s.jsx)(B.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(P.A,{className:"h-5 w-5"})})}),(0,s.jsx)(sa,{})]})}),(0,s.jsxs)(eZ,{value:u,onValueChange:p,className:"w-full flex-1 flex flex-col min-h-0",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(eU,{value:"leaderboard",children:[(0,s.jsx)(tV.A,{className:"ml-2 h-4 w-4"}),"الترتيب"]}),(0,s.jsxs)(eU,{value:"voting",children:[(0,s.jsx)(tK.A,{className:"ml-2 h-4 w-4"}),"تصويت"]})]}),(0,s.jsxs)(eq,{value:"voting",className:"flex-1 flex flex-col mt-0 data-[state=inactive]:hidden min-h-0",children:[(0,s.jsx)(t1,{selectedDateKey:F,onDateSelect:z}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-1 space-y-4 pt-4",children:k||d||I?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(E.A,{className:"h-6 w-6 animate-spin"})}):n?H.length>0?H.map(e=>(0,s.jsx)(tY,{predictionMatch:e,userPrediction:A[e.id],onSave:O},e.id)):(0,s.jsxs)("div",{className:"text-center text-muted-foreground pt-10",children:[(0,s.jsx)("p",{children:"لا توجد مباريات للتوقع في هذا اليوم."}),o&&(0,s.jsx)("p",{className:"text-xs",children:"يمكنك تثبيت مباريات من شاشة المباريات."})]}):(0,s.jsxs)("div",{className:"text-center text-muted-foreground pt-10",children:[(0,s.jsx)("p",{children:"ميزة التوقعات متاحة للمستخدمين المسجلين."}),(0,s.jsx)(B.$,{onClick:()=>a("Welcome"),className:"mt-4",children:"تسجيل الدخول"})]})})]}),(0,s.jsx)(eq,{value:"leaderboard",className:"mt-4 flex-1 overflow-y-auto",children:(0,s.jsxs)(e7.Zp,{children:[(0,s.jsxs)(e7.aR,{className:"flex-row items-center justify-between",children:[(0,s.jsx)(e7.ZB,{children:"لوحة الصدارة"}),o&&(0,s.jsxs)(B.$,{onClick:_,disabled:G,size:"sm",children:[G?(0,s.jsx)(E.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(eW.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"mr-2",children:"تحديث النتائج"})]})]}),(0,s.jsx)(e7.Wu,{className:"p-0",children:(0,s.jsx)(tX,{leaderboard:h,loadingLeaderboard:g,userScore:b,userId:null==n?void 0:n.uid})})]})})]})]})}}},se=["Matches","MyCountry","Predictions","Competitions","News","Settings"],sa=()=>{var e;let{user:a}=(0,r.useAuth)(),t=async()=>{await ay()};return a?(0,s.jsxs)(tO,{children:[(0,s.jsx)(t_,{asChild:!0,children:(0,s.jsx)(B.$,{variant:"ghost",className:"relative h-7 w-7 rounded-full",children:(0,s.jsxs)(f,{className:"h-7 w-7",children:[(0,s.jsx)(g,{src:a.photoURL||"",alt:a.displayName||""}),(0,s.jsx)(j,{children:null==(e=a.displayName)?void 0:e.charAt(0)})]})})}),(0,s.jsxs)(tH,{className:"w-56",align:"end",forceMount:!0,children:[(0,s.jsx)(tJ,{className:"font-normal",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:a.displayName}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:a.email})]})}),(0,s.jsx)(tU,{}),(0,s.jsxs)(tZ,{onClick:()=>{window.appNavigate&&window.appNavigate("Profile")},children:[(0,s.jsx)(eO.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"الملف الشخصي"})]}),(0,s.jsx)(tU,{}),(0,s.jsxs)(tZ,{onClick:t,children:[(0,s.jsx)(aN.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"تسجيل الخروج"})]})]})]}):(0,s.jsx)(B.$,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",onClick:()=>{localStorage.removeItem(eh),window.location.reload()},children:(0,s.jsx)(eO.A,{className:"h-4 w-4"})})};function st(e){var a;let{showHints:t,onHintsDismissed:i}=e,{user:n,isUserLoading:o}=(0,r.useAuth)(),{db:c}=(0,r.useFirestore)(),[d,m]=(0,l.useState)({}),[u,x]=(0,l.useState)(null),[h,f]=(0,l.useState)({activeTab:"Matches",stacks:{Matches:[{key:"Matches-0",screen:"Matches"}],Competitions:[{key:"Competitions-0",screen:"Competitions"}],News:[{key:"News-0",screen:"News"}],MyCountry:[{key:"MyCountry-0",screen:"MyCountry"}],Predictions:[{key:"Predictions-0",screen:"Predictions"}],Settings:[{key:"Settings-0",screen:"Settings"}]}}),{showSplashAd:g,showBannerAd:j}=tz(),N=(0,l.useRef)(1),b=(0,l.useCallback)(async()=>{if(!c)return void x({leagues:new Map,teams:new Map,countries:new Map,continents:new Map,players:new Map,coaches:new Map});try{let[e,a,t,s,l,r]=await Promise.all([(0,S.GG)((0,S.rJ)(c,"leagueCustomizations")),(0,S.GG)((0,S.rJ)(c,"countryCustomizations")),(0,S.GG)((0,S.rJ)(c,"continentCustomizations")),(0,S.GG)((0,S.rJ)(c,"teamCustomizations")),(0,S.GG)((0,S.rJ)(c,"playerCustomizations")),(0,S.GG)((0,S.rJ)(c,"coachCustomizations"))]),i={leagues:new Map,countries:new Map,continents:new Map,teams:new Map,players:new Map,coaches:new Map};e.forEach(e=>i.leagues.set(Number(e.id),e.data().customName)),a.forEach(e=>i.countries.set(e.id,e.data().customName)),t.forEach(e=>i.continents.set(e.id,e.data().customName)),s.forEach(e=>i.teams.set(Number(e.id),e.data().customName)),l.forEach(e=>i.players.set(Number(e.id),e.data().customName)),r.forEach(e=>i.coaches.set(Number(e.id),e.data().customName)),x(i)}catch(e){console.warn("Failed to fetch custom names, using empty maps.",e),x({leagues:new Map,teams:new Map,countries:new Map,continents:new Map,players:new Map,coaches:new Map})}},[c]);(0,l.useEffect)(()=>{b()},[b]),(0,l.useEffect)(()=>{let e=null,a=()=>{m(ef())},t=()=>{e&&(e(),e=null),window.removeEventListener("localFavoritesChanged",a)};if(!o){if(t(),n&&c){let a=(0,S.H9)(c,"users",n.uid,"favorites","data");e=(0,S.aQ)(a,e=>{m(e.exists()?e.data():{})},e=>{console.error("Error listening to remote favorites:",e),m({})})}else m(ef()),window.addEventListener("localFavoritesChanged",a);return()=>t()}},[n,c,o]);let v=(0,l.useCallback)(()=>{f(e=>{let a=e.stacks[e.activeTab];return a.length>1?{...e,stacks:{...e.stacks,[e.activeTab]:a.slice(0,-1)}}:se.includes(e.activeTab)?e:{...e,activeTab:"Matches"}})},[]),y=(0,l.useCallback)((e,a)=>{let t="".concat(e,"-").concat(N.current++);f(s=>{if(se.includes(e))return{...s,activeTab:e,stacks:{...s.stacks,[e]:[{key:"".concat(e,"-0"),screen:e,props:a}]}};let l=s.stacks[s.activeTab]||[];return{...s,stacks:{...s.stacks,[s.activeTab]:[...l,{key:t,screen:e,props:a}]}}})},[]);if((0,l.useEffect)(()=>{window.appNavigate=y},[y]),null===u)return null;if(g)return(0,s.jsx)(tG,{});let w=h.stacks[h.activeTab]||[],k={initial:{x:"100%",opacity:0},in:{x:0,opacity:1},out:{x:"-100%",opacity:0}},C={initial:{opacity:0},in:{opacity:1},out:{opacity:0}},A={type:"tween",ease:"anticipate",duration:.4},E={type:"tween",ease:"easeIn",duration:.2};return(0,s.jsxs)("main",{className:"h-screen w-screen bg-background flex flex-col",children:[t&&(0,s.jsx)(t9,{onDismiss:i,activeTab:h.activeTab}),(0,s.jsx)("div",{className:"relative flex-1 flex flex-col overflow-hidden",children:(0,s.jsx)(t2.N,{initial:!1,children:se.map(e=>{let a=h.stacks[e];return a&&0!==a.length&&h.activeTab===e?(0,s.jsx)(t4.P.div,{className:"absolute inset-0 flex flex-col",initial:"initial",animate:"in",exit:"out",variants:C,transition:E,children:(0,s.jsx)(t2.N,{initial:!1,children:a.map((e,t)=>{var l;let r=t===a.length-1,i=null==(l=t7[e.screen])?void 0:l.component;if(!i)return null;let n={...e.props,navigate:y,goBack:v,canGoBack:a.length>1,isVisible:r,favorites:d,customNames:u,setFavorites:m,onCustomNameChange:b};return(0,s.jsx)(t4.P.div,{className:"absolute inset-0 flex flex-col bg-background",initial:"initial",animate:r?"in":"out",exit:"out",variants:k,transition:A,style:{zIndex:t+1,pointerEvents:r?"auto":"none"},children:(0,s.jsx)(i,{...n})},e.key)})})},e):null})})}),j&&(0,s.jsx)(tL,{}),se.includes(null==(a=w[w.length-1])?void 0:a.screen)&&(0,s.jsx)(p,{activeScreen:h.activeTab,onNavigate:e=>y(e)})]})}let ss=e=>{let{items:a,onSelect:t,selectedIds:l,itemType:r}=e;return(0,s.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:a.map(e=>(0,s.jsxs)("div",{className:"relative flex flex-col items-center justify-start gap-1 text-center cursor-pointer h-[88px]",onClick:()=>t(e),children:[(0,s.jsxs)(f,{className:(0,u.cn)("h-14 w-14 border-2 border-transparent transition-all",l.has(e.id)&&"border-primary"),children:[(0,s.jsx)(g,{src:e.logo,alt:e.name,className:(0,u.cn)("league"===r&&"object-contain p-1")}),(0,s.jsx)(j,{children:e.name.charAt(0)})]}),(0,s.jsx)("span",{className:"text-[11px] font-medium truncate w-full",children:e.name}),l.has(e.id)&&(0,s.jsx)("div",{className:"absolute top-0 right-0 h-5 w-5 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:(0,s.jsx)(aR.A,{className:"h-3 w-3 text-primary-foreground"})})]},e.id))})};function sl(e){let{onOnboardingComplete:a}=e,{user:t}=(0,A.As)(),{db:r}=(0,A.jt)(),[i,n]=(0,l.useState)(new Set),[o,c]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{let e=ef(),a=new Set([605]);e.teams&&Object.keys(e.teams).map(Number).forEach(e=>a.add(e)),n(a);let t=new Set;e.leagues&&Object.keys(e.leagues).map(Number).forEach(e=>t.add(e)),c(t)},[]);let d=(0,l.useCallback)((e,a)=>{("team"===a?n:c)(a=>{let t=new Set(a);return t.has(e.id)?t.delete(e.id):t.add(e.id),t})},[]),m=async()=>{let e={teams:{},leagues:{}};if(em.forEach(a=>{i.has(a.id)&&e.teams&&(e.teams[a.id]={teamId:a.id,name:a.name,logo:a.logo,type:a.type})}),eu.forEach(a=>{o.has(a.id)&&e.leagues&&(e.leagues[a.id]={leagueId:a.id,name:a.name,logo:a.logo})}),t&&r){let a=(0,S.H9)(r,"users",t.uid,"favorites","data");try{await (0,S.BN)(a,{...e,userId:t.uid},{merge:!0}),ej()}catch(s){let t=new M.$({path:a.path,operation:"write",requestResourceData:e});R.d.emit("permission-error",t)}}else eg(e);a()};return(0,s.jsxs)("div",{className:"flex h-full flex-col bg-background",children:[(0,s.jsx)("div",{className:"p-4 flex justify-end",children:(0,s.jsx)(B.$,{variant:"ghost",onClick:a,children:"تخطي"})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center p-4 pt-0 text-center",children:[(0,s.jsx)(tT.I,{className:"h-16 w-16 mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2 font-headline",children:"خصص تجربتك"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"اختر فرقك وبطولاتك المفضلة لتبقى على اطلاع دائم."}),(0,s.jsxs)(eZ,{defaultValue:"teams",className:"w-full flex-1 flex flex-col min-h-0",children:[(0,s.jsxs)(eJ,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(eU,{value:"teams",children:"الفرق"}),(0,s.jsx)(eU,{value:"leagues",children:"البطولات"})]}),(0,s.jsxs)(eR,{className:"flex-1 mt-4",children:[(0,s.jsx)(eq,{value:"teams",children:(0,s.jsx)(ss,{items:em,onSelect:e=>d(e,"team"),selectedIds:i,itemType:"team"})}),(0,s.jsx)(eq,{value:"leagues",children:(0,s.jsx)(ss,{items:eu,onSelect:e=>d(e,"league"),selectedIds:o,itemType:"league"})})]})]})]}),(0,s.jsx)("div",{className:"p-4 border-t sticky bottom-0 bg-background/90 backdrop-blur-sm",children:(0,s.jsx)(B.$,{onClick:m,className:"w-full",size:"lg",children:"متابعة"})})]})}function sr(e){return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",...e,children:[(0,s.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,s.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,s.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,s.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C42.012,35.132,44,30.024,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}let si="goalstack_guest_mode_active";function sn(){let{toast:e}=(0,ed.dj)(),{db:a}=(0,r.useFirestore)(),[t,i]=(0,l.useState)(!1),n=async()=>{if(!a)return;localStorage.removeItem(si),i("google");let t=(0,ab.xI)(),s=new ab.HF;try{let e=await (0,ab.df)(t,s);await av(e.user,a)}catch(a){"auth/popup-closed-by-user"!==a.code&&"auth/cancelled-popup-request"!==a.code&&(console.error("Google Sign-In Error:",a),e({variant:"destructive",title:"خطأ في تسجيل الدخول",description:"حدث خطأ أثناء محاولة تسجيل الدخول باستخدام جوجل."}))}finally{i(!1)}};return(0,s.jsx)("div",{className:"flex h-full flex-col bg-background",children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center p-8 text-center",children:[(0,s.jsx)(tT.I,{className:"h-24 w-24 mb-4"}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2 font-headline text-primary",children:"أهلاً بك في نبض الملاعب"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-8",children:"عالم كرة القدم بين يديك. سجل الدخول لمزامنة مفضلاتك، أو تصفح كزائر."}),(0,s.jsxs)("div",{className:"w-full max-w-xs space-y-4",children:[(0,s.jsx)(B.$,{onClick:n,className:"w-full",size:"lg",disabled:!!t,children:"google"===t?(0,s.jsx)(E.A,{className:"h-5 w-5 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sr,{className:"h-5 w-5 mr-2"}),"المتابعة باستخدام جوجل"]})}),(0,s.jsx)(B.$,{variant:"ghost",onClick:()=>{i("guest");try{localStorage.setItem(si,"true"),window.location.reload()}catch(a){console.error("Guest mode error:",a),e({variant:"destructive",title:"خطأ",description:"فشل تفعيل وضع الزائر. يرجى المحاولة مرة أخرى."})}finally{i(!1)}},className:"w-full",disabled:!!t,children:"guest"===t?(0,s.jsx)(E.A,{className:"h-5 w-5 animate-spin"}):"تصفح كزائر"})]}),(0,s.jsx)("p",{className:"mt-8 text-xs text-muted-foreground/80 px-4",children:"بالاستمرار، أنت توافق على شروط الخدمة و سياسة الخصوصية."})]})})}let so="goalstack_guest_onboarding_complete",sc="goalstack_new_user_hints_shown",sd=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-center",children:[(0,s.jsx)(tT.I,{className:"h-24 w-24 mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold font-headline mb-8 text-primary",children:"نبض الملاعب"}),(0,s.jsx)(E.A,{className:"h-8 w-8 animate-spin text-primary"})]}),sm=e=>{let{user:a,isGuest:t}=e,{db:i}=(0,r.useFirestore)(),[n,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!0),[m,u]=(0,l.useState)(!1),[p,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{if(d(!0),t){let e="true"===localStorage.getItem(so);o(e),e||x(!0),d(!1);return}if(!a||!i)return d(!1);let e=(0,S.H9)(i,"users",a.uid);try{let t=(await (0,S.x7)(e)).data(),s=(null==t?void 0:t.onboardingComplete)||!1;o(s),s||x(!0),a.isAnonymous?u(!1):u(!(null==t?void 0:t.displayName)||t.displayName.startsWith("مستخدم_"))}catch(e){console.error("Error checking onboarding status:",e),o(!1)}finally{d(!1)}})()},[a,i,t]);let h=async()=>{if(x(!0),t){localStorage.setItem(so,"true"),o(!0);return}if(!a||!i)return;let e=(0,S.H9)(i,"users",a.uid);try{var s,l;await (0,S.BN)(e,{onboardingComplete:!0},{merge:!0}),o(!0);let t=await (0,S.x7)(e);!a.isAnonymous&&(!(null==(s=t.data())?void 0:s.displayName)||(null==(l=t.data())?void 0:l.displayName.startsWith("مستخدم_")))&&u(!0)}catch(t){let a=new M.$({path:e.path,operation:"update",requestResourceData:{onboardingComplete:!0}});R.d.emit("permission-error",a)}},f=()=>{u(!1),n&&window.appNavigate("Matches")},g=(0,l.useMemo)(()=>p&&!sessionStorage.getItem(sc),[p]);return c?(0,s.jsx)(sd,{}):n?m?(0,s.jsx)(a0,{navigate:()=>{},goBack:f,canGoBack:!1,isNewUserFlow:!0,onFlowComplete:f}):(0,s.jsx)(tF,{children:(0,s.jsx)(st,{showHints:g,onHintsDismissed:()=>{sessionStorage.setItem(sc,"true")}})}):(0,s.jsx)(sl,{onOnboardingComplete:h})};function su(){let{user:e,isUserLoading:a}=(0,r.useAuth)(),[t,i]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{i("true"===localStorage.getItem(si)),o(!1)},[]),a||n)?(0,s.jsx)(sd,{}):e||t?(0,s.jsx)(sm,{user:e,isGuest:t}):(0,s.jsx)(sn,{})}},6936:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var s=t(5155),l=t(1067),r=t(6695);function i(e){let{navigate:a,goBack:t,canGoBack:i}=e,n=new Date().getFullYear();return(0,s.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,s.jsx)(l.a,{title:"شروط الخدمة",onBack:t,canGoBack:!0}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,s.jsxs)(r.Zp,{children:[(0,s.jsx)(r.aR,{children:(0,s.jsx)(r.ZB,{children:"شروط الخدمة لتطبيق نبض الملاعب"})}),(0,s.jsxs)(r.Wu,{className:"space-y-4 text-muted-foreground leading-relaxed",children:[(0,s.jsxs)("p",{className:"font-bold",children:['مرحبًا بك في نبض الملاعب. باستخدامك لتطبيقنا ("الخدمة")، فإنك توافق على الالتزام بشروط وأحكام الخدمة هذه ("الشروط"). آخر تحديث: أكتوبر ',n,"."]}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"1. قبول الشروط"}),(0,s.jsx)("p",{children:"من خلال الوصول إلى الخدمة أو استخدامها، فإنك توافق على الالتزام بهذه الشروط. إذا كنت لا توافق على أي جزء من الشروط، فلا يجوز لك الوصول إلى الخدمة."}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"2. استخدام الخدمة"}),(0,s.jsx)("p",{children:"أنت توافق على استخدام الخدمة فقط للأغراض المشروعة ووفقًا لهذه الشروط. أنت مسؤول عن جميع الأنشطة التي تحدث تحت حسابك."}),(0,s.jsxs)("ul",{className:"list-disc pr-5 space-y-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"السلوك المحظور:"})," يُحظر عليك استخدام الخدمة لنشر أي محتوى غير قانوني، أو افترائي، أو مسيء، أو يحض على الكراهية، أو ينتهك حقوق الآخرين."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"حساب المستخدم:"})," أنت مسؤول عن الحفاظ على أمان حسابك. يجب ألا تشارك تفاصيل حسابك مع الآخرين."]})]}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"3. المحتوى الذي ينشئه المستخدم"}),(0,s.jsx)("p",{children:"أنت تحتفظ بملكية المحتوى الذي تقوم بإنشائه (مثل التعليقات والتوقعات). ومع ذلك، من خلال نشره على خدمتنا، فإنك تمنحنا ترخيصًا عالميًا، غير حصري، خاليًا من حقوق الملكية لاستخدام هذا المحتوى وعرضه وتوزيعه فيما يتعلق بتشغيل الخدمة."}),(0,s.jsx)("p",{children:"نحتفظ بالحق في إزالة أي محتوى ينتهك هذه الشروط أو نعتبره غير لائق، دون إشعار مسبق."}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"4. الملكية الفكرية"}),(0,s.jsx)("p",{children:"الخدمة وجميع محتوياتها الأصلية (باستثناء المحتوى الذي يقدمه المستخدمون)، والميزات، والوظائف هي وستبقى ملكية حصرية لـ نبض الملاعب ومرخصيها. خدمتنا محمية بموجب حقوق النشر والعلامات التجارية والقوانين الأخرى."}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"5. دقة البيانات"}),(0,s.jsx)("p",{children:'بيانات المباريات والنتائج والإحصائيات يتم توفيرها من خلال أطراف ثالثة. على الرغم من أننا نسعى لتقديم معلومات دقيقة، إلا أننا لا نضمن دقتها أو اكتمالها أو توقيتها. يتم توفير المعلومات "كما هي" لأغراض إعلامية فقط.'}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"6. إنهاء الخدمة"}),(0,s.jsx)("p",{children:"يجوز لنا إنهاء أو تعليق حسابك ووصولك إلى الخدمة فورًا، دون إشعار مسبق، إذا انتهكت هذه الشروط. عند الإنهاء، ينتهي حقك في استخدام الخدمة فورًا."}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"7. تحديد المسؤولية"}),(0,s.jsx)("p",{children:"لن يكون نبض الملاعب أو مديروه أو موظفوه مسؤولين بأي حال من الأحوال عن أي أضرار غير مباشرة أو عرضية أو خاصة أو تبعية تنشأ عن استخدامك أو عدم قدرتك على استخدام الخدمة."}),(0,s.jsx)("h3",{className:"font-bold text-lg text-foreground pt-4",children:"8. التغييرات على الشروط"}),(0,s.jsx)("p",{children:"نحتفظ بالحق، وفقًا لتقديرنا الخاص، في تعديل أو استبدال هذه الشروط في أي وقت. سنقدم إشعارًا بالتغييرات الجوهرية قبل دخولها حيز التنفيذ."})]})]})})]})}},7403:(e,a,t)=>{Promise.resolve().then(t.bind(t,1823))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,511,356,21,622,120,441,684,358],()=>a(7403)),_N_E=e.O()}]);